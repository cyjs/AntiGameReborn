!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(window,function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});var n={},o={};window.AGO=n,window.AGB=o},function(e,t,a){e.exports=function(){"use strict";var e=Object.freeze||function(e){return e},t=e(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),a=e(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),n=e(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o=e(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),i=e(["#text"]),r=Object.freeze||function(e){return e},s=r(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),l=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),c=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),p=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),d=Object.hasOwnProperty,u=Object.setPrototypeOf,b=("undefined"!=typeof Reflect&&Reflect).apply;function m(e,t){u&&u(e,null);for(var a=t.length;a--;){var n=t[a];if("string"==typeof n){var o=n.toLowerCase();o!==n&&(Object.isFrozen(t)||(t[a]=o),n=o)}e[n]=!0}return e}function g(e){var t={},a=void 0;for(a in e)b(d,e,[a])&&(t[a]=e[a]);return t}b||(b=function(e,t,a){return e.apply(t,a)});var f=Object.seal||function(e){return e},y=f(/\{\{[\s\S]*|[\s\S]*\}\}/gm),h=f(/<%[\s\S]*|[\s\S]*%>/gm),v=f(/^data-[\-\w.\u00B7-\uFFFF]/),_=f(/^aria-[\-\w]+$/),T=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),A=f(/^(?:\w+script|data):/i),C=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function I(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var S=("undefined"!=typeof Reflect&&Reflect).apply,k=Array.prototype.slice,x=Object.freeze,w=function(){return"undefined"==typeof window?null:window};S||(S=function(e,t,a){return e.apply(t,a)});var O=function(e,t){if("object"!==(void 0===e?"undefined":P(e))||"function"!=typeof e.createPolicy)return null;var a=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(a=t.currentScript.getAttribute("data-tt-policy-suffix"));var n="dompurify"+(a?"#"+a:"");try{return e.createPolicy(n,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(),d=function(t){return e(t)};if(d.version="1.0.10",d.removed=[],!r||!r.document||9!==r.document.nodeType)return d.isSupported=!1,d;var u=r.document,b=!1,f=!1,D=r.document,M=r.DocumentFragment,E=r.HTMLTemplateElement,N=r.Node,L=r.NodeFilter,R=r.NamedNodeMap,U=void 0===R?r.NamedNodeMap||r.MozNamedAttrMap:R,B=r.Text,F=r.Comment,G=r.DOMParser,q=r.TrustedTypes;if("function"==typeof E){var H=D.createElement("template");H.content&&H.content.ownerDocument&&(D=H.content.ownerDocument)}var j=O(q,u),J=j?j.createHTML(""):"",K=D,z=K.implementation,V=K.createNodeIterator,Y=K.getElementsByTagName,W=K.createDocumentFragment,X=u.importNode,$={};d.isSupported=z&&void 0!==z.createHTMLDocument&&9!==D.documentMode;var Z=y,Q=h,ee=v,te=_,ae=A,ne=C,oe=T,ie=null,re=m({},[].concat(I(t),I(a),I(n),I(o),I(i))),se=null,le=m({},[].concat(I(s),I(l),I(c),I(p))),ce=null,pe=null,de=!0,ue=!0,be=!1,me=!1,ge=!1,fe=!1,ye=!1,he=!1,ve=!1,_e=!1,Te=!1,Ae=!0,Ce=!0,Pe=!1,Ie={},Se=m({},["audio","head","math","script","style","template","svg","video"]),ke=m({},["audio","video","img","source","image"]),xe=m({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),we=null,Oe=D.createElement("form"),De=function(e){we&&we===e||(e&&"object"===(void 0===e?"undefined":P(e))||(e={}),ie="ALLOWED_TAGS"in e?m({},e.ALLOWED_TAGS):re,se="ALLOWED_ATTR"in e?m({},e.ALLOWED_ATTR):le,ce="FORBID_TAGS"in e?m({},e.FORBID_TAGS):{},pe="FORBID_ATTR"in e?m({},e.FORBID_ATTR):{},Ie="USE_PROFILES"in e&&e.USE_PROFILES,de=!1!==e.ALLOW_ARIA_ATTR,ue=!1!==e.ALLOW_DATA_ATTR,be=e.ALLOW_UNKNOWN_PROTOCOLS||!1,me=e.SAFE_FOR_JQUERY||!1,ge=e.SAFE_FOR_TEMPLATES||!1,fe=e.WHOLE_DOCUMENT||!1,ve=e.RETURN_DOM||!1,_e=e.RETURN_DOM_FRAGMENT||!1,Te=e.RETURN_DOM_IMPORT||!1,he=e.FORCE_BODY||!1,Ae=!1!==e.SANITIZE_DOM,Ce=!1!==e.KEEP_CONTENT,Pe=e.IN_PLACE||!1,oe=e.ALLOWED_URI_REGEXP||oe,ge&&(ue=!1),_e&&(ve=!0),Ie&&(ie=m({},[].concat(I(i))),se=[],!0===Ie.html&&(m(ie,t),m(se,s)),!0===Ie.svg&&(m(ie,a),m(se,l),m(se,p)),!0===Ie.svgFilters&&(m(ie,n),m(se,l),m(se,p)),!0===Ie.mathMl&&(m(ie,o),m(se,c),m(se,p))),e.ADD_TAGS&&(ie===re&&(ie=g(ie)),m(ie,e.ADD_TAGS)),e.ADD_ATTR&&(se===le&&(se=g(se)),m(se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&m(xe,e.ADD_URI_SAFE_ATTR),Ce&&(ie["#text"]=!0),fe&&m(ie,["html","head","body"]),ie.table&&m(ie,["tbody"]),x&&x(e),we=e)},Me=function(e){d.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=J}},Ee=function(e,t){try{d.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){d.removed.push({attribute:null,from:t})}t.removeAttribute(e)},Ne=function(e){var t=void 0,a=void 0;if(he)e="<remove></remove>"+e;else{var n=e.match(/^[\s]+/);(a=n&&n[0])&&(e=e.slice(a.length))}if(b)try{t=(new G).parseFromString(e,"text/html")}catch(e){}if(f&&m(ce,["title"]),!t||!t.documentElement){var o=t=z.createHTMLDocument(""),i=o.body;i.parentNode.removeChild(i.parentNode.firstElementChild),i.outerHTML=j?j.createHTML(e):e}return a&&t.body.insertBefore(D.createTextNode(a),t.body.childNodes[0]||null),Y.call(t,fe?"html":"body")[0]};d.isSupported&&(function(){try{var e=Ne('<svg><p><style><img src="</style><img src=x onerror=1//">');e.querySelector("svg img")&&(b=!0)}catch(e){}}(),function(){try{var e=Ne("<x/><title>&lt;/title&gt;&lt;img&gt;");e.querySelector("title").innerHTML.match(/<\/title/)&&(f=!0)}catch(e){}}());var Le=function(e){return V.call(e.ownerDocument||e,e,L.SHOW_ELEMENT|L.SHOW_COMMENT|L.SHOW_TEXT,function(){return L.FILTER_ACCEPT},!1)},Re=function(e){return"object"===(void 0===N?"undefined":P(N))?e instanceof N:e&&"object"===(void 0===e?"undefined":P(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ue=function(e,t,a){$[e]&&$[e].forEach(function(e){e.call(d,t,a,we)})},Be=function(e){var t,a=void 0;if(Ue("beforeSanitizeElements",e,null),!((t=e)instanceof B||t instanceof F||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof U&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute))return Me(e),!0;var n=e.nodeName.toLowerCase();if(Ue("uponSanitizeElement",e,{tagName:n,allowedTags:ie}),!ie[n]||ce[n]){if(Ce&&!Se[n]&&"function"==typeof e.insertAdjacentHTML)try{var o=e.innerHTML;e.insertAdjacentHTML("AfterEnd",j?j.createHTML(o):o)}catch(e){}return Me(e),!0}return"noscript"===n&&e.innerHTML.match(/<\/noscript/i)?(Me(e),!0):"noembed"===n&&e.innerHTML.match(/<\/noembed/i)?(Me(e),!0):(!me||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(d.removed.push({element:e.cloneNode()}),e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),ge&&3===e.nodeType&&(a=(a=(a=e.textContent).replace(Z," ")).replace(Q," "),e.textContent!==a&&(d.removed.push({element:e.cloneNode()}),e.textContent=a)),Ue("afterSanitizeElements",e,null),!1)},Fe=function(e,t,a){if(Ae&&("id"===t||"name"===t)&&(a in D||a in Oe))return!1;if(ue&&ee.test(t));else if(de&&te.test(t));else{if(!se[t]||pe[t])return!1;if(xe[t]);else if(oe.test(a.replace(ne,"")));else if("src"!==t&&"xlink:href"!==t||"script"===e||0!==a.indexOf("data:")||!ke[e])if(be&&!ae.test(a.replace(ne,"")));else if(a)return!1}return!0},Ge=function(e){var t=void 0,a=void 0,n=void 0,o=void 0,i=void 0;Ue("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(i=r.length;i--;){var l=t=r[i],c=l.name,p=l.namespaceURI;if(a=t.value.trim(),n=c.toLowerCase(),s.attrName=n,s.attrValue=a,s.keepAttr=!0,Ue("uponSanitizeAttribute",e,s),a=s.attrValue,"name"===n&&"IMG"===e.nodeName&&r.id)o=r.id,r=S(k,r,[]),Ee("id",e),Ee(c,e),r.indexOf(o)>i&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===n&&"file"===a&&(se[n]||!pe[n]))continue;"id"===c&&e.setAttribute(c,""),Ee(c,e)}if(s.keepAttr){ge&&(a=(a=a.replace(Z," ")).replace(Q," "));var u=e.nodeName.toLowerCase();if(Fe(u,n,a))try{p?e.setAttributeNS(p,c,a):e.setAttribute(c,a),d.removed.pop()}catch(e){}}}Ue("afterSanitizeAttributes",e,null)}},qe=function e(t){var a=void 0,n=Le(t);for(Ue("beforeSanitizeShadowDOM",t,null);a=n.nextNode();)Ue("uponSanitizeShadowNode",a,null),Be(a)||(a.content instanceof M&&e(a.content),Ge(a));Ue("afterSanitizeShadowDOM",t,null)};return d.sanitize=function(e,t){var a=void 0,n=void 0,o=void 0,i=void 0,s=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!d.isSupported){if("object"===P(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof e)return r.toStaticHTML(e);if(Re(e))return r.toStaticHTML(e.outerHTML)}return e}if(ye||De(t),d.removed=[],Pe);else if(e instanceof N)a=Ne("\x3c!--\x3e"),1===(n=a.ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName?a=n:a.appendChild(n);else{if(!ve&&!ge&&!fe&&-1===e.indexOf("<"))return j?j.createHTML(e):e;if(!(a=Ne(e)))return ve?null:J}a&&he&&Me(a.firstChild);for(var l=Le(Pe?e:a);o=l.nextNode();)3===o.nodeType&&o===i||Be(o)||(o.content instanceof M&&qe(o.content),Ge(o),i=o);if(i=null,Pe)return e;if(ve){if(_e)for(s=W.call(a.ownerDocument);a.firstChild;)s.appendChild(a.firstChild);else s=a;return Te&&(s=X.call(u,s,!0)),s}var c=fe?a.outerHTML:a.innerHTML;return ge&&(c=(c=c.replace(Z," ")).replace(Q," ")),j?j.createHTML(c):c},d.setConfig=function(e){De(e),ye=!0},d.clearConfig=function(){we=null,ye=!1},d.isValidAttribute=function(e,t,a){we||De({});var n=e.toLowerCase(),o=t.toLowerCase();return Fe(n,o,a)},d.addHook=function(e,t){"function"==typeof t&&($[e]=$[e]||[],$[e].push(t))},d.removeHook=function(e){$[e]&&$[e].pop()},d.removeHooks=function(e){$[e]&&($[e]=[])},d.removeAllHooks=function(){$={}},d}()}()},,function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(0);function r(e,t,a,n,o,i,r){try{var s=e[i](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function s(e){return function(){var t=this,a=arguments;return new Promise(function(n,o){var i=e.apply(t,a);function s(e){r(i,n,o,s,l,"next",e)}function l(e){r(i,n,o,s,l,"throw",e)}s(void 0)})}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.console.log("AGO",i.b);var c=o()(window);window.console.log(c),i.b.Main={Messages:function(e,t){"Display"===e&&i.b.Main.Display(t)},Read:function(){var e;e={commander:0,admiral:0,engineer:0,geologist:0,technocrat:0},p.iterateChildren(document.getElementById("officers"),function(t){var a=t.className||"";d.hasClass(a,"on")&&u.iterate(e,function(t){d.hasClass(a,t)&&(e[t]=1)})}),u.iterate(e,function(t){i.b.Option.set(t,e[t])}),document.getElementById("officers").classList.contains("all")?i.b.Option.set("comstaff",1):i.b.Option.set("comstaff",0),i.b.Option.get("nextItem",0)?i.b.Time.ogameTime>i.b.Option.get("nextItem",0)&&p.addClass(".premiumHighligt",null,"selected"):i.b.Trader&&i.b.Trader.updateNextItem(0,function(e){1===e&&p.addClass(".premiumHighligt",null,"selected")})},Run:function(){var e,t,a,n,o,r;(e=document.getElementById("menuTableTools"))&&(a=(t=document.createDocumentFragment()).appendChild(document.createElement("li")),n=p.appendSPAN(a,"menu_icon"),p.appendA(n,{id:"ago_menubutton_logo",class:"ago_menubutton_logo_inactive"},{click:i.b.Main.clickIcon}),r=p.appendA(a,{id:"ago_menubutton",class:"menubutton"},{click:i.b.Main.clickButton}),o=1<i.b.App.beta?"AGRalpha":i.b.App.beta?"AGRbeta":"AntiGameReborn",p.appendSPAN(r,"textlabel",o),p.appendSPAN(r,{id:"ago_menubutton_coords"}),p.prependChild(e,t),!i.b.App.disabled&&30<i.b.Notify.problem&&p.setStyleColor("ago_menubutton","id","#FF0000"));if(20>i.b.Notify.problem){var s,l,c;if(s=["","fleet1","movement","galaxy","messages"][i.b.Option.get("O03",2)]){var d=document.getElementById("logoLink");d&&(d.parentNode.href=i.b.Uni.path+s)}if(l=document.getElementById("playerName"))if(3!==l.childNodes[0].nodeType?p.prependChild(l,document.createTextNode(i.b.App.title+" ")):l.childNodes[0].textContent=i.b.App.title+" ",(c=l.querySelector(".status_abbr_outlaw"))&&c.title){var u,b;for(u="",c=c.title;b=/\d{1,2}\D/g.exec(c);)u+=b[0]+" ",c=c.split(b[0]).join("");p.appendTEXT(l,u)}i.b.Main.modeTitle=i.b.Option.is("O04")?3:0,i.b.Main.Display()}},Complete:function(){i.b.Main.updateTitle(),i.b.Main.Check()},onKeydown:function(e){var t,a=i.b.Option.is("U35");if(112<=e.keyCode&&123>=e.keyCode&&i.b.Option.is("U32"))return(t=document.querySelectorAll("#planetList .smallplanet a.planetlink"))&&t[e.keyCode-112]&&p.click(e.shiftKey?"a.moonlink":"a.planetlink",t[e.keyCode-112].parentNode),!1;if(!(e.keyCode>=37&&e.keyCode<=40&&e.ctrlKey&&a))return!0;if(!(document.activeElement.tagName in{TEXTAREA:1})){var n={37:"left",38:"up",39:"right",40:"down"}[e.keyCode];"left"===n?i.b.Planets.Action({mode:"set",type:1,wait:1}):"right"===n?i.b.Planets.Action({mode:"set",type:3,wait:1}):b.check(n,"up","down")&&i.b.Planets.Action({scroll:n,wait:1})}},onSwipe:function(e,t){12===t?i.b.Panel.onSwipe(e):15===t&&i.b.Planets.onSwipe(e)},Display:function(){var e,t,a,n;n="inactive",i.b.Option.is("I83")&&(e=i.b.Panel.getActive("Target","coords",6),a=i.b.Task.cutCoords(e),t=u.get(i.b.Styles.colorType,+e.split(":")[3]||1)||"",n=a||i.b.Panel.getActive("Target","time")?"autocopy":"coords"),p.updateText("ago_menubutton_coords","id",a),p.setStyleColor("ago_menubutton_coords","id",t),p.updateClass("ago_menubutton_logo","id","ago_menubutton_logo_"+n)},clickButton:function(){i.b.App.disabled?(i.b.App.Save({disabled:!1}),i.b.Init.Location("",1e3)):20>i.b.Notify.problem&&i.b.Option.Menu()},updateButton:function(){5<i.b.Init.status&&p.setStyleColor("ago_menubutton","id",i.b.Notify.color||"")},updateInfo:function(e,t,a){if(5<i.b.Init.status&&e){i.b.Main.statusInfo=2;var n,o,r,s=document.getElementById("ago_menubutton_info");if(!s)(n=document.getElementById("ago_menubutton"))?((o=document.createElement("li")).className="ago_menubutton_info",(s=o.appendChild(document.createElement("div"))).id="ago_menubutton_info",p.after(n.parentNode,o)):s=void 0;if(s)p.hasChildren(s)||(s.parentNode.style.display="list-item",window.setTimeout(i.b.Main.hideInfo,i.b.Notify.loading?4e3:2e3)),r=document.getElementById("ago_menubutton_info_"+e)||p.append(s,"span",{id:"ago_menubutton_info_"+e},{display:"block"}),p.updateText(r,null,t),p.updateStyle(r,null,"color",a)}},hideInfo:function(){var e;i.b.Main.statusInfo=Math.max(i.b.Main.statusInfo-1,0),i.b.Main.statusInfo?window.setTimeout(i.b.Main.hideInfo,i.b.Notify.loading?4e3:2e3):(i.b.Notify.set("Hide"),(e=document.getElementById("ago_menubutton_info"))&&(p.removeChildren(e),p.setStyleDisplay(e.parentNode)))},clickIcon:function(){i.b.Option.set("I83",!i.b.Option.is("I83"),1),i.b.Init.Messages("Main","Display"),i.b.Init.Messages("Panel","Display")},updateTitle:function(){if(i.b.Option.is("O04"))if(i.b.Main.modeTitle>0&&p.getProperty("eventboxBlank","id","offsetHeight",2))document.title=i.b.App.title,i.b.Main.modeTitle--;else{var e=p.getText("tempcounter","id"),t=p.getText("#eventboxFilled .next_event + .next_event .undermark");document.title=e&&t?i.b.App.title+" - "+e+" - "+t:i.b.App.title}},Check:function(){}},i.b.Planets={status:0,updateDisplayStatus:0,selectedPlanet:0,selectedType:0,switchTimeout:0,Data:{},ByIndex:[],ByCoords:{},ByCoordstype:{},Task:{},Messages:function(e,t){"Action"===e?i.b.Planets.Action(t):"Display"===e&&i.b.Planets.Display()},Timer:function(){0<i.b.Planets.updateDisplayStatus&&i.b.Planets.Display()},onSwipe:function(e){"left"===e?i.b.Planets.Action({mode:"set",type:1}):"right"===e?i.b.Planets.Action({mode:"set",type:3}):b.check(e,"up","down")&&i.b.Planets.Action({scroll:e})},Read:function(){var e,t,a,n,o,r,s,l=0;if(e=document.getElementById("planetList"),t=p.getText("#countColonies .textCenter span").split("/"),i.b.Planets.count=m.parseIntAbs(t[0]),i.b.Planets.possible=m.parseIntAbs(t[1]),e&&p.hasChildren(e)>=i.b.Planets.count){for(i.b.Planets.status=1,e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType&&(s=g.check(m.parseIntAbs(e.id)))){for(n={index:++l,type:1},o={index:l,type:3,planet:s},t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)if(-1<(r=t.className||"").indexOf("planetlink"))for(r=t.title||"",n.name=(r.split("[",1)[0].split("<b>",2)[1]||"").trim(),n.temp=m.parseInt((r.match(/<br\/>.*<br>[^\d\-]*([\d\-]+)/i)||[])[1]),a=t.firstChild;a;a=a.nextSibling)1===a.nodeType&&(-1<(r=a.className||"").indexOf("planetPic")?n.img=a.src:-1<r.indexOf("planet-koords")&&(n.coords=(a.textContent||"").replace(/[^\d\:]/g,"")));else if(-1<r.indexOf("moonlink"))for(r=t.title||"",n.moon=g.check(m.parseIntAbs(g.getParameter("cp",t.href))),o.name=(r.split("[",1)[0].split("<b>",2)[1]||"").trim(),a=t.firstChild;a;a=a.nextSibling)1===a.nodeType&&(-1<(r=a.className||"").indexOf("icon-moon")&&(o.img=a.src));else-1<r.indexOf("constructionIcon")&&(a=t.querySelector(".icon_wrench_red")?-1:1,-1<r.indexOf("moon")?o.construction=a:n.construction=a);n.coords&&(n.coordstype=n.coords+":1",i.b.Planets.Data[s]=n,i.b.Planets.ByCoords[n.coords]=s,i.b.Planets.ByIndex[n.index]=s,i.b.Planets.ByCoordstype[n.coordstype]=s,n.moon&&(o.coords=n.coords,o.coordstype=n.coords+":3",i.b.Planets.Data[n.moon]=o,i.b.Planets.ByCoordstype[o.coordstype]=n.moon))}}else i.b.Planets.status=0,i.b.Planets.count&&y.Log("Planets - Error - Something wrong with the planetlist !",!0)},Run:function(){var e,t,a;t=i.b.Option.is("O53"),a=i.b.Option.isAnd("U32","O54"),(e=document.getElementById("rechts"))&&i.b.Option.is("O50")&&(i.b.Planets.enabled=!0,i.b.Planets.improve=i.b.Option.is("O51"),i.b.Planets.coloring=i.b.Option.isAnd("CS0","O55"),i.b.Option.is("O52")&&p.extendClass(e,null,"ago_planets_shrink"),e=document.createDocumentFragment(),p.appendSPAN(e,"ago_planets_arrow_planet"),p.appendSPAN(e,"ago_planets_arrow_moon"),p.appendChild(document.getElementById("countColonies"),e),p.iterateChildren(document.getElementById("planetList"),function(e){var n,o;p.setAttribute(".activity img",e,"src","/cdn/img/galaxy/activity15.gif"),o=g.check(m.parseIntAbs(e.id)),i.b.Planets.Data[o]&&(i.b.Planets.coloring&&i.b.Acc.coords===i.b.Planets.Data[o].coords&&p.extendClass(e,null,i.b.Token.getClassHighlight(i.b.Acc.type)),a&&p.appendSPAN(e,"ago_planets_shortcut",i.b.Planets.Data[o].index),t&&(i.b.Planets.Data[o].construction&&(n=(e.querySelector(".constructionIcon:not(.moon)")||{}).title,p.appendSPAN(e,"ago_planets_construction",n)),i.b.Planets.Data[o].moon&&i.b.Planets.Data[i.b.Planets.Data[o].moon].construction&&(n=(e.querySelector(".constructionIcon.moon")||{}).title,p.appendSPAN(e,"ago_planets_construction_moon",n))))}),i.b.Planets.coloring&&p.addEvents("rechts","id",{click:i.b.Planets.click,mouseover:i.b.Planets.hover,mouseout:i.b.Planets.hover}),p.addEvents("countColonies","id",{click:i.b.Planets.clickArrow}),i.b.Planets.Display(!0)),e=e=null},Display:function(e){var t,a,n,o,r;(t=document.getElementById("planetList"))&&((e||0<i.b.Planets.updateDisplayStatus)&&(i.b.Planets.updateDisplayStatus--,i.b.Planets.iterate(3,function(e,s){(n=i.b.Fleet.Get("Cooldown",s,2))&&(0<=(n=i.b.Ogame.getJumpgateCooldown(s)-(i.b.Time.timestamp()-Math.max(n,1e4)))?(i.b.Planets.updateDisplayStatus=5,o="ago_planets_cooldown"+(60>=n?" ago_planets_cooldown_seconds":""),r=60<n?Math.ceil(n/60):Math.floor(n)||"",(a=t.querySelector("#planet-"+e.planet+" .ago_planets_cooldown"))?(p.updateText(a,null,r),p.updateClass(a,null,o)):(a=t.querySelector("#planet-"+e.planet+" .moonlink"))&&p.appendSPAN(a,o,r)):i.b.Fleet.Get("Cooldown",s,0,2))})),i.b.Planets.coloring&&i.b.Planets.Task.coords&&i.b.Planets.Task.coordstype!==i.b.Planets.Task.coords+":"+i.b.Planets.Task.type&&p.iterateChildren(t,function(e){var t,a;(t=g.check(m.parseIntAbs(e.id)))&&i.b.Planets.Data[t]&&i.b.Planets.Data[t].coords===i.b.Planets.Task.coords&&(3!==i.b.Planets.Task.type||i.b.Planets.Data[t].moon||(i.b.Planets.Task.type=1),a=i.b.Token.getClassSelected(i.b.Planets.Task.type)),p.setClassGroup(e,null,"ago_selected",a)})),t=a=null},Get:function(e,t,a){return t=(e=i.b.Planets.GetId(e))&&i.b.Planets.Data[e]&&t?i.b.Planets.Data[e][t]:"",6===a?g.check(t):+t||0},GetByCoords:function(e,t,a){return i.b.Planets.Get(i.b.Planets.ByCoords[e],t,a)},GetByIndex:function(e,t,a){return i.b.Planets.Get(i.b.Planets.ByIndex[e],t,a)},GetId:function(e){return e&&i.b.Planets.Data[e]?e:"active"===e?i.b.Acc.planetId:"selected"===e?i.b.Planets.selectedPlanet:i.b.Planets.ByCoordstype[e]||""},getHome:function(){var e;return i.b.Planets.iterate(1,function(t,a){(!e||+a<e)&&(e=+a)}),e},owncoords:function(e,t){return i.b.Planets.ByCoords[e]?e===i.b.Acc.coords?t===i.b.Acc.type?4:i.b.Planets.ByCoordstype[e+":"+t]?3:1:i.b.Planets.ByCoordstype[e+":"+t]?2:1:0},click:function(e){var t;e&&e.target&&(e="A"===e.target.nodeName?e.target:"A"===e.target.parentNode.nodeName?e.target.parentNode:null)&&(t=-1<(e.className||"").indexOf("moon")?3:1,p.removeClassGroup(e.parentNode,null,"ago_highlight"),p.extendClass(e.parentNode,null,i.b.Token.getClassHighlight(t,"active")))},clickArrow:function(e){e&&e.target&&(e=p.hasClass(e.target,null,"ago_planets_arrow_moon")?3:p.hasClass(e.target,null,"ago_planets_arrow_planet")?1:0)&&i.b.Planets.Action({scroll:"down",type:e})},hover:function(e){var t;e&&e.target&&(t="A"===e.target.nodeName?e.target:"A"===e.target.parentNode.nodeName?e.target.parentNode:null)&&(e="mouseover"===e.type&&-1<(t.className||"").indexOf("moon")?"ago_hover_S3":"ago_hover_S1",p.setClassGroup(t.parentNode,null,"ago_hover",e))},Action:function(e){var t,a;if(u.is(e)){if(i.b.Planets.switchTimeout&&clearTimeout(i.b.Planets.switchTimeout),t=a=i.b.Planets.selectedPlanet?i.b.Planets.Get("selected","index"):i.b.Planets.Get("active","index"),i.b.Planets.selectedPlanet&&p.removeClassGroup(p.queryAll("#planetList .smallplanet")[t-1],null,"ago_hovered"),e.scroll){e.type=e.type||i.b.Planets.selectedType||i.b.Acc.type,e.mode="set";do{"down"===e.scroll?++t>=i.b.Planets.ByIndex.length&&(t=1):1>--t&&(t=i.b.Planets.ByIndex.length-1);var n=void 0;if(1===e.type)break;if(n=i.b.Planets.ByIndex[t],i.b.Planets.Data[n].moon)break}while(t!==a)}if("set"===e.mode){var o,r=0;o=document.querySelectorAll("#planetList .smallplanet a.planetlink")[t-1],e.wait&&o&&(r=750,i.b.Planets.selectedPlanet=1===e.type?i.b.Planets.ByIndex[t]:i.b.Planets.GetByIndex(t,"moon",6),i.b.Planets.selectedType=e.type,p.addClass(o.parentNode,null,"ago_hovered_S"+e.type)),o&&(i.b.Planets.switchTimeout=setTimeout(function(){p.click(1===e.type?"a.planetlink":"a.moonlink",o.parentNode)},r))}else"select"===e.mode&&i.b.Planets.coloring&&(i.b.Planets.Task.coords=e.coords,i.b.Planets.Task.type=e.type,i.b.Planets.Display())}},iterate:function(e,t){var a,n;for(n=1;n<i.b.Planets.ByIndex.length;n++)a=i.b.Planets.ByIndex[n],i.b.Planets.Data[a]&&(e&&1!==e||t(i.b.Planets.Data[a],a),!(a=i.b.Planets.Data[a].moon)||e&&3!==e||t(i.b.Planets.Data[a],a))}},i.b.Panel={displayStatus:0,mouseStatus:!1,mouseCount:0,Data:{},Messages:function(e,t){"Display"===e?i.b.Panel.Display(t):"updateTab"===e?i.b.Panel.updateTab(t):"Action"===e?i.b.Panel.Action(t):"hover"===e&&i.b.Panel.hoverExtern(t)},Timer:function(){},Init:function(e,t){i.b.Panel.Data=u.is(e)?e:{},t&&(i.b.Panel.Display(),window.setTimeout(function(){var e;e=i.b.Background.Get("Panel_Target",6).split("|"),i.b.Background.Set("Panel_Target",""),i.b.Option.is("I81")&&(e[0]||e[1])&&i.b.Init.Messages("Token","Action",{action:"set",tab:"Target",token:81,coords:e[0],time:e[1],marked:1})},200))},Run:function(){i.b.Option.is("I00")&&(i.b.Panel.enabled=!0,i.b.Panel.place=Math.ceil(Math.max((+document.body.clientWidth||0)-1e3,2)/2),i.b.Option.is("I03")?(i.b.Panel.width=Math.min(i.b.Option.get("I03",2),i.b.Panel.place+190),i.b.Panel.space=m.minMax(Math.ceil((i.b.Panel.place-i.b.Panel.width)/2),3,40)):(i.b.Panel.space=m.minMax(Math.ceil((i.b.Panel.place-220)/3),3,40),i.b.Panel.width=m.minMax(i.b.Panel.place-4-2*i.b.Panel.space,190,290)),i.b.Panel.innerWidth=i.b.Panel.width-8,i.b.Panel.left=-(i.b.Panel.width+i.b.Panel.space+4),i.b.Panel.slideLeft=-(i.b.Panel.place-1),i.b.Panel.height=m.minMax(i.b.Option.get("I04",2)||(+window.innerHeight||0)-(i.b.Option.is("commander")?55:90),400,1200),i.b.Option.is("T00")||i.b.Panel.set("Tools","label",""),i.b.Panel.Show()),i.b.Box.Run()},onSwipe:function(e){"left"===e&&window.setTimeout(function(){i.b.Panel.panelInactive(!0)},333),"right"===e&&i.b.Panel.panelActive(3)},Show:function(){var e,t,a,n,o,r;(e=document.getElementById("box"))&&(t=document.createDocumentFragment(),a=(i.b.Panel.left<i.b.Panel.slideLeft?"ago_panel_slide ":"")+(u.get(i.b.Styles.classVisible,i.b.Option.get("I02",2))||""),a=p.appendDIV(t,{class:a,id:"ago_panel_button"}),p.appendSPAN(a,"ago_panel_arrow"),r=p.appendDIV(t,{id:"ago_panel"},{left:i.b.Panel.left+"px"}),n=p.appendDIV(r,{class:"ago_panel_wrapper"},{width:i.b.Panel.width+"px",minHeight:i.b.Panel.height+"px"}),p.appendSPAN(n,"ago_panel_arrow"),u.iterate(i.b.Panel.Data,function(e){i.b.Panel.Get(e,"label",6)&&(o=p.appendDIV(n,{id:"ago_panel_"+e}),(r=p.appendDIV(o,{class:"ago_panel_tab","ago-data":JSON.stringify({update:{tab:e,status:"toggle"}})})).textContent=i.b.Label.get(i.b.Panel.Get(e,"label",6)),p.appendSPAN(r,"ago_panel_tab_info"),p.appendDIV(o,"ago_panel_tab_header"),p.appendDIV(o,"ago_panel_tab_content"),p.appendDIV(o,"ago_panel_tab_footer"),i.b.Panel.Get(e,"status"))&&("Settings"===e?i.b.Panel.createSettings(o,e,""):i.b.Panel["create"+e](o,e,i.b.Panel.Get(e,"data",6),i.b.Panel.Data.Cache),p.updateClass(o,null,"ago_panel_tab_open"))}),p.appendSPAN(n,"ago_panel_arrow"),e.appendChild(t),i.b.Panel.updateTab(),p.addEventsAll("#ago_panel_button, #ago_panel .ago_panel_wrapper",null,{click:i.b.Panel.click,mouseover:i.b.Panel.hover,mouseout:i.b.Panel.hover})),e=t=a=n=o=r=null},set:function(e,t,a,n){e&&t&&i.b.Panel.Data[e]&&(i.b.Panel.Data[e][t]=a,n||y.message("Panel","Set",{tab:e,key:t,value:a}))},Get:function(e,t,a){return e=e&&i.b.Panel.Data[e]&&t?i.b.Panel.Data[e][t]:"",6===a?g.check(e):+e||0},getActive:function(e,t,a){var n;return n=e&&i.b.Panel.Data[e]?u.get(i.b.Panel.Data[e].active,t):"",6===a?g.check(n):+n||0},Display:function(e){var t,a;5<i.b.Init.status&&!i.b.Panel.updateDisplayLock&&(i.b.Panel.updateDisplayLock=!0,t=u.parse(e),i.b.Panel.enabled&&!t.tab&&u.iterate(i.b.Panel.Data,function(e){i.b.Panel.Get(e,"label",6)&&"Settings"!==e&&i.b.Panel.Get(e,"status")&&(t.tab=e)}),t.tab&&i.b.Panel.Data[t.tab]&&("Settings"!==t.tab&&("data"in t?i.b.Panel.set(t.tab,"data",t.data):t.data=i.b.Panel.Get(t.tab,"data",6)),a=document.getElementById("ago_panel_"+t.tab),i.b.Panel.enabled&&p.getChildren(a,2)&&(t.status="status"in t?"toggle"!==t.status?t.status:i.b.Panel.Get(t.tab,"status")?0:1:1,i.b.Panel.set(t.tab,"status",t.status),u.iterate(i.b.Panel.Data,function(e){var a;i.b.Panel.Get(e,"label",6)&&((a=i.b.Panel.Get(e,"status"))&&"Settings"!==e&&"Settings"!==t.tab&&e!==t.tab&&(a=0,i.b.Panel.set(e,"status",a)),p.updateClass("ago_panel_"+e,"id",a?"ago_panel_tab_open":""))}),"Settings"!==t.tab&&i.b.Panel["create"+t.tab](a,t.tab,t.data),e&&i.b.Panel.panelActive(2)),i.b.Panel.Get("Settings","status")&&i.b.Panel.createSettings(document.getElementById("ago_panel_Settings"),t.tab,t.data)),window.setTimeout(function(){i.b.Panel.updateDisplayLock=!1},50))},updateTab:function(e){var t;i.b.Init.status&&((e=u.get(e,"tab"))&&"Flights"!==e||(e=i.b.Fleet.Get("Current","fleets"),(t=i.b.Fleet.Get("Current","fleetsSlots"))&&p.updateText("#ago_panel_Flights .ago_panel_tab_info",null,e+"/"+t)))},createSettings:function(e,t,a,n){function o(e,t,a,n,o,l,c,d){var u;u=i.b.Option.get(e,2),t=i.b.Label.get(t||e),a=p.appendTR(r,o?"ago_panel_content_disabled":"",{setting:{id:e},update:a,message:n}),p.appendTD(a,t.length>s/7?{class:"tooltip",title:t}:null,(l?"   ":"• ")+t),t=p.appendTD(a),t=p.append(t,"input",{type:c||"checkbox"},null,{change:i.b.Panel.changeSetting}),"radio"===c?(t.name="ago_panel_settings_"+e,t.checked=u===d,t.value=d):"text"===c?t.value=u||"":t.checked=Boolean(u)}var r,s;if(s=i.b.Panel.innerWidth-25,a=document.createDocumentFragment(),r=p.appendTABLE(a,"ago_panel_settings",{width:i.b.Panel.innerWidth+"px"},[s,25]),n)switch(t){case"Account":o("I21","I21",{tab:t,data:""},"","","","radio",1),o("I21","I41",{tab:t,data:""},"","","","radio",2),o("I22","",{tab:t},"",2===i.b.Option.get("I21",2));break;case"Flights":o("I41","I21",{tab:t,data:""},"","","","radio",1),o("I41","I41",{tab:t,data:""},"","","","radio",2),o("I42","I22",{tab:t},"",2===i.b.Option.get("I41",2));break;case"Construction":o("I31","",{tab:t}),o("I32","I22",{tab:t}),o("I35","",{tab:t});break;case"Target":o("I82","",{tab:t},{page:"Main",role:"Display"}),o("I83","",{tab:t},{page:"Main",role:"Display"});break;case"Tools":o("T01","",{tab:t}),o("","T05")}else switch(i.b.App.page){case"resources":case"station":case"research":o("B11","",{tab:"Settings"},{page:"Page",role:"Display"}),o("B12","",{tab:"Settings"},{page:"Page",role:"Display"},!i.b.Option.is("B11"),"indent");break;case"shipyard":case"defense":o("B11","",{tab:"Settings"},{page:"Page",role:"Display"});break;case"fleet2":o("F16");break;case"fleet3":o("F18");break;case"movement":o("E14");break;case"messages":o("M51","","",{page:"Page",role:"toggleSpiohelper"}),o("M53"),function(e,t,a,n,o){var l,c,d;d=i.b.Option.get(e,2),t&&(t=i.b.Label.get(t),l=p.appendTR(r),c=t.length>s/7?{class:"tooltip",title:t}:null,c=p.appendTD(l,c),p.innerHTML(c,null,"&bull;&thinsp;"+t),p.appendTD(l)),l=p.appendTR(r,"ago_panel_settings_select",{setting:{id:e},update:a,message:n}),e=p.appendTD(l,{colspan:2}),p.appendSELECT(e,"dropdownInitialized",o,g.zero(d),{change:i.b.Panel.changeSetting})}("M30","M30","",{page:"Page",role:"changeStatus"},{0:" - ",1:"M31",2:"M32",3:"M33",4:"M34",5:"M35"})}p.replaceChildren(p.getChildren(e,1),a),a=r=null},changeSetting:function(e){var t;e&&e.currentTarget&&(t=p.getData(e.currentTarget,null,2),u.is(t.setting)&&(e="checkbox"!==e.currentTarget.type?+e.currentTarget.value||0:e.currentTarget.checked?1:0,i.b.Option.set(t.setting.id,e,2),u.is(t.update)&&i.b.Panel.Display(t.update),u.is(t.message)&&("data"in t.message||(t.message.data=e),i.b.Init.Messages(t.message.page,t.message.role,t.message.data))))},createAccount:function(e,t,a){var n,o;a&&i.b.Option.set("I21",0,2),2===i.b.Option.get("I21",2)?n="account":(n=i.b.Planets.GetId(a)||i.b.Planets.GetId("active"),i.b.Option.is("I22")&&(o=i.b.Planets.Get(n,"moon",6)||i.b.Planets.Get(n,"planet",6))),y.message("Panel","ListAccount",{planet:n,moon:o},function(n){var o,r,s,l,c,d,u,b,m,g;n&&n.tab&&(a&&i.b.Option.set("I21",0,2),i.b.Panel.createSettings(e,t,a,"intern"),g="account"===(m=2===i.b.Option.get("I21",2)?"account":i.b.Planets.GetId(a)||i.b.Planets.GetId("active"))?"account":i.b.Planets.Get(m,i.b.Option.is("I22")?"coords":"coordstype",6),o=document.createDocumentFragment(),r=p.appendTABLE(o,"ago_panel_overview",{width:i.b.Panel.innerWidth+"px"},[58,i.b.Panel.innerWidth-96,38]),i.b.Planets.iterate(1,function(e,a){b=e.moon,u=a===m?"ago_color_planet":b===m?"ago_color_moon":"",s=p.appendTR(r,u,{tab:t,data:e.coordstype}),u=9<=e.coords.length?"ago_panel_overview_coords_small":"ago_panel_overview_coords",p.appendTD(s,u,e.coords),p.appendTD(s,"ago_panel_overview_name",e.name),l=p.appendTD(s,"ago_panel_overview_status"),p.appendSPAN(l).style.backgroundColor=n.statusColor[a]||"#6A0A0A",b&&(p.setData(l,null,{tab:t,data:i.b.Planets.Data[b].coordstype}),p.appendSPAN(l).style.backgroundColor=n.statusColor[b]||"#6A0A0A",p.appendIMG(l,i.b.Planets.Data[b].img))}),d=(c=i.b.Events.calculate("ownership"))[g]?c[g].own:null,c=c[g]?c[g].neutral:null,d&&i.b.Option.is("I24")&&(i.b.Task.addResources(n.Units,d),i.b.Task.addShips(n.Units,d)),c&&i.b.Option.is("I26")&&i.b.Task.addResources(n.Units,c),i.b.Panel.appendUnits(o,n.Units,"I27",!0,t,3,2),i.b.Panel.appendUnits(o,d,"I24","I24",t,2,1,"ago_color_own"),i.b.Panel.appendUnits(o,c,"I26","I26",t,1,0,"ago_color_neutral"),p.replaceChildren(p.getChildren(e,2),o),o=r=s=l=null)})},appendUnits:function(e,t,a,n,o,r,s,l){function c(e,t,a,n,o){return e=p.appendLI(u,t,a,10),0<o?p.appendSPAN(e,"ago_panel_content_value",n,3):(a=0>o?"I0E":"I0A",p.appendSPAN(e,{class:"tooltip ago_panel_content_value ago_panel_content_unavailable",title:i.b.Label.get("I0B")},a,10)),e}function d(e,t,a,n){for(var o in a)(t[o]||n)&&(a=p.appendLI(e,"",o,11),p.appendSPAN(a,"ago_panel_content_value",t[o],2))}var u,b,m,g;t&&(g="string"==typeof n?i.b.Option.is(n):n,(u=document.createElement("ul")).className="ago_panel_content",m=g?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",m=l?m+" "+l:m,r&&(2<=r||t.resources||t.timeShip)&&(b=c(u,m,a,t.resources,t.timeResource),"string"==typeof n&&(p.setData(b,null,{setting:{id:n},update:{tab:o}}),p.append(b,"input",{type:"checkbox"},{display:"none"},{change:i.b.Panel.changeSetting},{checked:Boolean(g)})),g&&t.timeResource&&(3<=r||t.resources)&&d(u,t,i.b.Item.Resource,3<=r)),s&&g&&((2<=s||t.shipsCivil)&&(b=c(u,m,"I28",t.shipsCivil,t.timeShip),t.shipsCivil&&d(u,t,i.b.Item.ShipCivil)),(2<=s||t.shipsCombat)&&(b=c(u,m,"I29",t.shipsCombat,t.timeShip),t.shipsCombat&&d(u,t,i.b.Item.ShipCombat))),b&&e.appendChild(u)),u=b=null},createFlights:function(e,t,a){function n(e,t,a){p.appendSPAN(e,u.get(i.b.Styles.classFleet,a),t&&t.fleets?t.fleets:"  ")}var o,r,s,l,c,b,m,g,f,y;a&&i.b.Option.set("I41",0,2),i.b.Panel.createSettings(e,t,a,"intern"),o=document.createDocumentFragment(),r=p.appendTABLE(o,"ago_panel_overview",{width:i.b.Panel.innerWidth+"px"},[58,i.b.Panel.innerWidth-130,72]),(b=i.b.Events.calculate("flights")).account?(y=2!==i.b.Option.get("I41",2)&&i.b.Option.is("I42"),a=b[a]?a:"",f=2===i.b.Option.get("I41",2)?"account":i.b.Planets.Get(a||"active","coordstype",6)||a,g="account"===f?"account":y?i.b.Task.cutCoords(f):f,i.b.Planets.iterate(0,function(e){(c=b[e.coordstype])&&(m=g===e.coords||f===e.coordstype?d.classType(e.type):"",s=p.appendTR(r,m,{tab:t,data:e.coordstype}),m=9<=e.coords.length?"ago_panel_overview_coords_small":"ago_panel_overview_coords",l=p.appendTD(s,m,e.coords),m=f===e.coordstype?"ago_panel_overview_name":"ago_panel_overview_name ago_color_normal",l=p.appendTD(s,m),3===e.type&&p.appendIMG(l,e.img,"11px"),p.appendTEXT(l,e.name),n(l=p.appendTD(s,"ago_panel_fleets"),c.hostile,1),n(l,c.neutral,2),n(l,c.back,4),n(l,c.own,3))}),g&&b[g]&&(("account"===g||y)&&(s=p.append(o,"ul","ago_panel_content"),l=p.appendLI(s,"ago_panel_content_header","I47",10),n(a=p.appendSPAN(l,"ago_panel_content_value ago_panel_fleets"),b[g].hostile,1),n(a,b[g].neutral,2),n(a,b[g].back,4),n(a,b[g].own,3),n(a,b[g].friend,5),n(a,b[g].enemy,6)),i.b.Panel.appendUnits(o,b[g].own,"I24",!0,t,2,1,"ago_color_own"),i.b.Panel.appendUnits(o,b[g].back,"I25",!0,t,2,1,"ago_color_reverse"),i.b.Panel.appendUnits(o,b[g].neutral,"I26",!0,t,1,1,"ago_color_neutral"),i.b.Panel.appendUnits(o,b[g].hostile,"I26",!0,t,0,1,"ago_color_hostile"))):(s=p.appendTR(r),(l=p.appendTD(s,{colspan:3})).style.textAlign="right",p.appendSPAN(l,{class:"tooltip ago_panel_content_unavailable",title:i.b.Label.get("I0D")},"I0C",10)),p.replaceChildren(p.getChildren(e,2),o),o=r=s=l=a=null},createConstruction:function(e,t,a,n){function o(e){var t;return t=Math.max(e.level+e.increase,200>e.id?0:1),(e=b.status(e.increase,-1*e.range,0,e.range))?t+"-"+(t+e):t||"0"}function r(e,t,a,n,o,r,s,c){var d,u,b;for(u in b={metal:0,crystal:0,deuterium:0,resources:0},i.b.Item.Resource)(0<m[u]||!m.resources)&&(b[u]=t&&+t[u]||0,b.resources+=b[u]);if((o||b.resources)&&(o="string"==typeof n?i.b.Option.is(n):n,a&&(d=o?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",a=p.appendLI(e,c?d+" "+c:d,a,10),c=t&&t.timeResource?p.appendSPAN(a,"ago_panel_content_value",b.resources,3):p.appendSPAN(a,{class:"tooltip ago_panel_content_value ago_panel_content_unavailable",title:i.b.Label.get("I0B")},"I0A",10),"string"==typeof n&&(p.setData(a,null,{setting:{id:n},update:{tab:"Construction"}}),p.append(c,"input",{type:"checkbox"},{display:"none"},{change:i.b.Panel.changeSetting},{checked:Boolean(o)}))),b&&b.resources&&o&&t.timeResource))for(u in i.b.Item.Resource)b[u]&&(o&&r&&(l[u]=Math.max(l[u]-(b[u]||0),0)),d=o?"":"ago_panel_content_disabled",a=p.appendLI(e,d,u,11),d=s?0<l[u]?"ago_panel_content_value ago_color_palered":"ago_panel_content_value ago_color_lightgreen":"ago_panel_content_value",p.appendSPAN(a,d,b[u],2))}var s,l,c,m,f,h,v,_,T;i.b.Panel.createSettings(e,t,"","intern"),m={metal:0,crystal:0,deuterium:0,resources:0,count:0},i.b.Task.updateCoordsType(m,a),f=u.create(m),(c=u.create(m)).routine=2,_=i.b.Option.is("I31"),T=i.b.Option.is("I35"),h=m.coordstype,v=i.b.Option.is("I32")?m.coords:h,n={active:i.b.Acc.planetId},T?n.planet="account":(n.planet=i.b.Planets.GetId(h),i.b.Option.is("I32")&&(n.moon=i.b.Planets.Get(n.planet,"moon",6)||i.b.Planets.Get(n.planet,"planet",6))),y.message("Construction","List",n,function(n){var b,y,A,C,P,I,S,k,x,w,O,D,M;M=(n=n||{}).list||{},b=document.createDocumentFragment(),y=p.appendTABLE(b,"ago_panel_overview",{width:i.b.Panel.innerWidth+"px"},[58,i.b.Panel.innerWidth-96,38]),i.b.Planets.iterate(0,function(e){if(O=e.coordstype,u.is(M[O]))for(D=0;D<M[O].length;D++)x="",(S=M[O][D])&&(v!==e.coords&&h!==e.coordstype||(a===e.coordstype+":"+D&&(S.selected=1,u.copy({id:S.id,level:S.level,increase:S.increase,range:S.range,reserved:S.reserved},m)),u.iterate(i.b.Item.Resource,function(e){S[e]&&(S.reserved?(f[e]+=S[e],S.selected&&!_&&(m[e]=S[e])):(S.selected||_)&&(m[e]+=S[e]))}),x=S.reserved?"ago_color_reserved":"",(S.selected||_)&&(m.count++,x=x||d.classType(e.type))),A=p.appendTR(y,x,{tab:t,data:e.coordstype+":"+D}),C=p.appendTD(A,"ago_panel_overview_coords",e.coords),x=S.selected?"ago_panel_overview_name":"ago_panel_overview_name ago_color_normal",C=p.appendTD(A,x),3===e.type&&p.appendIMG(C,d.urlTypeIcon(3),"11px"),p.appendTEXT(C,S.id,11),x=200>S.id?"ago_panel_overview_count "+d.classStatus(S.increase):"ago_panel_overview_count ago_color_normal",C=p.appendTD(A,x),S.reserved&&(w=0>S.increase?"icon_reserved_red.gif":"icon_reserved.gif",p.appendIMG(C,d.urlImage(w),"11px")),p.appendTEXT(C,o(S)))}),m.count&&(i.b.Task.updateResources(m),i.b.Task.updateResources(f),l=u.create(m),y=p.append(b,"ul","ago_panel_content"),x=m.reserved?"ago_panel_content_action ago_panel_content_reserved":"ago_panel_content_action",A=p.appendLI(y,x),x=0>m.increase?"ago_icon_reserved_red":"ago_icon_reserved",p.appendA(A,x,null,{action:{action:"reserve",tab:t,value:a}}),p.appendA(A,"icon icon_skip_back",null,{action:{action:"decreaseRange",tab:t,value:a}}),p.appendA(A,"icon icon_rewind",null,{action:{action:"decrease",tab:t,value:a}}),x=200>m.id?d.classStatus(m.increase):"ago_color_normal",p.appendSPAN(A,x,o(m)),p.appendA(A,"icon icon_fastforward",null,{action:{action:"increase",tab:t,value:a}}),p.appendA(A,"icon icon_skip",null,{action:{action:"increaseRange",tab:t,value:a}}),p.appendA(A,"icon icon_delete",null,{action:{action:"remove",tab:t,value:a}}),k=1<m.count?"I3B":m.reserved?"I37":"I3A",r(y,m,k,!0,"always"),T&&(y=p.append(b,"ul","ago_panel_content"),p.appendLI(y,"ago_panel_content_action","Account")),I=n.Units||{},r(y,I,"I23","I33","always","reduce","colorize","ago_color_stationed"),s=i.b.Events.calculate("ownership"),(I=s[O=T?"account":v]&&u.is(s[O].own)?s[O].own:{}).timeResource=s.account?1:0,r(y,I,"I24","I34","","reduce","colorize","ago_color_own"),(I=s[O]&&u.is(s[O].neutral)?s[O].neutral:{}).timeResource=s.account?1:0,r(y,I,"I26","I36","","reduce","colorize","ago_color_neutral"),r(y,f,"I37","I37","","reduce","colorize","ago_color_reserved"),h===i.b.Acc.coordstype||T||(y=p.append(b,"ul","ago_panel_content"),I=n.Active||{},i.b.Option.is("I38")&&(c.mode=!0,u.iterate(i.b.Item.Resource,function(e){c[e]=Math.max(Math.min(l[e],I[e]),0),c.resources+=c[e]})),r(y,I,"I38","I38","always","reduce","colorize"),x=c.mode?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",A=p.appendLI(y,x),w=i.b.Uni.path+"fleet1",u.iterateFilter(c,function(e){w+=g.addParameter(e,c[e])},"galaxy system position type metal crystal deuterium routine".split(" ")),P=p.appendA(A,{class:"btn_blue",href:w},null,null,!c.mode),p.appendTEXT(P,"F60",10),p.appendSPAN(A,"ago_panel_content_value",c.resources,2),r(y,c,"",c.mode,"always","","colorize")),_&&m.resources||!m.reserved)&&(r(y=p.append(b,"ul","ago_panel_content"),l,"I39",!0,"always","","colorize"),i.b.Task.updateResources(l),l.resources&&(p.appendLI(y),I={202:0,203:0,209:0,214:0},u.iterate(I,function(e){(S={action:10})[e]=Math.ceil(l.resources/i.b.Ogame.getShipCapacity(e)),A=p.appendLI(y,{"ago-data":JSON.stringify({message:{page:["Fleet1"],role:"Action",data:S}})},e,11),P=p.appendSPAN(A,"ago_panel_content_value",S[e],2)}))),p.replaceChildren(p.getChildren(e,2),b),b=y=A=C=P=null})},createAlliance:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=i.b.Panel.getActive("Alliance","id",6),a=document.createDocumentFragment(),n=i.b.Panel.appendTable(a),i.b.Panel.appendToken(n,"Alliance",t.token,t.listTab),n=i.b.Panel.appendTable(a),i.b.Panel.appendAlliance(n,"Alliance",t.token,o,t.listToken),p.replaceChildren(p.getChildren(e,2),a))}u.get(n,"tab")===t?o(n):y.message("Token","List",{tab:t,token:+a||0},o)},createPlayer:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=i.b.Panel.getActive("Player","id",6),a=document.createDocumentFragment(),n=i.b.Panel.appendTable(a),i.b.Panel.appendToken(n,t.tab,t.token,t.listTab),n=i.b.Panel.appendTable(a),i.b.Panel.appendPlayer(n,t.token,o,t.listToken),p.replaceChildren(p.getChildren(e,2),a))}"Player"===u.get(n,"tab")?o(n):y.message("Token","List",{tab:"Player",token:i.b.Panel.Get("Player","data")},o)},createTarget:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=i.b.Panel.getActive("Target","id",6),a=document.createDocumentFragment(),n=i.b.Panel.appendTable(a),i.b.Panel.appendToken(n,"Target",t.token,t.listTab),n=i.b.Panel.appendTable(a),i.b.Panel.appendTarget(n,t.token,o,t.listToken),p.replaceChildren(p.getChildren(e,2),a))}var r,s,l;i.b.Panel.createSettings(e,t,"","intern"),(r=p.getChildren(e,3))&&0===p.hasChildren(r)&&(s=p.appendTABLE(null,"ago_panel_settings",{width:i.b.Panel.innerWidth+"px"}),l=p.appendTR(s),l=p.appendTD(l),p.append(l,"textarea",{id:"ago_panel_textparser",class:"markItUpEditor"},null,{dblclick:i.b.Panel.parseTarget,blur:i.b.Panel.parseTarget}),r.appendChild(s)),u.get(n,"tab")===t?o(n):y.message("Token","List",{tab:t,token:+a||0,sort:i.b.Option.get("I84")},o)},appendToken:function(e,t,a,n){var o;u.iterate(n,function(r){var s,l;80<r&&!o&&(o=!0,s=p.appendTR(e,{colspan:3}),p.append(s,"TD",null,{height:"10px",lineHeight:"10px"})),0<n[r]&&(l=+r===a?d.classType(1):"",s={tab:t,data:r},s=p.appendTR(e,l,s),p.appendTD(s,"ago_panel_overview_coords"),p.appendTD(s,"ago_panel_overview_name "+i.b.Token.getClass(r),i.b.Token.getLabel(r)),p.appendTD(s,"ago_panel_overview_count",Math.max(n[r],0)))}),2>p.hasChildren(e)&&p.setStyleDisplay(e)},appendAlliance:function(e,t,a,n,o){var r;r=p.appendTR(e),p.appendTD(r,"ago_panel_overview_coords"),p.appendTD(r,"ago_panel_overview_name","∇"),r=p.appendTD(r,"ago_panel_overview_count"),p.appendA(r,"icon icon_delete","",{action:{action:"icon",tab:"Alliance",icon:"remove"}}),u.iterateArray(o,function(o){var r,s;u.is(o)&&(s=n===o.id?d.classType(1):"",r={action:{action:"toggle",tab:t,token:a,id:o.id}},r=p.appendTR(e,s,r),p.appendTD(r,"ago_panel_overview_coords"),p.appendTD(r,"ago_panel_overview_name",o.name||o.id),s=p.appendTD(r,"ago_panel_overview_count"),"remove"===i.b.Panel.Get("Alliance","icon",6)&&(r={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Alliance",token:a,id:o.id}}},p.appendA(s,"icon icon_delete","",r)))}),2>p.hasChildren(e)&&p.setStyleDisplay(e)},appendPlayer:function(e,t,a,n){var o;o=p.appendTR(e),p.appendTD(o,"ago_panel_overview_coords"),p.appendTD(o,"ago_panel_overview_name","∇"),o=p.appendTD(o,"ago_panel_overview_count"),p.appendA(o,"icon icon_delete","",{action:{action:"icon",tab:"Player",icon:"remove"}}),u.iterateArray(n,function(n){var o,r;u.is(n)&&(r=a===n.id?d.classType(1):"",o={action:{action:"toggle",tab:"Player",token:t,id:n.id}},o=p.appendTR(e,r,o),p.appendTD(o,"ago_panel_overview_coords"),p.appendTD(o,"ago_panel_overview_name",n.name||n.id),r=p.appendTD(o,"ago_panel_overview_count"),"remove"===i.b.Panel.Get("Player","icon",6)&&(o={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Player",token:t,id:n.id}}},p.appendA(r,"icon icon_delete","",o)))}),2>p.hasChildren(e)&&p.setStyleDisplay(e)},appendTable:function(e){return p.appendTABLE(e,"ago_panel_overview",{width:i.b.Panel.innerWidth+"px"},[60,i.b.Panel.innerWidth-85,25])},appendTarget:function(e,t,a,n){var o,r,s,l;l=i.b.Option.get("I84",2),s=i.b.Option.get("I85",2),2===l&&10>s&&(l=1),o=p.appendTR(e),r=p.appendTD(o,"ago_panel_overview_coords",["","∇","∇ "+s][l]),p.setData(r,null,{action:{action:"sort",tab:"Target",value:1===l?2:1}}),r=p.appendTD(o,"ago_panel_overview_name",l?"":"∇"),p.setData(r,null,{action:{action:"sort",tab:"Target",value:0}}),r=p.appendTD(o,"ago_panel_overview_count"),p.appendA(r,"icon icon_delete","",{action:{action:"icon",tab:"Target",icon:"remove"}}),u.iterateArray(n,function(n){var o,r,c;u.is(n)&&(c=g.check(n.coords).split(":"),(2>l||i.b.Acc.galaxy===+c[0]&&m.isMinMax(+c[1],i.b.Acc.system-s,i.b.Acc.system+s))&&(c=+c[3]||1,r=a===n.id?d.classType(c):"",o={tab:"Target",data:t,action:{action:"toggle",tab:"Target",token:t,id:n.id}},o=p.appendTR(e,r,o),p.appendTD(o,"ago_panel_overview_coords",i.b.Task.cutCoords(n.coords)),r=p.appendTD(o,"ago_panel_overview_name"),1<c&&p.appendIMG(r,d.urlTypeIcon(c),"11px"),n.time?p.appendTEXT(r,n.time,17):p.appendTEXT(r,n.name),r=p.appendTD(o,"ago_panel_overview_count"),"remove"===i.b.Panel.Get("Target","icon",6)&&(o={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Target",token:t,id:n.id}}},p.appendA(r,"icon icon_delete","",o))))}),2>p.hasChildren(e)&&p.setStyleDisplay(e)},parseTarget:function(e){e&&e.target&&("dblclick"===e.type?e.target.value="":((e=i.b.Task.parseTarget(e.target.value)).coords||e.time)&&i.b.Token.Action({action:"set",tab:"Target",coords:e.coordstype||e.coords,time:e.time,token:81,marked:1}))},createTools:function(e,t){var a,n,o,r,s,l,c;if(i.b.Option.is("T00")){for(i.b.Panel.createSettings(e,t,"","intern"),a=document.createDocumentFragment(),l=1;9>=l;l++){for((n=document.createElement("ul")).className="ago_panel_links",p.appendLI(n,"ago_panel_links_header","T"+l+"0",10),c=0;c<i.b.Tools.List.length;c++)s="T"+l+i.b.Tools.List[c],i.b.Option.is(s)&&(o=p.appendLI(n),r={message:{page:"Tools",role:"Action",data:{tab:"Player",id:s}}},p.appendA(o,"",null,r).textContent=i.b.Option.getPair(s)[0]||i.b.Label.get(s));1<p.hasChildren(n)&&a.appendChild(n)}p.replaceChildren(p.getChildren(e,2),a)}},Action:function(e){var t,a;"Construction"===(t=u.get(e,"tab"))?y.message("Construction","Action",{action:e.action,value:e.value,coords:i.b.Acc.coordstype},i.b.Panel.Display):b.check(t,"Alliance","Player","Target")&&("sort"===e.action?(i.b.Option.set("I84",e.value,2),i.b.Panel.Display()):"icon"===e.action?(e.icon=i.b.Panel.Get(t,"icon",6)===e.icon?"":e.icon,i.b.Panel.set(t,"icon",e.icon,!0),i.b.Init.Messages("Main","Display"),i.b.Panel.Display()):2===e.marked||e.marked&&!i.b.Option.is("I82")?i.b.Panel.Display({tab:t,data:e.token}):("toggle"===e.action&&(e.action=i.b.Panel.getActive(t,"id",6)===e.id?"deselect":"select","Target"===t&&b.check(i.b.App.page,"fleet1","fleet2")&&(e.action="select")),a=b.check(e.action,"remove","deselect")?"":e.id,y.message("Token","Get",{tab:t,token:e.token,id:a},function(a){var n;i.b.Panel.set(t,"active",a),i.b.Panel.Display({tab:t,data:e.token}),n={arrival:+u.get(a,"time")||0},i.b.Task.updateCoordsType(n,u.get(a,"coords")),u.copy(n,e),"Player"===t?i.b.Init.Messages("Box","Action",{tab:t}):"Target"===t&&(i.b.Init.Messages("Main","Display"),i.b.Init.Messages(["Fleet1","Fleet2","Fleet3"],"Action",n)),i.b.Init.Messages(["Galaxy"],"Action",e)})))},click:function(e){var t;if(e&&e.target){if(t=p.getData(e.target,null,2),i.b.Panel.updateDisplayLock||e.target.hasAttribute("disabled"))return e.stopPropagation(),e.preventDefault(),!1;u.is(t.setting)?"INPUT"!==e.target.nodeName&&p.click("input","LI"===e.target.nodeName?e.target:e.target.parentNode):(u.is(t.message)&&("Tools"===t.message.page&&u.set(t.message.data,"shiftKeys",e.shiftKey||e.ctrlKey),i.b.Init.Messages(t.message.page,t.message.role,t.message.data)),u.is(t.action)?i.b.Panel.Action(t.action):u.is(t.update)?i.b.Panel.Display(t.update):t.tab&&i.b.Panel.Display(t),"ago_panel_button"===e.target.id||"ago_panel_arrow"===e.target.className?2<=(e=p.getAttribute("ago_panel_button","id","ago_display_status",2))?i.b.Panel.panelInactive(!0):i.b.Panel.panelActive(3):i.b.Panel.panelActive(2))}},hover:function(e){var t;e&&e.target&&(t=i.b.Panel.hoverStatus,i.b.Panel.mouseStatus="mouseover"===e.type,i.b.Panel.mouseStatus&&(!i.b.Option.is("I02")&&b.check("ago_panel_button",e.target.id,e.target.parentNode.id)||i.b.Panel.panelActive(1),i.b.Panel.hoverStatus=2>i.b.Panel.displayStatus?1:"ago_panel_button"===e.target.id||"ago_panel_arrow"===e.target.className?1:0),t!==i.b.Panel.hoverStatus&&p.updateAttribute("ago_panel_button","id","ago_hover_status",t,8))},hoverExtern:function(e){i.b.Panel.enabled&&2<=i.b.Panel.displayStatus&&(i.b.Panel.mouseStatus=Boolean(e))},panelActive:function(e){i.b.Panel.displayStatus=i.b.Panel.displayStatus||p.getAttribute("ago_panel_button","id","ago_display_status",2),i.b.Panel.enabled&&i.b.Panel.displayStatus<e&&(0>=i.b.Panel.mouseCount&&window.setTimeout(i.b.Panel.panelInactive,500),i.b.Panel.mouseCount=5,i.b.Panel.displayStatus=e,i.b.Panel.slideLeft=-(Math.ceil(Math.max((+document.body.clientWidth||0)-1e3,2)/2)-1),2<=e&&i.b.Panel.left<i.b.Panel.slideLeft&&p.updateStyle("ago_panel","id","left",i.b.Panel.slideLeft+"px"),p.updateAttribute("ago_panel_button","id","ago_display_status",m.minMax(e,0,2),8))},panelInactive:function(e){i.b.Panel.enabled&&(i.b.Panel.mouseStatus||i.b.Panel.mouseCount--,e||0>=i.b.Panel.mouseCount&&3>i.b.Panel.displayStatus?(i.b.Panel.displayStatus=0,p.updateAttribute("ago_panel_button","id","ago_display_status",0,8),p.updateStyle("ago_panel","id","left",i.b.Panel.left+"px")):3>i.b.Panel.displayStatus&&window.setTimeout(i.b.Panel.panelInactive,500))}},i.b.Box={Data:{},Current:0,Messages:function(e,t){"Action"===e&&i.b.Box.Action(t)},Init:function(e,t){i.b.Box.enabled=!0,i.b.Box.Data=u.is(e)?e:{},t&&i.b.Box.Display()},Run:function(){var e;e=i.b.Panel.Get("Box","data",6),i.b.Box.enabled&&e&&(u.get(i.b.Box.Data.Cache,"tab")?i.b.Box.Show(i.b.Box.Data.Cache):i.b.Box.Display())},Show:function(e){var t,a,n,o,r,s;if(e&&e.playerName&&Array.isArray(e.planets)){for(a=document.createDocumentFragment(),t=0;t<e.planets.length;t++)(o=e.planets[t])&&((r=i.b.Task.splitCoords(o.coords)).tab="Target",r.id=o.coords,r.type=1,r.action="set",s="&galaxy="+r.galaxy+"&system="+r.system+"&position="+r.position,n=o.planetId===e.planetHome?"ago_box_homeplanet":"",n=p.appendDIV(a,n),"galaxy"===i.b.App.page?p.appendA(n,null,null,{message:{page:"Page",role:"Action",data:r}}).textContent=o.coords:p.appendA(n,{href:"index.php?page=galaxy"+s}).textContent=o.coords,b.check(i.b.App.page,"fleet1","fleet2","fleet3")?(p.appendA(n,null,null,{message:{page:"Page",role:"Action",data:r}}).textContent=o.planetName,o.moonId&&(r.type=3,n=p.appendA(n,null,null,{message:{page:"Page",role:"Action",data:r}}),p.appendIMG(n,d.urlTypeIcon(3,"a"),"14px"))):(p.appendA(n,{href:"index.php?page=fleet1"+s+"&type=1"}).textContent=o.planetName,o.moonId&&(n=p.appendA(n,{href:"index.php?page=fleet1"+s+"&type=3"}),p.appendIMG(n,d.urlTypeIcon(3,"a"),"14px"))));o=e.playerName+"|Planets: "+e.planets.length+"<BR>";var l=i.b.Option.get("O71");(t=document.getElementById("ago_box"))?(p.setAttribute("ago_box_title","id","title",o),p.setText("ago_box_title","id",e.playerName),p.replaceChildren(document.getElementById("ago_box_content"),a),p.setStyleDisplay(t,null,"block")):a&&(t=p.appendDIV(null,{class:"ago_box",id:"ago_box"},{fontSize:"9px"}),n=p.appendDIV(t,{id:"ago_box_header"}),p.appendA(n,"ago_box_icon22 galaxy highlighted",null,{task:0===l?"home":"cycle"}),p.appendSPAN(n,{id:"ago_box_title",class:"tooltipHTML",title:o},e.playerName),p.appendA(n,"ago_icon_close",null,{action:{action:"remove"}}),(n=p.appendDIV(t,{id:"ago_box_content"})).appendChild(a),p.appendChild(document.getElementById("toolLinksWrapper"),t),p.addEvents("ago_box","id",{click:i.b.Box.click}))}else p.setStyleDisplay("ago_box","id")},Display:function(){var e,t;e=i.b.Panel.Get("Box","data",6),t=i.b.Panel.getActive(e,"id",6),"Player"===e&&t?y.message("Box","List",{tab:e,id:t,planets:1},i.b.Box.Show):i.b.Box.Show()},click:function(e){if(e&&e.target){if("cycle"===(e=p.getData(e.target,null,2)).task){var t=p.queryAll("#ago_box_content div").length;i.b.Box.Current+1>t&&(i.b.Box.Current=0),p.click("#ago_box_content div:nth-child("+(i.b.Box.Current+1)+") a:first-child")}"home"===e.task&&p.click("#ago_box_content .ago_box_homeplanet a:first-child"),u.is(e.action)&&i.b.Box.Action(e.action),u.is(e.message)&&i.b.Init.Messages(e.message.page,e.message.role,e.message.data)}},Action:function(e){i.b.Box.enabled&&u.is(e)&&("remove"===e.action&&(y.message("Box","List",{tab:e.tab}),e.tab=""),i.b.Panel.set("Box","data",e.tab),i.b.Box.Display())}},i.b.Events={status:0,included:!1,Messages:function(e,t){"highlight"===e&&i.b.Events.displayHighlight(t)},Run:function(){var e,t;i.b.Events.status=1,i.b.Option.is("E30")&&(i.b.Events.enabled=!0,i.b.Events.improve=i.b.Option.is("E31"),i.b.Events.modeAbbreviation=i.b.Option.is("E32"),i.b.Events.modeColorMissions=i.b.Option.is("CM0")),(e=document.getElementById("eventboxContent"))&&(i.b.Events.included=Boolean(document.getElementById("eventListWrap")),i.b.Events.enabled&&(t=!i.b.Events.included&&5>i.b.Events.modeBehavior?" ago_eventlist_hide":"",p.extendClass(e,null,"ago"+t),t=i.b.Events.modeBehavior?b.check(i.b.Events.modeBehavior,2,4,6,8)?3:i.b.Option.is("E34")?2:1:i.b.Events.included?1:0,e.setAttribute("ago_display_status",t),i.b.Events.modeBehavior&&(p.getChildren(e.parentNode,0)===e?i.b.Events.modeBehaviorAbove||e.parentNode.appendChild(e):i.b.Events.modeBehaviorAbove&&p.prependChild(e.parentNode,e),i.b.Styles.set("#eventboxContent:not(:first-child), #eventboxContent:first-child { display: inherit; }"))),i.b.Events.included&&i.b.Events.Content())},Ready:function(){i.b.Events.enabled&&i.b.Events.modeBehavior&&5>i.b.Events.modeBehavior&&(p.setStyleDisplay("eventboxContent","id"),i.b.Styles.set("#eventboxContent, #eventboxContent #eventListWrap { display: block; }"))},Content:function(){var e,t,a,n,o,r,s,l;if(o=1,i.b.Events.eData={},i.b.Events.last=0,e=document.getElementById("eventboxContent"),t=document.getElementById("eventListWrap"),i.b.Events.status&&e&&t&&p.updateAttribute(t,null,"ago-status",1,8)){for(i.b.Events.status=2,i.b.Events.enabled&&(p.removeClass(e,null,"ago_eventlist_hide"),e=t.querySelector("#eventHeader"))&&(n=document.createDocumentFragment(),a=p.appendA(n,null,{click:function(){i.b.Global.message({role:"reloadEvents"})}}),a=p.appendSPAN(a,"icon icon_reload ago_eventlist_reload"),i.b.Events.improve&&(p.appendSPAN(n,"ago_display_arrow"),e.addEventListener("click",i.b.Events.toggleEvents,!1)),p.prependChild(e,n)),e=t.querySelectorAll("table#eventContent > tbody > tr"),a=0;a<e.length;a++)n=m.parseIntAbs(e[a].getAttribute("data-mission-type")),d.hasClass(e[a].className,"allianceAttack")?(r="F"+(s=g.check(m.parseIntAbs(e[a].className))),l=1):d.hasClass(e[a].className,"partnerInfo")?l=(s=g.check(m.parseIntAbs(e[a].className)))===(r=p.getAttribute(".icon_movement span",e[a],"data-federation-user-id",7))?2:3:(l=s=0,r=g.check(m.parseIntAbs(e[a].id))),i.b.Events.eData[r]={id:r,mission:n,arrival:+e[a].getAttribute("data-arrival-time")||0,union:s||"",unionType:l||0,reverse:"true"===e[a].getAttribute("data-return-flight")},i.b.Events.modeColorMissions&&i.b.Events.eData[r].reverse&&(e[a].className+=" ago_events_reverse"),e[a].addEventListener("click",i.b.Events.clickRow,!1),i.b.Events.parseRow(e[a],i.b.Events.eData[r]),1!==l&&(i.b.Task.updateShips(i.b.Events.eData[r]),i.b.Task.updateResources(i.b.Events.eData[r]),3<=i.b.Events.eData[r].fleetType&&1!==l&&4!==n&&(i.b.Events.eData[r].pair=i.b.Events.eData[r].reverse?i.b.Events.eData[r-1]?i.b.Events.eData[r-1].pair:"":(5===n||15===n)&&i.b.Events.eData[r-1]&&i.b.Events.eData[r-1].pair?i.b.Events.eData[r-1].pair:o++),i.b.Events.improve&&(i.b.Events.eData[r].pair&&(e[a].setAttribute("ago-events-pair",i.b.Events.eData[r].pair),e[a].addEventListener("mouseover",i.b.Events.displayPair,!1),e[a].addEventListener("mouseout",i.b.Events.displayPair,!1)),i.b.Events.createDetails(e[a],i.b.Events.eData[r])));for(r in i.b.Events.eData)i.b.Events.eData.hasOwnProperty(r)&&(1===i.b.Events.eData[r].unionType&&(i.b.Task.updateShips(i.b.Events.eData[r]),i.b.Task.updateResources(i.b.Events.eData[r]),i.b.Events.improve&&i.b.Events.createDetails(t.querySelector("table#eventContent tr.union"+i.b.Events.eData[r].union),i.b.Events.eData[r])),2===i.b.Events.eData[r].fleetType&&5===i.b.Events.eData[r].mission&&i.b.Events.eData[r-1]&&(i.b.Events.eData[r].nocalc=!0));e=t=e=a=e=n=null}},parseRow:function(e,t){p.iterateChildren(e,function(e){var a;if(a=e.className,d.hasClass(a,"countDown"))p.addClass(e,null,d.classMission(t.mission)),e.className+=" ago_panel_add",t.fleetType=d.hasClass(a,"neutral")?2:d.hasClass(a,"hostile")?1:t.reverse?4:3;else if(d.hasClass(a,"arrivalTime"))a=(e.textContent||"").split(" ")[0],e.textContent=i.b.Time.convertLocal(a,"[H]:[i]:[s]");else if(d.hasClass(a,"missionFleet"))t.missionName=2<=t.unionType?"":t.unionType?i.b.Label.get("LM02"):p.getAttribute("img",e,"title",7).split("|")[1];else if(d.hasClass(a,"originFleet"))(a=e.querySelector("figure"))&&(t.typeOrigin=d.hasClass(a.className,"moon")?3:d.hasClass(a.className,"tf")?2:1);else if(d.hasClass(a,"coordsOrigin"))(a=e.querySelector("a"))&&(t.coordsOrigin=i.b.Task.trimCoords(a.textContent),t.owncoordsOrigin=i.b.Planets.owncoords(t.coordsOrigin,t.typeOrigin),t.owncoordsOrigin&&(t.reverse||(5===t.mission||15===t.mission)&&i.b.Events.last===+t.id-1||(i.b.Events.last=Math.max(i.b.Events.last,+t.id||0)),p.addClass(a,null,i.b.Token.getClassSelection(t.typeOrigin)),3<=t.owncoordsOrigin&&p.extendClass(e,null,i.b.Token.getClassHighlight(t.typeOrigin))));else if(-1<a.indexOf("icon_movement")){var n;if((a=e.querySelector("span"))&&1!==t.unionType)if(e=a.title)for(e=e.split("<td>"),2<=t.unionType&&i.b.Events.eData["F"+t.union]&&(i.b.Events.eData["F"+t.union].fleets=(i.b.Events.eData["F"+t.union].fleets||0)+1),a=1;a<e.length;a++)n=(e[a].split("</td>",1)[0]||"").replace(/\:/g,"").trim(),(n=i.b.Item.getByName(n))&&(t[n]=m.parseIntAbs(e[a].split(">",3)[2]),t[n]&&2<=t.unionType&&i.b.Events.eData["F"+t.union]&&(i.b.Events.eData["F"+t.union][n]=(i.b.Events.eData["F"+t.union][n]||0)+t[n]))}else d.hasClass(a,"destFleet")?(a=e.querySelector("figure"))&&(t.type=d.hasClass(a.className,"moon")?3:d.hasClass(a.className,"tf")?2:1):d.hasClass(a,"destCoords")?(a=e.querySelector("a"))&&(t.coords=i.b.Task.trimCoords(a.textContent),t.owncoords=i.b.Planets.owncoords(t.coords,t.type),t.owncoords&&(p.addClass(a,null,i.b.Token.getClassSelection(t.type)),3<=t.owncoords&&p.extendClass(e,null,i.b.Token.getClassHighlight(t.type)))):d.hasClass(a,"sendMail")&&(t.nick=p.getAttribute(p.getChildnodeByName(e,"A"),null,"title",7))})},createDetails:function(e,t){var a,n,o;1===t.unionType&&t.fleets&&p.setText(".originFleet",e,t.fleets+" / 16"),2<=t.unionType&&p.setText(".descFleet",e),2===t.unionType&&p.setText(".countDown",e,"E28",10),(a=document.createElement("td")).className="ago_eventlist_activity",3>t.fleetType?p.appendIMG(a,1===t.fleetType?"/cdn/img/galaxy/activity15.gif":"/cdn/img/galaxy/activity.gif","14px"):a.textContent=t.pair||"",p.prependChild(e,a),(a=document.createElement("tr")).className="ago_eventlist",t.pair&&(a.setAttribute("ago-events-pair",t.pair),a.addEventListener("mouseover",i.b.Events.displayPair,!1),a.addEventListener("mouseout",i.b.Events.displayPair,!1)),(n=p.appendTD(a)).setAttribute("colspan",12),o=p.appendDIV(n,"ago_eventlist_left"),t.nick&&!t.owncoordsOrigin&&p.appendSPAN(o,"ago_eventlist_player",t.nick),p.appendSPAN(o,d.classMission(t.mission),t.missionName),function(e,t){function a(e,t,a,n){e=p.appendTD(e),t&&a&&(p.appendSPAN(e,"ago_eventlist_label",t,n),p.appendTEXT(e,a,2))}var n,o,r,s,l,c;for(l in r=i.b.Option.is("E32")?12:11,s={ShipCivil:[],ShipCombat:[],Resource:[]},n=e.appendChild(document.createElement("table")),a(o=p.appendTR(n),"I28",t.shipsCivil||"0",10),a(o,"I29",t.shipsCombat||"0",10),a(o,"I27",t.resources||"0",10),s)if(s.hasOwnProperty(l))for(c in i.b.Item[l])i.b.Item[l].hasOwnProperty(c)&&0<t[c]&&s[l].push(c);for(l=0;9>l&&(s.ShipCivil[l]||s.ShipCombat[l]||s.Resource[l]);l++)a(o=p.appendTR(n),s.ShipCivil[l],t[s.ShipCivil[l]],r),a(o,s.ShipCombat[l],t[s.ShipCombat[l]],r),a(o,s.Resource[l],t[s.Resource[l]],r);n=o=null}(o=p.appendDIV(n,"ago_eventlist_fleet"),t),o=p.appendDIV(n,"ago_eventlist_right"),t.nick&&!t.owncoords&&p.appendSPAN(o,"ago_eventlist_player",t.nick),p.after(e,a),a=n=o=null},toggleEvents:function(e){!e.target||"H4"!==e.target.nodeName&&"ago_display_arrow"!==e.target.className||(e=p.getAttribute("eventboxContent","id","ago_display_status",2)+1,p.setAttribute("eventboxContent","id","ago_display_status",3<e?1:e,8))},clickRow:function(e){var t;e&&e.target&&d.hasClass(e.target.className,"countDown")&&(t=m.parseIntAbs(e.target.id))&&i.b.Events.eData[t]&&((e={action:"set",tab:"Target",marked:1,token:81,time:i.b.Events.eData[t].arrival,name:i.b.Events.eData[t].nick}).coords=i.b.Events.eData[t].reverse?i.b.Events.eData[t].coordsOrigin+":"+i.b.Events.eData[t].typeOrigin:i.b.Events.eData[t].coords+":"+i.b.Events.eData[t].type,i.b.Init.Messages("Token","Action",e))},displayPair:function(e){var t,a;a=this.getAttribute("ago-events-pair"),(t=document.getElementById("eventboxContent"))&&0<a&&("mouseover"===e.type?p.iterate(t.querySelectorAll('.eventFleet[ago-events-pair="'+a+'"], .ago_eventlist[ago-events-pair="'+a+'"]'),function(e){p.addClass(e,null,"ago_eventlist_pair")}):p.iterate(t.querySelectorAll(".eventFleet, .ago_eventlist"),function(e){p.removeClass(e,null,"ago_eventlist_pair")}))},displayHighlight:function(e){i.b.Events.highlightCurrent=e||0},calculate:function(e){function t(e,t,a){return e[t]||(e[t]={}),e[t][a]||(e[t][a]={metal:0,crystal:0,deuterium:0,resources:0,fleets:0,shipment:0,ships:0,shipsCivil:0,shipsCombat:0,reverse:0,timeResource:1,timeShip:1}),e[t][a]}function a(e,t,a,n,o){function r(e,t,a,n,o){a[e]=(a[e]||0)+t,n[e]=(n[e]||0)+t,o[e]=(o[e]||0)+t}var s;if(!o||"resources"===o)for(s in i.b.Item.Resource)e[s]&&(r(s,e[s],t,a,n),r("resources",e[s],t,a,n));if(!o||"ships"===o){for(s in i.b.Item.Ship)e[s]&&(r(s,e[s],t,a,n),r("ships",e[s],t,a,n),s in i.b.Item.ShipCivil&&r("shipsCivil",e[s],t,a,n),s in i.b.Item.ShipCombat&&r("shipsCombat",e[s],t,a,n));r("fleets",1,t,a,n)}}var n,o,r,s,l,c,p;if(n={},2<=i.b.Events.status)for(r in n.account={},i.b.Events.eData)0<+r&&(o=i.b.Events.eData[r],"ownership"===e?o.reverse?(p="own",l=o.coordsOrigin,s=o.coordsOrigin+":"+o.typeOrigin,c=o.typeOrigin,a(o,t(n,"account",p),t(n,l,p),t(n,s,p),"ships"),3===o.mission&&o.pair&&(l=o.coords,s=o.coords+":"+o.type,c=o.type),a(o,t(n,"account",p),t(n,l,p),t(n,s,p),"resources")):(l=o.coords,s=o.coords+":"+o.type,c=o.type,(p=2===o.fleetType&&3===o.mission?"neutral":3<=o.fleetType&&4===o.mission?"own":"")&&a(o,t(n,"account",p),t(n,l,p),t(n,s,p))):(o.reverse?(l=o.coordsOrigin,s=o.coordsOrigin+":"+o.typeOrigin,c=o.typeOrigin,p=o.pair?"":"back"):(l=o.coords,s=o.coords+":"+o.type,c=o.type,p=o.nocalc||!o.fleetType?"":1===o.fleetType?"hostile":2===o.fleetType?"neutral":o.owncoords?"own":""),p&&a(o,t(n,"account",p),t(n,l,p),t(n,s,p))),p&&(n[s][p].coords=l,n[s][p].coordstype=s,n[s][p].type=c));return n}},i.b.Chat={chatBar:0,Data:{buddies_expanded:1,ally_expanded:1,strangers_expanded:1},Run:function(){i.b.Option.is("O60")&&(i.b.Chat.popupsDeactivated=i.b.Option.is("O61"))&&i.b.Chat.removePopups(),p.addObserver(p.query("body"),{childList:!0},function(e){for(var t=0;t<e.length;t++){var a=e[t];a.addedNodes.length&&"id"in a.addedNodes[0]&&"chatBar"===a.addedNodes[0].id&&i.b.Chat.Content()}})},Content:function(){i.b.Chat.chatBar=document.getElementById("chatBar"),i.b.Chat.popupsDeactivated&&i.b.Chat.removePopups(),p.appendSCRIPT("window.setTimeout(function () {$('.js_playerlist').off('click','.playerlist_item');}, 1000);"),p.addObserver(i.b.Chat.chatBar,{childList:!0,subtree:!0},function(e){for(var t=0;t<e.length;t++){var a=e[t];a.addedNodes.length&&"id"in a.addedNodes[0]&&"mCSB_3"===a.addedNodes[0].id&&i.b.Chat.Ready()}})},Ready:function(){i.b.Chat.Load(),i.b.Chat.popupsDeactivated&&i.b.Chat.createLinks(),document.querySelector(".ui-dialog")||(i.b.Chat.Data.buddies_expanded||p.queryAll(".ui-accordion-header")[0].click(),i.b.Chat.Data.ally_expanded||p.queryAll(".ui-accordion-header")[1].click(),i.b.Chat.Data.strangers_expanded||p.queryAll(".ui-accordion-header")[2].click()),p.iterate(p.queryAll(".ui-accordion-header"),function(e){e.addEventListener("click",i.b.Chat.Save,!1)})},Load:function(){var e;u.hasProperties(e=i.b.Data.getStorage(i.b.App.keyPlayer+"_CHAT_DATA","JSON"))?i.b.Chat.Data=e:i.b.Data.setStorage(i.b.App.keyPlayer+"_CHAT_DATA",i.b.Chat.Data)},Save:function(){i.b.Chat.Data.buddies_expanded="true"===p.queryAll(".ui-accordion-header")[0].getAttribute("aria-expanded"),i.b.Chat.Data.ally_expanded="true"===p.queryAll(".ui-accordion-header")[1].getAttribute("aria-expanded"),i.b.Chat.Data.strangers_expanded="true"===p.queryAll(".ui-accordion-header")[2].getAttribute("aria-expanded"),console.log(i.b.Chat.Data),i.b.Data.setStorage(i.b.App.keyPlayer+"_CHAT_DATA",i.b.Chat.Data)},createLinks:function(){p.iterate(p.queryAll(".playerlist_item",i.b.Chat.chatBar),function(e){e.onclick=function(t){window.location.href="index.php?page=chat&playerId="+e.dataset.playerid}})},removePopups:function(){p.appendSCRIPT("window.setTimeout(function () {window.visibleChats = [];},0);"),p.iterate(p.queryAll("#chatBar .icon_close"),function(e){e.click()})}};var p={query:function(e,t){return"string"==typeof e?t?"object"===l(t)?t.querySelector(e):"id"===t?document.getElementById(e):document.getElementById(t)?document.getElementById(t).querySelector(e):null:document.querySelector(e):e},queryAll:function(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):e&&"object"===l(e)&&"length"in e?e:[]},findParent:function(e,t,a,n){if((e=p.query(e,t))&&a)for(n=n||0;e&&0<=n;){if(e.id===a)return e;n--,e=e.parentNode}return null},isDescendant:function(e,t){for(var a=t.parentNode;null!=a;){if(a==e)return!0;a=a.parentNode}return!1},iterate:function(e,t){var a;if(e&&"object"===l(e)&&"length"in e)for(a=0;a<e.length;a++)e[a]&&t(e[a])},iterateChildren:function(e,t){if(e)for(var a=e.firstChild;a;a=a.nextSibling)1===a.nodeType&&t(a)},hasChildren:function(e){return e&&e.children?e.children.length:0},getChildren:function(e,t){return e&&e.children?e.children[t]:null},getSelectedNode:function(e){return e&&e.options&&"selectedIndex"in e?e.options[e.selectedIndex]:null},getChildnodeByName:function(e,t){if(e&&e.children)for(var a=0;a<e.children.length;a++)if(e.children[a].tagName===t)return e.children[a];return null},prependChild:function(e,t){e&&t&&(e.childNodes.length?e.insertBefore(t,e.childNodes[0]):e.appendChild(t))},appendChild:function(e,t){e&&t&&e.appendChild(t)},before:function(e,t){e&&t&&e.parentNode.insertBefore(t,e)},after:function(e,t){e&&t&&(e.nextElementSibling?e.parentNode.insertBefore(t,e.nextElementSibling):e.parentNode.appendChild(t))},replaceChildren:function(e,t){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);t&&e.appendChild(t)}},removeChildren:function(e,t){var a;if(e)for(a=0;a<e.childNodes.length;a++)t&&e.childNodes[a].nodeType!==t||e.removeChild(e.childNodes[a])},create:function(e,t,a,n,o){var i;if(e=document.createElement(e),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);if(a)for(i in a)a.hasOwnProperty(i)&&(e.style[i]=a[i]);if(n)for(i in n)n.hasOwnProperty(i)&&e.addEventListener(i,n[i],!1);if(o)for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return e},innerHTML:function(e,t,a){(e=p.query(e,t))&&(e.innerHTML=c.sanitize(a,{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|chrome-extension):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}))},parse:function(e){var t={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};if(t.optgroup=t.option,t.th=t.td,t.tbody=t.tfoot=t.colgroup=t.caption=t.thead,/<|&#?\w+;/.test(e)){var a=document.createElement("div"),n=t[(/<([\w:]+)/.exec(e)||["",""])[1].toLowerCase()]||t._default;p.innerHTML(a,null,n[1]+e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")+n[2]);for(var o=n[0]+1;o--;)a=a.lastChild;return a}return document.createTextNode(e)},append:function(e,t,a,n,o,i,r){var s;if(e=e?e.appendChild(document.createElement(t)):document.createElement(t),a)if("string"==typeof a)e.className=a;else for(s in a)a.hasOwnProperty(s)&&e.setAttribute(s,a[s]);if(n)for(s in n)n.hasOwnProperty(s)&&(e.style[s]=n[s]);if(o)for(s in o)o.hasOwnProperty(s)&&e.addEventListener(s,o[s],!1);if(i)for(s in i)i.hasOwnProperty(s)&&(e[s]=i[s]);return r&&e.setAttribute("ago-data",JSON.stringify(r)),e},appendDIV:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("div")):document.createElement("div"),t)if("string"==typeof t)e.className=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);if(a)for(n in a)a.hasOwnProperty(n)&&(e.style[n]=a[n]);return e},appendTABLE:function(e,t,a,n){var o;if((e=e?e.appendChild(document.createElement("table")):document.createElement("table")).style.tableLayout="fixed",t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);if(a)for(o in a)a.hasOwnProperty(o)&&(e.style[o]=a[o]);if(n)for(t=e.appendChild(document.createElement("colgroup")),o=0;o<n.length;o++)t.appendChild(document.createElement("col")).style.width=n[o]+"px";return e},appendTR:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("tr")):document.createElement("tr"),t)if("string"==typeof t)e.className=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return a&&e.setAttribute("ago-data","string"==typeof a?a:JSON.stringify(a)),e},appendTD:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("td")):document.createElement("td"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=d.setText(a,n,o))&&(e.textContent=a),e},appendLI:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("li")):document.createElement("li"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=d.setText(a,n,o))&&(e.textContent=a),e},appendSPAN:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("span")):document.createElement("span"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=d.setText(a,n,o))&&(e.textContent=a),e},appendTEXT:function(e,t,a,n){(t=d.setText(t,a,n))&&e.appendChild(document.createTextNode(t))},appendIMG:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("img")):document.createElement("img"),t)if("string"==typeof t)e.src=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);if(a)if("string"==typeof t)e.style.width=e.style.height=a;else for(n in a)a.hasOwnProperty(n)&&(e.style[n]=a[n]);return e},appendA:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("a")):document.createElement("a"),t)if("string"==typeof t)e.className=t,e.href="javascript:void(0)";else for(i in t.href||(t.href="javascript:void(0)"),t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);else e.href="javascript:void(0)";if(n&&e.setAttribute("ago-data","string"==typeof n?n:JSON.stringify(n)),a)for(i in a)a.hasOwnProperty(i)&&e.addEventListener(i,a[i],!1);return o&&e.setAttribute("disabled","disabled"),e},appendSELECT:function(e,t,a,n,o){var r;if(e=e?e.appendChild(document.createElement("select")):document.createElement("select"),t)if("string"==typeof t)e.className=t;else for(r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);if(o)for(r in o)o.hasOwnProperty(r)&&e.addEventListener(r,o[r],!1);for(r in a)a.hasOwnProperty(r)&&((t=e.appendChild(document.createElement("option"))).value=r,t.textContent=i.b.Label.get(a[r]).replace(/&lt;/g,"<"),n===r&&(e.selectedIndex=e.options.length-1));return e},appendSCRIPT:function(e,t){var a;e&&((a=document.createElement("script")).setAttribute("type","text/javascript"),a.textContent="string"==typeof e?e:"("+e.toString()+")();",document.head.appendChild(a),t&&document.head.removeChild(a))},set:function(e,t,a,n,o,i){var r;if(e=p.query(e,t)){if(a)for(r in a)a.hasOwnProperty(r)&&e.setAttribute(r,a[r]);if(n)for(r in n)n.hasOwnProperty(r)&&(e.style[r]=n[r]);if(o)for(r in o)o.hasOwnProperty(r)&&e.addEventListener(r,o[r],!1);if(i)for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}},setAll:function(e,t,a,n,o,i){for(t=p.queryAll(e,t),e=0;e<t.length;e++)p.set(t[e],null,a,n,o,i)},getText:function(e,t,a){return e=p.query(e,t),d.getText(e?e.textContent:"",a)},getTextChild:function(e,t,a){var n;if((t=p.query(e,t))&&t.childNodes)for(e=0;e<t.childNodes.length&&(3!=+t.childNodes[e].nodeType||!(n=(t.childNodes[e].nodeValue||"").trim()));e++);return d.getText(n,a)},setText:function(e,t,a,n,o){(e=p.query(e,t))&&(9===n?p.innerHTML(e,null,a||""):e.textContent=d.setText(a,n,o))},updateText:function(e,t,a,n,o){return(e=p.query(e,t))&&(a=d.setText(a,n,o))!==e.textContent?(e.textContent=a,e):null},updateTextChild:function(e,t,a,n,o){if(e=p.query(e,t)){if(a=d.setText(a,n,o),3!=+e.firstChild.nodeType)return p.prependChild(e,document.createTextNode(a)),e;if(a!==e.firstChild.textContent)return e.firstChild.textContent=a,e}return null},getAttribute:function(e,t,a,n){return e=p.query(e,t),d.getText(e?e.getAttribute(a):"",n)},setAttribute:function(e,t,a,n,o){(e=p.query(e,t))&&e.setAttribute(a,d.setValue(n,o))},removeAttribute:function(e,t,a){(e=p.query(e,t))&&e.removeAttribute(a)},updateAttribute:function(e,t,a,n,o){return(e=p.query(e,t))&&(n=d.setValue(n,o),e.getAttribute(a)!==n)?(e.setAttribute(a,n),e):null},setData:function(e,t,a){(e=p.query(e,t))&&a&&e.setAttribute("ago-data","string"==typeof a?a:JSON.stringify(a))},getData:function(e,t,a){return p.getAttributeParent(e,t,"ago-data",-2,a)},getAttributeParent:function(e,t,a,n,o){if(e=p.query(e,t))for(o=o||0;e&&0<=o;){if(e.hasAttribute(a))return p.getAttribute(e,null,a,n);o--,e=e.parentNode}return d.getText("",n)},getProperty:function(e,t,a,n){return e=p.query(e,t),d.getText(e?e[a]:"",n)},setProperty:function(e,t,a,n,o){(e=p.query(e,t))&&(e[a]=d.setValue(n,o))},updateProperty:function(e,t,a,n,o){if((e=p.query(e,t))&&(n=d.setValue(n,o),e[a]!==n))return e[a]=n,e},updatePropertyAll:function(e,t,a,n,o){for(t=p.queryAll(e,t),e=0;e<t.length;e++)p.updateProperty(t[e],null,a,n,o)},getValue:function(e,t,a){return e=p.query(e,t),d.getText(e?e.value:"",a)},setValue:function(e,t,a,n,o){(e=p.query(e,t))&&(e.value=d.setValue(a,n),o&&p.trigger(e,null,o))},updateValue:function(e,t,a,n,o){return(e=p.query(e,t))&&(a=d.setValue(a,n))!==e.value?(e.value=a,o&&p.trigger(e,null,o),e):null},hasClass:function(e,t,a){return!!(e=p.query(e,t))&&d.hasClass(e.className,a)},updateClass:function(e,t,a){return(e=p.query(e,t))&&e.className!==(a||"")?(e.className=a||"",e):null},addClass:function(e,t,a){(t=p.query(e,t))&&a&&(-1===(e=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+a.toLowerCase().trim()+" "))&&(t.className=(t.className?t.className+" ":"")+a))},extendClass:function(e,t,a){(e=p.query(e,t))&&a&&(e.className=((e.className||"")+" "+a).trim())},removeClass:function(e,t,a){var n;(t=p.query(e,t))&&a&&(-1<(n=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+a.toLowerCase().trim()+" "))&&(e=0<n?t.className.slice(0,n).trim():"",a=t.className.slice(n+a.length).trim(),t.className=e+(e&&a?" ":"")+a))},removeClassGroup:function(e,t,a){(e=p.query(e,t))&&a&&((a=(e.className||"").replace(new RegExp("(^|\\s)"+a+"(\\w|_)*","g")," ").trim())!==e.className&&(e.className=a))},setClassGroup:function(e,t,a,n){(e=p.query(e,t))&&a&&((a=(e.className||"").replace(new RegExp("(^|\\s)"+a+"(\\w|_)*","g")," ").trim()+(n?" "+n:""))!==e.className&&(e.className=a))},setStyleColor:function(e,t,a){(e=p.query(e,t))&&(e.style.color=a||"")},setStyleDisplay:function(e,t,a){(e=p.query(e,t))&&(e.style.display=a||"none")},updateStyle:function(e,t,a,n){return(e=p.query(e,t))&&e.style[a]!==(n||"")?(e.style[a]=n||"",e):null},addObserver:function(e,t,a){var n;return e&&a&&(n=new window.MutationObserver(a))&&n.observe(e,t||{childList:!0}),n},removeObserver:function(e){try{e&&e.disconnect&&e.disconnect()}catch(e){}},click:function(e,t){p.trigger(e,t,"click")},trigger:function(e,t,a){(t=p.query(e,t))&&a&&("click"===a||"mouseup"===a||"mousedown"===a||"mouseover"===a||"mouseout"===a?((e=document.createEvent("MouseEvents")).initMouseEvent(a,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)):"change"===a||"focus"===a||"blur"===a?((e=document.createEvent("HTMLEvents")).initEvent(a,!0,!1),t.dispatchEvent(e)):"keyup"===a&&("initKeyboardEvent"in(e=document.createEvent("KeyboardEvent"))?e.initKeyboardEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0):e.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0),t.dispatchEvent(e)))},addEvents:function(e,t,a){var n;if(e=p.query(e,t))for(n in a)a.hasOwnProperty(n)&&e.addEventListener(n,a[n],!1)},addEventsAll:function(e,t,a){var n;for(t=p.queryAll(e,t),e=0;e<t.length;e++)for(n in a)a.hasOwnProperty(n)&&t[e].addEventListener(n,a[n],!1)},setFocus:function(e,t){var a=p.query(e,t);a&&a.focus()},disableAutocomplete:function(){i.b.Option.is("U41")&&window.setTimeout(function(){p.setAll("form",null,{autocomplete:"off"})},0)},disableActiveElement:function(e){if(i.b.Init.mobile&&document.activeElement)if("TEXTAREA"===document.activeElement.tagName||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type)if(b.check(i.b.App.page,"fleet1","fleet2"))p.setFocus("continue","id");else if("fleet3"===i.b.App.page)p.setFocus("start","id");else try{document.activeElement.blur()}catch(e){}else e||window.setTimeout(p.disableActiveElement,30,!0)},changeInput:function(e,t){var a,n;return!(e&&t&&(!i.b.isFirefox||i.b.Option.is("U41")))||(a=e.shiftKey&&e.ctrlKey?1e3:e.ctrlKey?100:e.shiftKey?10:1,n=p.getValue(t,null,2),n=38===e.keyCode?n+a:n-a,p.setValue(t,null,Math.max(n,0)),p.trigger(t,null,"keyup"),!1)}},d={getText:function(e,t){if(1===t)return Boolean(e);if(2===t)return m.parseIntFormat(e);if(3===t)return m.parseIntAbs(e);if(7===t)return(e||"").trim();if(-2!==t)return e||"";try{return JSON.parse(e||"{}")}catch(e){return{}}},setText:function(e,t,a){return t&&(e=2===t?g.formatNumber(e):4===t?g.formatNumber(e,!0):5===t?g.shortNumber(e):3===t?e?g.formatNumber(e):"0":7===t?g.trim(e):8===t?g.zero(e):10===t?i.b.Label.get(e):11===t?i.b.Label.get(e,1):12===t?i.b.Label.get(e,2):15===t?i.b.Time.format(e,a):16===t?i.b.Time.format(e,a,!0):17===t?i.b.Time.formatTimestamp(e,a):18===t?i.b.Time.formatTime(e):19===t?i.b.Time.formatTime(e,!0):e),e?e+"":""},setValue:function(e,t){return t&&(e=1===t?Boolean(e):7===t?g.trim(e):8===t?g.zero(e):-2===t?JSON.stringify(e||{}):e),e?e+"":""},urlImage:function(e){return i.b.App.pathSkin+"ago/images/"+e},urlMissionIcon:function(e){return i.b.App.pathSkin+"ago/images/task/mission-"+(e||0)+".gif"},urlTypeIcon:function(e,t){return i.b.App.pathSkin+"ago/images/task/type-"+(e||0)+(t||"a")+".gif"},hasClass:function(e,t){return e=e.replace(/\s+/g," "),!!t&&-1<(" "+(e||"").toLowerCase()+" ").indexOf(" "+t.toLowerCase().trim()+" ")},classMission:function(e){return"ago_color_M"+g.trimZero(e,2)},classType:function(e){return i.b.Styles.classType[e]||""},classStatus:function(e){return 0<e?"ago_color_lightgreen":0>e?"ago_color_palered":"ago_color_orange"},classStatusData:function(e){return i.b.Styles.classStatusData[(e||0)+2]||""},colorStatusData:function(e){return i.b.Styles.colorStatusData[(e||0)+2]||""},color:function(e,t){return!e||4!==e.length&&7!==e.length?"":0<t&&100>t?"rgba("+(e=7===e.length?parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16):parseInt(e.substring(1,2),16)+","+parseInt(e.substring(2,3),16)+","+parseInt(e.substring(3,4),16))+(10>t?",0.0":",0.")+t+")":e},getPlayer:function(e,t,a){return(a?'<span class="honorRank '+i.b.Ogame.getHonorClass(a)+'">&nbsp;</span>':"")+'<span class="'+i.b.Token.getClass(t)+'">'+(e||"")+"</span>"}},u={parse:function(e){if(e&&"object"===l(e))return e;try{return JSON.parse(e||"{}")}catch(e){return{}}},split:function(e,t){var a,n,o,i={};for(a=g.check(e).split(t||";"),o=0;o<a.length;o++)(n=(a[o]||"").split("="))[0]&&(i[n[0]]=n[1]||"");return i},create:function(e){var t,a={};if(e&&"object"===l(e))for(t in e)"object"!==l(e[t])&&(a[t]=e[t]);return a},createKey:function(e,t){var a={};return e&&(a[e]=t),a},copy:function(e,t){if(e&&"object"===l(e)&&t&&"object"===l(t))for(var a in e)"object"!==l(e[a])&&(t[a]=e[a])},is:function(e){return e&&"object"===l(e)},hasProperties:function(e){return e&&"object"===l(e)&&Object.keys(e).length},get:function(e,t){return e&&"object"===l(e)&&t in e?e[t]:""},set:function(e,t,a){e&&"object"===l(e)&&(e[t]=a)},iterate:function(e,t){if(e&&"object"===l(e))for(var a in e)e.hasOwnProperty(a)&&t(a)},iterateFilter:function(e,t,a){if(e&&"object"===l(e))for(var n in e)e.hasOwnProperty(n)&&-1!==a.indexOf(n)&&t(n)},iterateArray:function(e,t){Array.isArray(e)&&e.forEach(t)},deleteWhere:function(e,t,a){if(e&&"object"===l(e))for(var n in e)e.hasOwnProperty(n)&&e[n][t]===a&&delete e[n]},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},b={choose:function(e){return 0<e?arguments[e]:""},select:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return arguments[t]},check:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return!0;return!1},status:function(e,t,a,n){return 0>e?t:0<e?n:a}},m={minMax:function(e,t,a){return Math.max(Math.min(+e||0,a),t)},isMinMax:function(e,t,a){return+e>=t&&+e<=a},isGreater:function(e,t){return 0<+t&&+e>=+t},isLesser:function(e,t){return 0<+e&&+t>=+e},parseInt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return"string"==typeof e?parseInt(e,10):"number"==typeof e?Math.floor(e):0}),parseIntFormat:function(e){return"string"==typeof e?+e.replace(/[^\d\-]/g,"")||0:"number"==typeof e?Math.floor(e):0},parseIntAbs:function(e){return"string"==typeof e?+e.replace(/[^\d]/g,"")||0:"number"==typeof e?Math.floor(Math.abs(e)):0},parseVersion:function(e){return(e=/(\d+)\D*(\d*)\D*(\d*)\D*(\d*)/.exec(e?e.toString():""))?parseInt(("00"+e[1]).slice(-2)+("00"+e[2]).slice(-2)+("00"+e[3]).slice(-2)+("00"+e[4]).slice(-2),10):0},parseIntShortcut:function(e){return(-1<(e=g.check(e).toLowerCase()).indexOf("k")?1e3:1)*parseInt(e.replace(/[^\d]/g,""),10)},parseIntRess:function(e){var t;return(e=g.trim(e.match(/: ([^<]+)*/)?e.match(/: ([^<]+)*/)[1]:e)).match(/^[0-9]{1,3}\.[0-9]{3}$/)?e=e.replace(".",""):(t=new RegExp("^([0-9]{1,3}(.|,))?[0-9]{1,3}("+i.b.Label.is("KU0B")+")"))&&e.match(t)?e=1e9*e.replace(/,/g,".").replace(i.b.Label.is("KU0B"),""):(t=new RegExp("^([0-9]{1,3}(.|,))?[0-9]{1,3}("+i.b.Label.is("KU0M")+")"))&&e.match(t)&&(e=1e6*e.replace(/,/g,".").replace(i.b.Label.is("KU0M"),"")),parseInt(e,10)}},g={check:function(e){return"string"==typeof e?e:"number"==typeof e&&e?e+"":""},trim:function(e){return"string"==typeof e?e.trim():"number"==typeof e&&e?e+"":""},zero:function(e){return e?"string"==typeof e?e:"number"==typeof e?e+"":"0":"0"},trimZero:function(e,t){return(e="0000"+e).substr(e.length-t)},formatNumber:function(e,t){var a="";if(e){t&&(1e9<=Math.abs(e)?(e=Math.floor(e/1e6),a=" "+i.b.Label.is("KU0M")):1e6<=Math.abs(e)&&(e=Math.floor(e/1e3),a=" "+i.b.Label.is("KU0K")));for(var n=[],o=Math.abs(+e||0)+"";;){var r=o.slice(-3);if(!r)break;n.unshift(r),o=o.substr(0,o.length-r.length)}return(0>e?"-":"")+n.join(i.b.Label.is("KU0S"))+a}return 0},shortNumber:function(e,t){var a,n;if(a=2===t?1:1===t?10:100,1e9<=e)a=Math.ceil(e/1e7/a)+"",n=i.b.Label.is("KU0B");else if(1e6<=e)a=Math.ceil(e/1e4/a)+"",n=i.b.Label.is("KU0M");else{if(!(1e3<=e))return e||"0";a=Math.ceil(e/10/a)+"",n=i.b.Label.is("KU0K")}return t?a.substr(0,a.length-t)+i.b.Label.is("KU0S")+a.substr(a.length-t)+" "+n:a+" "+n},getParameter:function(e,t){var a=decodeURIComponent(t||"").replace(/\?/g,"&").split("&"+e+"=")[1];return a&&a.split("&")[0].split("#")[0]||""},addParameter:function(e,t){return t=g.trim(t),e&&t?"&"+e+"="+encodeURI(t):""},splitParameter:function(e){var t,a,n;if(e=decodeURIComponent(e||"").replace(/\?/g,"&").split("#")[0])for(t={},e=e.split("&"),n=0;n<e.length;n++)(a=(e[n]||"").split("="))[0]&&(t[a[0]]=a[1]||"");return t},getMatches:function(e,t,a){a||(a=1);for(var n,o=[];n=t.exec(e);)o.push(n[a]);return o}};Node.prototype.hasClass=function(e){return!!this.classList.contains(e)},i.b.Notify={status:0,Problem:[],problem:0,Run:function(){i.b.App.reload||(i.b.App.upgradeAvailable&&i.b.Notify.set("Problem",4),i.b.Events.included||i.b.Notify.set("Problem",6),1!==i.b.Uni.status&&i.b.Notify.set("Problem",11),1!==i.b.Units.Data.status&&i.b.Notify.set("Problem",12),1!==i.b.Label.Data.status&&i.b.Notify.set("Problem",13),1!==i.b.App.storage&&i.b.Notify.set("Problem",15),1!==i.b.Option.Data.status&&i.b.Notify.set("Problem",17),i.b.App.twice&&i.b.Notify.set("Problem",18))},set:function(e,t,a){var n,o;if("Problem"===e){for(i.b.Notify.problem=0,(4===t&&i.b.Option.is("S44")||5===t&&i.b.Option.is("S45")||6===t&&(i.b.Option.is("S46")||!i.b.Option.is("E30"))||8===t&&i.b.Option.is("S48"))&&(t=0),0<t?i.b.Notify.Problem[t]=t:0>t&&(i.b.Notify.Problem[Math.abs(t)]=0),t=0;t<i.b.Notify.Problem.length;t++)i.b.Notify.Problem[t]>i.b.Notify.problem&&(i.b.Notify.problem=t);t=0}5<i.b.Init.status&&("Hide"===e&&(i.b.Notify.loading=!1),3===t&&(i.b.Notify.loading=!0),o=d.colorStatusData(t),3!==t&&(20<=i.b.Notify.problem?i.b.Notify.color="#FF0000":10<i.b.Notify.problem?i.b.Notify.color="#FF4B00":i.b.Notify.loading?i.b.Notify.color="#FF4B00":5<=i.b.Notify.problem?i.b.Notify.color="#FF9600":4<=i.b.Notify.problem?i.b.Notify.color="#FFB500":i.b.Notify.problem?i.b.Notify.color="#00B000":i.b.Notify.color="",i.b.Main.updateButton()),"Notify"===e?(m.isMinMax(i.b.Notify.problem,1,19)&&(n=i.b.Label.is("S"+(i.b.Notify.problem+60))),o=i.b.Notify.color):n=i.b.Label.is(e),5<i.b.Init.status&&n&&i.b.Main.updateInfo(e,n+(a||""),o))}},i.b.Option={Data:{},Start:function(){3<=i.b.App.mode&&(i.b.Option.Data=i.b.Data.getStorage(i.b.App.keyPlayer+"_Option","JSON"))},Init:function(e){i.b.Option.Data=u.is(e)?e:{},i.b.Init.mobile=i.b.Option.is("U51")&&(i.b.isMobile||1<i.b.Option.get("U51",2)),i.b.Init.touch=i.b.Option.is("U52")&&(i.b.isMobile||i.b.Init.mobile||1<i.b.Option.get("U52",2)),i.b.App.reload&&i.b.Option.Save()},Save:function(){i.b.Data.setStorage(i.b.App.keyPlayer+"_Option",{O04:i.b.Option.is("O04"),U31:i.b.Option.is("U31"),U32:i.b.Option.isAnd("U31","U32")})},set:function(e,t,a){e&&(t=6<=a?g.check(t):1===a?t?1:0:+t||0,i.b.Option.Data[e]=t,y.message("Option","Set",{id:e,value:t},function(e){e&&(i.b.Option.Data[e.id]=e.value)}))},get:function(e,t){return t?2===t?+i.b.Option.Data[e]||0:1===t?Boolean(i.b.Option.Data[e]):e in i.b.Option.Data?"string"==typeof i.b.Option.Data[e]?i.b.Option.Data[e]:g.check(i.b.Option.Data[e]):"":e in i.b.Option.Data?i.b.Option.Data[e]:""},is:function(e){return Boolean(i.b.Option.Data[e])},isAnd:function(e,t){return Boolean(i.b.Option.Data[e]&&i.b.Option.Data[t])},getPair:function(e){return 2===(e=g.check(i.b.Option.Data[e]).split("|",2)).length?e:""},Menu:function(){document.getElementById("ago_menu")||y.message("App","Script",{scripts:["menu"]})}},i.b.Label={Data:{},Init:function(e){i.b.Label.Data=u.is(e)?e:{}},Update:function(){var e;i.b.App.OgameMain&&(e={localization:i.b.Global.message({role:"getProperty",property:"LocalizationStrings"}),production:u.parse(i.b.Init.Script("production"))},y.message("Label","Update",{data:e}))},get:function(e,t){return e?(t&&(e=(2===t?"K":"L")+(i.b.Item.ResourceEnergy[e]?i.b.Item.ResourceEnergy[e]:1===e.length?"00"+e:2===e.length?"0"+e:e)),e in i.b.Label.Data?(i.b.Label.Data[e]||"").replace(/&amp;/g,"&"):e):""},is:function(e){return e in i.b.Label.Data?(i.b.Label.Data[e]||"").replace(/&amp;/g,"&"):""}},i.b.Styles={status:0,Data:null,opacity:33,colorStatusData:["#FF0000","#FF0000","","#008000","#FFB500","#FF4B00","#00B000"],classStatusData:"ago_color_red ago_color_red  ago_color_green ago_color_lightorange ago_color_darkorange ago_color_lightgreen".split(" "),classType:["","ago_color_planet","ago_color_debris","ago_color_moon"],classVisible:"ago_visible_hide ago_visible_hide ago_visible_weakest ago_visible_weaker ago_visible_weak ago_visible_middle ago_visible_strong ago_visible_stronger ago_visible_strongest ago_visible_show".split(" "),classFleet:" ago_color_hostile ago_color_neutral ago_color_own ago_color_reverse ago_color_friend ago_color_enemy".split(" "),Start:function(){function e(e){return e?'@import url("'+i.b.App.pathSkin+"ago/"+e+".css"+(i.b.App.beta?"?"+(new Date).getTime():"")+'");':""}var t,a,n=[];3<=i.b.App.mode&&i.b.App.keyPlayer&&(document.documentElement.style.overflowY="scroll","Color"in(a=i.b.Data.getStorage(i.b.App.keyPlayer+"_Styles","JSON"))&&(i.b.Styles.status=1,i.b.Styles.Data=a,u.is(a.colorType)&&(i.b.Styles.colorType=a.colorType),u.is(a.Page)||(a.Page={}),t=i.b.App.page,u.is(a[t])&&("file"in a[t]&&(a.Page.file=a[t].file),"improve"in a[t]&&(a.Page.improve=a[t].improve),"events"in a[t]&&(a.Page.events=a[t].events)),a.Events&&(i.b.Events.modeBehavior=+a.Page.events||0,i.b.Events.modeBehaviorAbove=b.check(i.b.Events.modeBehavior,1,2,5,6),i.b.Events.modeBehavior&&(i.b.Events.modeBehaviorAbove?n.push("#eventboxContent:not(:first-child){display:none;}"):n.push("#eventboxContent:first-child{display:none;}"),5>i.b.Events.modeBehavior&&n.push("#eventboxContent, #eventboxContent #eventListWrap{ display: none; }"))),a.Styles=n.join(""),t=document.createDocumentFragment(),p.append(t,"style",{type:"text/css",media:"screen"}).textContent=e(a.Main)+e(a.Planets)+e(a.Events)+e(a.Page.file)+e(a.Mobile)+(a.Skin||"")+(a.Color||""),i.b.isFirefox&&document.head&&3>i.b.App.beta?p.appendChild(document.head,t):p.prependChild(document.documentElement,t),window.setTimeout(i.b.Styles.preload,5)))},Init:function(){var e;e=document.createDocumentFragment(),i.b.Styles.Sheet=p.append(e,"style",{type:"text/css",media:"screen"}),(i.b.App.Ogame||window.location.href.indexOf("component=empire")>-1)&&u.is(i.b.Styles.Data)&&(u.get(i.b.Styles.Data.Page,"improve")&&("overview"===i.b.App.page&&1!==i.b.Acc.type||p.extendClass(document.body,null,"ago_improve")),i.b.Styles.set(i.b.Styles.Data.Styles)),document.head.appendChild(e)},Load:function(e){i.b.App.Ogame&&(1!==i.b.Styles.status||i.b.App.reload||e)&&(y.Log("Update   - Styles   :",!0),y.message("Styles","Init",{mobile:i.b.App.OgameMobile},function(e){i.b.Data.setStorage(i.b.App.keyPlayer+"_Styles",e),1!==i.b.Styles.status&&(i.b.Styles.Start(),i.b.Styles.Init())}))},set:function(e){g.check(e)&&i.b.Styles.Sheet&&i.b.Styles.Sheet.appendChild(document.createTextNode(e))},preload:function(){var e,t;for(e=["menu_logo.png"],t=0;t<e.length;t++)(new window.Image).src=d.urlImage(e[t]);if(b.check(i.b.App.page,"fleet1","fleet2")){for(e=["0",1,2,3,4,5,6,7,8,9,10,13,15],t=0;t<e.length;t++)(new window.Image).src=d.urlImage("task/mission-"+e[t]+".gif");for(e="0a 0b 1a 1b 1c 2a 2b 3a 3b 3c".split(" "),t=0;t<e.length;t++)(new window.Image).src=d.urlImage("task/type-"+e[t]+".gif")}else"fleet3"===i.b.App.page&&((new window.Image).src=d.urlImage("fleet3_send_green.gif"),(new window.Image).src=d.urlImage("fleet3_send_orange.gif")),(new window.Image).src=d.urlImage("task/type-3a.gif")}},i.b.Item={1:{metal:60,crystal:15,deuterium:0,factor:1.5},2:{metal:48,crystal:24,deuterium:0,factor:1.6},3:{metal:225,crystal:75,deuterium:0,factor:1.5},4:{metal:75,crystal:30,deuterium:0,factor:1.5},12:{metal:900,crystal:360,deuterium:180,factor:1.8},14:{metal:400,crystal:120,deuterium:200,factor:2},15:{metal:1e6,crystal:5e5,deuterium:1e5,factor:2},21:{metal:400,crystal:200,deuterium:100,factor:2},22:{metal:1e3,crystal:0,deuterium:0,factor:2},23:{metal:1e3,crystal:500,deuterium:0,factor:2},24:{metal:1e3,crystal:1e3,deuterium:0,factor:2},25:{metal:2645,crystal:0,deuterium:0,factor:2.3},26:{metal:2645,crystal:1322,deuterium:0,factor:2.3},27:{metal:2645,crystal:2645,deuterium:0,factor:2.3},31:{metal:200,crystal:400,deuterium:200,factor:2},33:{metal:0,crystal:5e4,deuterium:1e5,factor:2},34:{metal:2e4,crystal:4e4,deuterium:0,factor:2},36:{metal:200,crystal:0,deuterium:50,factor:5},41:{metal:2e4,crystal:4e4,deuterium:2e4,factor:2},42:{metal:2e4,crystal:4e4,deuterium:2e4,factor:2},43:{metal:2e6,crystal:4e6,deuterium:2e6,factor:2},44:{metal:2e4,crystal:2e4,deuterium:1e3,factor:2},106:{metal:200,crystal:1e3,deuterium:200,factor:2},108:{metal:0,crystal:400,deuterium:600,factor:2},109:{metal:800,crystal:200,deuterium:0,factor:2},110:{metal:200,crystal:600,deuterium:0,factor:2},111:{metal:1e3,crystal:0,deuterium:0,factor:2},113:{metal:0,crystal:800,deuterium:400,factor:2},114:{metal:0,crystal:4e3,deuterium:2e3,factor:2},115:{metal:400,crystal:0,deuterium:600,factor:2},117:{metal:2e3,crystal:4e3,deuterium:600,factor:2},118:{metal:1e4,crystal:2e4,deuterium:6e3,factor:2},120:{metal:200,crystal:100,deuterium:0,factor:2},121:{metal:1e3,crystal:300,deuterium:100,factor:2},122:{metal:2e3,crystal:4e3,deuterium:1e3,factor:2},123:{metal:24e4,crystal:4e5,deuterium:16e4,factor:2},124:{metal:4e3,crystal:8e3,deuterium:4e3,factor:1.75},199:{metal:0,crystal:0,deuterium:0,factor:3},202:{metal:2e3,crystal:2e3,deuterium:0,retreat:1e3,drive:"115",speed:5e3,capacity:5e3,consumption:10},203:{metal:6e3,crystal:6e3,deuterium:0,retreat:3e3,drive:"115",speed:7500,capacity:25e3,consumption:50},204:{metal:3e3,crystal:1e3,deuterium:0,retreat:4e3,drive:"115",speed:12500,capacity:50,consumption:20},205:{metal:6e3,crystal:4e3,deuterium:0,retreat:1e4,drive:"117",speed:1e4,capacity:100,consumption:75},206:{metal:2e4,crystal:7e3,deuterium:2e3,retreat:29e3,drive:"117",speed:15e3,capacity:800,consumption:300},207:{metal:45e3,crystal:15e3,deuterium:0,retreat:6e4,drive:"118",speed:1e4,capacity:1500,consumption:500},208:{metal:1e4,crystal:2e4,deuterium:1e4,retreat:1e4,drive:"117",speed:2500,capacity:7500,consumption:1e3},209:{metal:1e4,crystal:6e3,deuterium:2e3,retreat:4500,drive:"115",speed:2e3,capacity:2e4,consumption:300},210:{metal:0,crystal:1e3,deuterium:0,retreat:0,drive:"115",speed:1e8,capacity:0,consumption:1},211:{metal:5e4,crystal:25e3,deuterium:15e3,retreat:9e4,drive:"117",speed:4e3,capacity:500,consumption:1e3},212:{metal:0,crystal:2e3,deuterium:500,retreat:0,drive:0,speed:0,capacity:0,consumption:0},213:{metal:6e4,crystal:5e4,deuterium:15e3,retreat:125e3,drive:"118",speed:5e3,capacity:2e3,consumption:1e3},214:{metal:5e6,crystal:4e6,deuterium:1e6,retreat:1e7,drive:"118",speed:100,capacity:1e6,consumption:1},215:{metal:3e4,crystal:4e4,deuterium:15e3,retreat:85e3,drive:"118",speed:1e4,capacity:750,consumption:250},401:{metal:2e3,crystal:0,deuterium:0,retreat:2e3},402:{metal:1500,crystal:500,deuterium:0,retreat:2e3},403:{metal:6e3,crystal:2e3,deuterium:0,retreat:8e3},404:{metal:2e4,crystal:15e3,deuterium:2e3,retreat:37e3},405:{metal:2e3,crystal:6e3,deuterium:0,retreat:8e3},406:{metal:5e4,crystal:5e4,deuterium:3e4,retreat:13e4},407:{metal:1e4,crystal:1e4,deuterium:0,retreat:2e4},408:{metal:5e4,crystal:5e4,deuterium:0,retreat:1e5},502:{metal:8e3,crystal:0,deuterium:2e3,retreat:0},503:{metal:12500,crystal:2500,deuterium:1e4,retreat:0},Mining:{1:1,2:1,3:1,4:1,12:1,22:1,23:1,24:1,25:1,26:1,27:1,212:1},Station:{14:1,15:1,21:1,31:1,33:1,34:1,36:1,41:1,42:1,43:1,44:1},Ship:{202:1,203:1,204:2,205:2,206:2,207:2,208:1,209:1,210:1,211:2,212:3,213:2,214:2,215:2},ShipCivil:{202:1,203:1,208:1,209:1,210:1},ShipCombat:{204:2,205:2,206:2,207:2,215:2,211:2,213:2,214:2},ShipTransport:{203:1,202:1,209:1,214:1},Defense:{401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,502:2,503:2},Resource:{metal:"091",crystal:"092",deuterium:"093"},ResourceEnergy:{metal:"091",crystal:"092",deuterium:"093",energy:"094"},Coordinates:{galaxy:1,system:1,position:1},CoordinatesType:{galaxy:1,system:1,position:1,type:1},Type:{1:"planet",2:"debris",3:"moon"},Research:{106:8,108:10,109:3,110:6,111:2,113:12,114:8,115:6,117:6,118:8,120:-12,121:5,122:7,123:0,124:8,199:-1},ByName:{},Mission:{M15:0,M07:0,M08:0,M03:0,M04:0,M06:0,M05:0,M01:0,M02:0,M09:0},Init:function(e){i.b.Item.ByName=e||{}},getByName:function(e){return e&&i.b.Item.ByName[e]||""},check:function(e,t,a){return(e=g.check(e))&&t&&e in t?e:g.check(a)},valid:function(e){return 1<=+e&&503>=+e&&e in i.b.Item?e:""},create:function(e){var t,a={};for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)i.b.Item[e[t]]&&u.iterate(i.b.Item[e[t]],function(e){a[e]=0});return a}},i.b.Ogame={getFleetDistance:function(e,t){var a;if(u.is(e)&&u.is(t)){if(a=Math.abs(e.galaxy-t.galaxy))return i.b.Uni.donutGalaxy&&a>Math.floor(i.b.Uni.galaxies/2)&&(a=Math.abs(a-i.b.Uni.galaxies)),2e4*a;if(a=Math.abs(e.system-t.system))return i.b.Uni.donutSystem&&a>Math.floor(i.b.Uni.systems/2)&&(a=Math.abs(a-i.b.Uni.systems)),95*a+2700;if(a=Math.abs(e.position-t.position))return 5*a+1e3}return 5},getFleetDuration:function(e,t,a){return e in i.b.Item.Ship&&t?Math.round((35e3/(a||10)*Math.sqrt(10*t/i.b.Ogame.getShipSpeed(e))+10)/(+i.b.Uni.speedFleet||1)):0},getShipConsumption:function(e,t,a){return e in i.b.Item.Ship&&i.b.Item[e].consumption&&t&&a?(a=35e3/(a*i.b.Uni.speedFleet-10)*Math.sqrt(10*t/i.b.Ogame.getShipSpeed(e)),i.b.Item[e].consumption*t/35e3*(a/10+1)*(a/10+1)*i.b.Uni.globalDeuteriumSaveFactor):0},getShipCapacity:function(e){var t="210"===e&&i.b.Uni.probeCargo?i.b.Uni.probeCargo:i.b.Item[e].capacity;return Math.round(t*(1+(i.b.Units.get("114")||0)*(i.b.Uni.cargoHyperspaceTechMultiplier/100)))},getShipSpeed:function(e){return i.b.Ogame.initShipSpeed&&(i.b.Ogame.initShipSpeed(),i.b.Ogame.initShipSpeed=null),i.b.Item[e].speed},initShipSpeed:function(){var e=5070900<=m.parseVersion(i.b.App.versionOGame);u.iterate(i.b.Item.Ship,function(t){var a,n,o,r;"202"===t&&5<=i.b.Units.get("117")?(a=1e4,n="117",r=20):"209"===t&&15<=i.b.Units.get("118")?e&&(a=6e3,n="118",r=900):"209"===t&&17<=i.b.Units.get("117")?e&&(a=4e3,n="117",r=600):"211"===t&&8<=i.b.Units.get("118")?(a=5e3,n="118",r=1e3):(a=i.b.Item[t].speed,n=i.b.Item[t].drive,r=i.b.Item[t].consumption),n&&(o="115"===n?.1:"117"===n?.2:.3,i.b.Item[t].speed=Math.floor(a*(10+i.b.Units.get(n)*o*10)/10),i.b.Item[t].consumption=r)})},getDebris:function(e,t){var a,n,o,r,s,l={};if(u.copy(e,l),a={metal:0,crystal:0},u.is(l))for(o in t=t&&i.b.Uni.defToTF,n=i.b.Uni.debrisFactor||.3,r=i.b.Uni.debrisFactorDef||.3,s=i.b.Uni.repairFactor||.7,l)l[o]&&(i.b.Item.Ship[o]||t&&1===i.b.Item.Defense[o]&&(n=r)&&(l[o]=l[o]*(1-s)))&&(a.metal+=Math.floor(l[o]*Math.floor(i.b.Item[o].metal*n)),a.crystal+=Math.floor(l[o]*Math.floor(i.b.Item[o].crystal*n)));return a.total=a.metal+a.crystal,a.recs=Math.ceil(a.total/i.b.Ogame.getShipCapacity("209")),a.enough=0<a.total&&a.total>=1e3*i.b.Option.get("M37",2),a},chooseTopscore:function(e,t,a,n,o,r,s,l){var c=Math.max(i.b.Uni.topScore,i.b.Option.get("S29",2));return 1e5>c?e:1e6>c?t:5e6>c?a:25e6>c?n:5e7>c?o:75e6>c?r:1e8>c?s:l},getConsumptionDeuterium:function(e,t){var a;return a="12"===e?10*t*Math.pow(1.1,t):0,Math.floor(a)*i.b.Uni.speed},getConsumptionEnergy:function(e,t){var a;return"1"===e?Math.pow(1.1,t):"2"===e?Math.pow(1.1,t):"3"===e&&Math.pow(1.1,t),(a="1"===e||"2"===e?10:"3"===e?20:0)&&0<=t?Math.floor(a*t*Math.pow(1.1,t)):0},getProductionEnergy:function(e,t){var a,n;return a="4"===e?20*t*Math.pow(1.1,t):"12"===e?30*t*Math.pow(1.05+.01*i.b.Units.get("113"),t):"212"===e?Math.round(Math.floor((i.b.Planets.Get("active","temp")+40+140)/6)*t):0,n=i.b.Option.is("comstaff")?1.12:i.b.Option.is("engineer")?1.1:1,Math.round(n*a)},getProductionResources:function(e,t){var a,n;return a="1"===e?30*t*Math.pow(1.1,t):"2"===e?20*t*Math.pow(1.1,t):"3"===e?10*t*Math.pow(1.1,t)*(1.28-.004*i.b.Planets.Get("active","temp")):0,n=i.b.Option.is("comstaff")?1.12:i.b.Option.is("geologist")?1.1:1,Math.floor(n*a)*i.b.Uni.speed},getStandardUnitsCache:null,getStandardUnits:function(e,t){if(!i.b.Task.getStandardUnitsCache){var a=i.b.Option.get("B32",6).split(":");i.b.Task.getStandardUnitsCache={metal:m.minMax(+a[0]||2,1,5),crystal:m.minMax(+a[1]||1,1,5),deuterium:m.minMax(+a[2]||1,1,5)}}if(u.is(e))switch(t){case 1:return Math.ceil((+e.metal||0)*i.b.Task.getStandardUnitsCache.crystal/i.b.Task.getStandardUnitsCache.metal)+(+e.crystal||0)+Math.ceil((+e.deuterium||0)*i.b.Task.getStandardUnitsCache.crystal/i.b.Task.getStandardUnitsCache.deuterium);case 2:return Math.ceil((+e.metal||0)*i.b.Task.getStandardUnitsCache.deuterium/i.b.Task.getStandardUnitsCache.metal)+Math.ceil((+e.crystal||0)*i.b.Task.getStandardUnitsCache.deuterium/i.b.Task.getStandardUnitsCache.crystal)+(+e.deuterium||0);default:return(+e.metal||0)+Math.ceil((+e.crystal||0)*i.b.Task.getStandardUnitsCache.metal/i.b.Task.getStandardUnitsCache.crystal)+Math.ceil((+e.deuterium||0)*i.b.Task.getStandardUnitsCache.metal/i.b.Task.getStandardUnitsCache.deuterium)}return 0},getAmortisation:function(e,t,a){return u.is(t)&&0<a&&0<(e=i.b.Ogame.getStandardUnits(t,+e-1))?Math.floor(e/a*3600):0},getStorageCapacity:function(e){return 5e3*Math.floor(2.5*Math.pow(Math.E,20*e/33))},getPlayerHonor:function(e){if(e&&6<e.length){if(-1<e.indexOf("rank_starlord1"))return 1;if(-1<e.indexOf("rank_starlord2"))return 2;if(-1<e.indexOf("rank_starlord3"))return 3;if(-1<e.indexOf("rank_bandit1"))return 5;if(-1<e.indexOf("rank_bandit2"))return 6;if(-1<e.indexOf("rank_bandit3"))return 7}return 0},getHonorClass:function(e){return e?" rank_starlord1 rank_starlord2 rank_starlord3  rank_bandit1 rank_bandit2 rank_bandit3".split(" ")[e]:""},getJumpgateCooldown:function(e){var t=i.b.Units.Data.Moons&&i.b.Units.Data.Moons[e]&&i.b.Units.Data.Moons[e][43]?i.b.Units.Data.Moons[e][43]:1;return Math.round((14.9206*Math.pow(t,2)-453.016*t+4038.1)/i.b.Uni.speedFleet)}},i.b.Units={status:0,Data:{},Init:function(e){i.b.Units.Data=e||{}},Read:function(){u.iterate(i.b.Item.ResourceEnergy,function(e){i.b.Units.Data[e]=i.b.Units.Data[e+"Start"]=p.getText("resources_"+e,"id",2)}),i.b.Units.Data.resources=i.b.Units.Data.metal+i.b.Units.Data.crystal+i.b.Units.Data.deuterium},Run:function(){y.message("Units","Update",{planet:i.b.Acc.planetId,data:i.b.Units.Data},function(){i.b.Units.status=1})},Timer:function(){u.iterate(i.b.Item.Resource,function(e){i.b.Units.Data[e]=p.getText("resources_"+e,"id",2)}),i.b.Units.Data.resources=i.b.Units.Data.metal+i.b.Units.Data.crystal+i.b.Units.Data.deuterium},Update:function(e){var t;(t=new XMLHttpRequest).open("GET",i.b.Uni.url+"/game/index.php?page=fetchTechs&ajax=1",!0),t.setRequestHeader("Cache-Control","no-cache"),t.setRequestHeader("Pragma","no-cache"),t.overrideMimeType("text/html"),t.onerror=t.onload=function(){var a,n;i.b.Init.status&&(n=-1,200==+t.status&&g.check(t.responseText)[0]===String.fromCharCode(123)&&(n=4,a={planet:"account",tabs:["Research"],data:u.parse(t.responseText)},y.message("Units","Action",{planets:i.b.Planets.ByCoordstype,list:[a]})),y.Log("Update   - Units    : Research "+(-1===n?" failed !":"")),e&&e(n))},t.send(null)},get:function(e){return+i.b.Units.Data[e]||0},set:function(e,t){e&&(i.b.Units.Data[e]=+t||0)},activeResources:function(e){u.is(e)&&(u.iterate(i.b.Item.Resource,function(t){e[t]=+i.b.Units.Data[t]||0}),e.resources=i.b.Units.Data.resources)},activeProduction:function(){var e;e=u.parse(i.b.Init.Script("production")),u.iterate(i.b.Item.ResourceEnergy,function(t){e[t]&&u.is(e[t].resources)&&(i.b.Units.Data[t+"Storage"]=+e[t].resources.max||0,i.b.Units.Data[t+"Production"]=+e[t].resources.production||0)})}},i.b.Time={status:0,serverTime:0,ogameTime:0,timeZoneDelta:0,localTime:Date.now(),localTimeDelta:0,localTimeRun:0,duration:0,durationRun:0,Read:function(){var e;i.b.Time.serverTime=(new Date).setTime(1e3*i.b.Acc.timestamp),i.b.Time.localTimeDelta=i.b.Time.localTime-i.b.Time.serverTime,i.b.Time.localTimeDeltaAverage=i.b.Time.localTimeDelta,i.b.Time.localTimeRun=Date.now(),i.b.Time.pageDeltaRun=i.b.Time.localTimeRun-i.b.Time.localTime,(e=i.b.App.login?0:i.b.Option.get("delta",2))&&1200>Math.abs(i.b.Time.localTimeDeltaAverage-e)&&(i.b.Time.localTimeDeltaAverage=Math.floor((9*e+i.b.Time.localTimeDeltaAverage)/10)),i.b.Option.set("delta",i.b.Time.localTimeDeltaAverage),(e=(e=document.getElementById("bar"))?e.querySelector(".OGameClock"):null)&&(i.b.Time.status=1,i.b.Time.ogameTime=i.b.Time.parse(e.textContent).getTime(),i.b.Time.timeZoneDelta=-1e4*Math.round((i.b.Time.ogameTime-i.b.Time.serverTime)/1e4))},Run:function(){var e,t,a,n,o;(t=(e=document.getElementById("bar"))?e.querySelector(".OGameClock"):null)&&(i.b.Option.is("A31")&&i.b.Time.timeZoneDelta&&(i.b.Time.status=2,p.innerHTML(t,null,i.b.Time.format(i.b.Time.ogameTime,"[d].[m].[Y] <span>[H]:[i]:[s]</span>")),i.b.Option.is("A32")&&(i.b.Time.status=3,n=i.b.Time.format(i.b.Time.ogameTime,"[d].[m].[Y] [H]:[i]:[s]",!0)),t.title=i.b.Label.get("A38"),p.addClass(t,null,"tooltip"),(a=document.createElement("li")).setAttribute("style","float: right; color: #848484; font-weight: 700;"),a.textContent=t.title[0],p.after(t,a)),i.b.Option.is("A34")&&(o=(0<i.b.Time.localTimeDelta?" (+":" (-")+Math.floor(Math.abs(i.b.Time.localTimeDelta)/100)/10+(i.b.Label.is("KD0S")||"s")+")  "+i.b.Time.format(i.b.Time.ogameTime,"[H]:[i]:[s]")),(n||o)&&((t=document.createElement("div")).className="ago_clock",o&&((a=t.appendChild(document.createElement("span"))).textContent=o),n&&((a=t.appendChild(document.createElement("span"))).id="ago_clock_server",a.className="tooltip",a.title=i.b.Label.get("A39"),a.textContent=n),p.appendChild(e,t)))},Display:function(){var e;e=Date.now(),i.b.Time.duration=e-i.b.Time.localTime,i.b.Time.durationRun=i.b.Time.duration-i.b.Time.pageDeltaRun,3===i.b.Time.status&&(e=e-i.b.Time.localTimeDelta-i.b.Time.timeZoneDelta,p.setText("ago_clock_server","id",i.b.Time.format(e,"[d].[m].[Y] [H]:[i]:[s]",!0)))},timestamp:function(){return Math.floor(Date.now()/1e3)},timestampMinute:function(){return Math.floor((Date.now()-1381e9)/6e4)},getFinishTime:function(e){return(new Date).setTime(i.b.Time.ogameTime+i.b.Time.duration+1e3*(+e||0))},format:function(e,t,a){function n(e){return 0>e||9<e?e:"0"+e}return e?(!u.is(e)&&500<e&&(e=new Date(e)),1<i.b.Time.status&&!a&&e.setTime(e.getTime()+i.b.Time.timeZoneDelta),t||(t=(t=new Date).getFullYear()!==e.getFullYear()?"[d].[m].[Y] [H]:[i]:[s]":t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()?"[d].[m] [H]:[i]:[s]":"[H]:[i]:[s]"),t.split("[d]").join(n(e.getDate())).split("[m]").join(n(e.getMonth()+1)).split("[Y]").join(e.getFullYear()).split("[y]").join(e.getFullYear().toString().substr(2,4)).split("[H]").join(n(e.getHours())).split("[i]").join(n(e.getMinutes())).split("[s]").join(n(e.getSeconds()))):""},formatTimestamp:function(e,t){return 1e6<e?i.b.Time.format(1e3*e,t||"[d].[m].[Y] [H]:[i]:[s]",!0):""},formatTime:function(e,t){var a,n,o,r,s,l,c;return c=e,t&&(c-=31536e3*(n=Math.floor(c/86400/365)),c-=604800*(o=Math.floor(c/86400/7)),c-=86400*(r=Math.floor(c/86400))),c-=3600*(s=Math.floor(c/3600)),c-=60*(l=Math.floor(c/60)),t?(i.b.Time.formatTimeCacheCreate(),a=[],n&&a.push(n+i.b.Time.formatTimeCache.years),o&&a.push(o+i.b.Time.formatTimeCache.weeks),r&&a.push(r+i.b.Time.formatTimeCache.days),s&&3>a.length&&a.push(s+i.b.Time.formatTimeCache.hours),l&&3>a.length&&a.push(l+i.b.Time.formatTimeCache.minutes),c&&3>a.length&&a.push(c+i.b.Time.formatTimeCache.seconds),a.join(" ")):(0>s||9<s?s:"0"+s)+":"+(0>l||9<l?l:"0"+l)+":"+(0>c||9<c?c:"0"+c)},parseFormatedTime:function(e){var t,a,n,o=0;if(e)for(i.b.Time.formatTimeCacheCreate(),e=e.trim().split(" ").reverse(),n=0;n<e.length;n++)a=m.parseIntAbs(e[n]),(t=(e[n]||"").replace(/\d/g,"").trim())===i.b.Time.formatTimeCache.seconds&&0===n?o+=a:t===i.b.Time.formatTimeCache.minutes?o+=60*a:t===i.b.Time.formatTimeCache.hours?o+=3600*a:t===i.b.Time.formatTimeCache.days?o+=86400*a:t===i.b.Time.formatTimeCache.weeks?o+=604800*a:t===i.b.Time.formatTimeCache.years&&(o+=31536e3*a);return o},formatTimeCacheCreate:function(){i.b.Time.formatTimeCache||(i.b.Time.formatTimeCache={years:i.b.Label.is("KD0Y")||"y",weeks:i.b.Label.is("KD0W")||"w",days:i.b.Label.is("KD0D")||"d",hours:i.b.Label.is("KD0H")||"h",minutes:i.b.Label.is("KD0M")||"m",seconds:i.b.Label.is("KD0S")||"s"})},parseTime:function(e){return 3===(e="string"==typeof e?e.replace(/[^0-9:]/g,"").split(":"):[]).length?3600*(+e[0]||0)+60*(+e[1]||0)+(+e[2]||0):0},convertLocal:function(e,t){var a;return e&&1<i.b.Time.status?(t||(t="[d].[m].[Y] [H]:[i]:[s]"),(a=i.b.Time.parse(e,t))?i.b.Time.format(a,t):e||""):e||""},parse:function(e,t){t||(t="[d].[m].[Y] [H]:[i]:[s]"),e=e.toString();var a,n=t.match(/\[[dmyYHis]\]/g);if(!n||!n.length)return null;a=(a=(a=t.replace(/\./g,"\\.")).replace(/\//g,"\\/")).replace(/\-/g,"\\-");for(var o={},i=0;i<n.length;i++){var r=n[i];a="[Y]"===r?a.replace(r,"(\\d{4,4})"):"[y]"===r?a.replace(r,"(\\d{2,2})"):a.replace(r,"(\\d{1,2})"),o[r=r.substr(1,1)]=i+1}return(n=e.match(new RegExp(a,"")))&&n.length?((a=new Date).setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),n[o.s]&&a.setSeconds(n[o.s]),n[o.i]&&a.setMinutes(n[o.i]),n[o.H]&&a.setHours(n[o.H]),n[o.Y]?a.setFullYear(n[o.Y]):n[o.y]&&(i=a.getFullYear(),(i=100*Math.floor(i/100)+n[o.y])>a.getFullYear()&&(i-=100),a.setFullYear(i)),n[o.d]&&a.setDate(1),n[o.m]&&a.setMonth(n[o.m]-1),n[o.d]&&a.setDate(n[o.d]),a):null},parseDateTime:function(e,t){var a,n,o;return(e=g.check(e))&&((n=e.match(/([^\d:]|\b)\d{1,2}\.\d{1,2}(\.\d{2}|\.\d{4})*\s+\d{1,2}:\d{1,2}:\d{1,2}([^\d:]|\b)/))?(n=g.check(n[0]).replace(/[^\d:\.\s]/g,"").replace(/ +/g," ").trim().split(" "),a=g.check(n[0]).split("."),o=g.check(n[1]).split(":")):(n=e.match(/([^\d:]|\b)\d{1,2}:\d{1,2}:\d{1,2}([^\d:]|\b)/))&&(a=[],o=g.check(n[0]).replace(/[^\d:]/g,"").trim().split(":")),u.is(o)&&o.length&&24>o[0]&&60>o[1]&&60>o[2]&&((n=new Date).setMilliseconds(0),n.setSeconds(+o[2]||0),n.setMinutes(+o[1]||0),n.setHours(+o[0]||0),3===a.length&&(2e3<a[2]?n.setFullYear(+a[2]||0):100>a[2]&&((o=100*Math.floor(n.getFullYear()/100)+(+a[2]||0))>n.getFullYear()&&(o-=100),n.setFullYear(o))),2<=a.length&&(n.setDate(1),n.setMonth((+a[1]||0)-1),n.setDate(+a[0]||0)),1e9<(a=Math.floor(n.getTime()/1e3))))?t?a:n:0}},i.b.Task={Info:"galaxy system position type mission speed holdingtime expeditiontime union routine name detail detail2 preferCargo preferShip arrival metal crystal deuterium preferResource timeResource timeShip 202 203 204 205 206 207 208 209 210 211 212 213 214 215".split(" "),valid:function(e){return g.check(e).replace(/[\"\:]/g,"").trim()},create:function(e,t){var a,n={};for(e=e||{},a=0;15>=a;a++)n[i.b.Task.Info[a]]=10>a||12===a||15===a?+e[i.b.Task.Info[a]]||0:e[i.b.Task.Info[a]]||"";if(1<=t)for(a=16;20>=a;a++)n[i.b.Task.Info[a]]=+e[i.b.Task.Info[a]]||0;if(2<=t)for(a=21;35>=a;a++)n[i.b.Task.Info[a]]=+e[i.b.Task.Info[a]]||0;return n},splitActive:function(e,t,a,n){var o,r;if((o=u.split(e)).standard&&o[i.b.Acc.coordstype]){for(r in e=i.b.Task.split(o.standard,t,-1),t=i.b.Task.split(o[i.b.Acc.coordstype],t,-1))t[r]&&(e[r]=n||"string"==typeof t[r]?t[r]:Math.max(t[r],0));for(r in i.b.Task.updateCoords(e,a),e.resources=e.metal+e.crystal+e.deuterium,e.ships=0,i.b.Item.Ship)0<e[r]&&(e.ships+=e[r]);return e}return i.b.Task.split(o[i.b.Acc.coordstype]||o.standard,t,a)},split:function(e,t,a){var n,o;if(e={galaxy:+(n=g.check(e).split(":"))[0]||0,system:+n[1]||0,position:+n[2]||0,type:+n[3]||0,mission:+n[4]||0,speed:+n[5]||0,holdingtime:+n[6]||0,expeditiontime:+n[7]||0,union:+n[8]||0,routine:+n[9]||0,name:n[10]||"",detail:n[11]||"",detail2:+n[12]||0,preferCargo:n[13]||"",preferShip:n[14]||"",arrival:+n[15]||0},0<=a&&i.b.Task.updateCoords(e,a),1<=t&&(e.metal=+n[16]||0,e.crystal=+n[17]||0,e.deuterium=+n[18]||0,e.preferResource=+n[19]||0,e.timeResource=+n[20]||0,e.resources=e.metal+e.crystal+e.deuterium),2<=t)for(e.ships=0,e.shipsCivil=0,e.shipsCombat=0,e.timeShip=+n[21]||0,o=22;35>=o;o++)a=String(o+180),t=+n[o]||0,(e[a]=t)&&"212"!==a&&(e.ships+=t,a in i.b.Item.ShipCivil&&(e.shipsCivil+=t),a in i.b.Item.ShipCombat&&(e.shipsCombat+=t));return e},splitCoords:function(e){return{galaxy:+(e=g.check(e).split(":"))[0]||0,system:+e[1]||0,position:+e[2]||0}},join:function(e,t){var a,n;if(u.is(e)){if(a=[e.galaxy||"",e.system||"",e.position||"",e.type||"",e.mission||"",e.speed||"",e.holdingtime||"",e.expeditiontime||"",e.union||"",e.routine||"",e.name||"",e.detail||"",e.detail2||"",e.preferCargo||"",e.preferShip||"",e.arrival||""],1<=t&&(a[16]=e.metal||"",a[17]=e.crystal||"",a[18]=e.deuterium||"",a[19]=e.preferResource||"",a[20]=e.timeResource||""),2<=t)for(a[21]=e.timeShip||"",n=22;35>=n;n++)a[n]=e[String(n+180)]||"";return a.join(":")||""}return""},updateCoords:function(e,t,a){u.is(e)&&(!a&&i.b.Task.checkCoords(e.galaxy,e.system,e.position)?e.coords=e.galaxy+":"+e.system+":"+e.position:u.is(a)&&i.b.Task.checkCoords(a.galaxy,a.system,a.position)?(e.galaxy=a.galaxy,e.system=a.system,e.position=a.position,e.coords=e.galaxy+":"+e.system+":"+e.position):t&&(a||(a=e),2>=t?(e.galaxy=2===t?i.b.Acc.galaxy:0,e.system=2===t?i.b.Acc.system:0,e.position=2===t?i.b.Acc.position:0):(e.galaxy=m.isMinMax(a.galaxy,1,i.b.Uni.galaxies)?a.galaxy:3===t?i.b.Acc.galaxy:0,e.system=m.isMinMax(a.system,1,i.b.Uni.systems)?a.system:3===t?i.b.Acc.system:0,e.position=m.isMinMax(a.position,1,i.b.Uni.positions)?a.position:3===t?i.b.Acc.position:0),e.coords=1===t?"":e.galaxy+":"+e.system+":"+e.position),e.owncoords=i.b.Planets.owncoords(e.coords,e.type),e.coordstype=e.coords&&e.type?e.coords+":"+e.type:"")},updateCoordsType:function(e,t){var a;t=g.check(t),u.is(e)&&(a=t.split(":"),m.isMinMax(+a[3],1,3)&&(e.type=+a[3]||0),i.b.Task.checkCoords(+a[0],+a[1],+a[2])?(e.galaxy=+a[0]||0,e.system=+a[1]||0,e.position=+a[2]||0,e.coords=e.galaxy+":"+e.system+":"+e.position,e.coordstype=e.type?e.coords+":"+e.type:"",e.owncoords=i.b.Planets?i.b.Planets.owncoords(e.coords,e.type):0):(delete e.coords,delete e.coordstype,delete e.owncoords))},updateResources:function(e){u.is(e)&&(e.metal=+e.metal||0,e.crystal=+e.crystal||0,e.deuterium=+e.deuterium||0,e.resources=e.metal+e.crystal+e.deuterium,e.timeResource=+e.timeResource||1)},updateStandardUnits:function(e){u.is(e)&&(e.standardunits=i.b.Ogame.getStandardUnits(e,i.b.Option.get("B35",2)))},addResources:function(e,t){u.is(e)&&(u.is(t)&&t.timeResource?(u.iterate(i.b.Item.Resource,function(a){e[a]=(e[a]||0)+(t[a]||0)}),e.resources=e.metal+e.crystal+e.deuterium,e.timeResource=e.timeResource||-1):e.timeResource=e.timeResource?-1:0)},addShips:function(e,t){u.is(e)&&(u.is(t)&&t.timeShip?(e.shipsCivil=0,e.shipsCombat=0,u.iterate(i.b.Item.ShipCivil,function(a){e[a]=(e[a]||0)+(t[a]||0),e.shipsCivil+=e[a]}),u.iterate(i.b.Item.ShipCombat,function(a){e[a]=(e[a]||0)+(t[a]||0),e.shipsCombat+=e[a]}),e.ships=e.shipsCivil+e.shipsCombat,e.timeShip=e.timeShip||-1):e.timeShip=e.timeShip?-1:0)},updateShips:function(e){var t;if(u.is(e))for(t in e.ships=0,e.shipsCivil=0,e.shipsCombat=0,i.b.Item.Ship)e[t]&&"212"!==t?(e.ships+=e[t],t in i.b.Item.ShipCivil&&(e.shipsCivil+=e[t]),t in i.b.Item.ShipCombat&&(e.shipsCombat+=e[t])):e[t]=0},checkCoords:function(e,t,a){return 1<=e&&e<=i.b.Uni.galaxies&&1<=t&&t<=i.b.Uni.systems&&1<=a&&a<=i.b.Uni.positions},checkCoordsPart:function(e,t){return m.minMax(e,1,{galaxy:i.b.Uni.galaxies,system:i.b.Uni.systems,position:i.b.Uni.positions}[t]||0)},cutSystem:function(e){return"string"==typeof e?e.split(":",2).join(":"):""},cutCoords:function(e){return"string"==typeof e?e.split(":",3).join(":"):""},cutCoordsType:function(e){return"string"==typeof e?e.split(":",4).join(":"):""},parseTarget:function(e){var t,a,n={};return(e=g.check(e))&&((t=e.match(/([^\d:]|\b)t\s{0,2}\d{1,2}:\d{1,3}:\d{1,2}(:\d)*([^\d:]|\b)/i))&&t[0]&&(a=t[0],e=""),(t=e.match(/([^\d:]|\b)\d{1,2}\.\d{1,2}(\.\d{2}|\.\d{4})*([^\d:]|\b)/))&&t[0]&&(a=t[0]+" "+e.split(t[0])[1],e=e.split(t[0])[0]),(t=e.match(/([^\d:]|\b)\d{1,2}:\d{1,3}:\d{1,2}(:\d)*([^\d:]|\b)/))&&t[0]&&(a||(a=e.split(t[0])[1]),i.b.Task.updateCoordsType(n,t[0].replace(/[^\d:]/g,""))),a&&(n.time=i.b.Time.parseDateTime(a,!0))),n},trimCoords:function(e){var t,a;return(e=g.check(e))?(t=e.lastIndexOf("["),a=e.lastIndexOf("]"),e.slice(-1<t?t+1:0,-1<a?a:e.length).trim()):""}},i.b.Token={Info:{},Messages:function(e,t){"Action"===e&&i.b.Token.Action(t)},Init:function(e,t){u.is(e)&&(u.is(e.Info)?(i.b.Token.Data=e,i.b.Token.Info=e.Info):i.b.Token.Info=e),t&&(i.b.Token.getPlayerStatusList=null)},Action:function(e){u.is(e)&&(e.keyPlayer=i.b.App.keyPlayer,e.refresh="galaxy"===i.b.App.page,y.message("Token","Action",e,function(t){t&&t.changed&&(t.marked=e.marked,t.Data&&(i.b.Token.Data=t.Data,t.Data=null),i.b.Init.Messages("Panel","Action",t))}))},getPlayerStatus:function(e,t){var a,n,o,r,s,l;if(!i.b.Token.getPlayerStatusList)for(i.b.Token.getPlayerStatusList={},s=21;30>=s;s++)i.b.Token.Info[s]&&i.b.Token.Info[s].cls&&(i.b.Token.getPlayerStatusList["status_abbr_"+i.b.Token.Info[s].cls]=s);for(o=0,a=p.queryAll(e,t),l=0;l<a.length;l++)for(n=(a[l].className||"").split(" "),s=0;s<n.length;s++)(r=(n[s]||"").trim())&&(o=Math.max(i.b.Token.getPlayerStatusList[r],o));return o},getClass:function(e){return e&&i.b.Token.Info[e]?"status_abbr_"+(i.b.Token.Info[e].cls||e):""},getClassSelection:function(e){return 3>=e?"ago_selection_S"+e:"ago_selection_"+e},getClassSelected:function(e,t){return"ago_selected ago_selected_"+(3>=e?"S"+e:e)+(t?"_own":"")},getClassHover:function(e,t){return"ago_hover ago_hover_"+(3>=e?"S"+e:e)+(t?"_own":"")},getClassHighlight:function(e,t){return"ago_highlight ago_highlight_"+(3>=e?"S"+e:e)+(t?"_active":"")},getColor:function(e){return e&&i.b.Token.Info[e]&&i.b.Token.Info[e].color||""},getCondition:function(e){return e&&i.b.Token.Info[e]?i.b.Token.Info[e].condition:0},getLimit:function(e){return e&&i.b.Token.Info[e]?i.b.Token.Info[e].limit:0},getLabel:function(e){return e&&i.b.Token.Info[e]?i.b.Token.Info[e].name||i.b.Label.get("C"+e):""},valid:function(e){return e?(e+"").replace(/\|/g,""):""},getColorOpacity:function(e,t){var a;return e&&i.b.Token.Info[e]&&i.b.Token.Info[e].color?(a=+i.b.Token.Info[e].opacity||(80>e?i.b.Option.get("CT2",2):i.b.Styles.opacity)||100,"INHERIT"===i.b.Token.Info[e].color?a/100:d.color(i.b.Token.Info[e].color,t?2*a:a)):""}},i.b.Fleet={Data:{},Task:{},Next:{},Init:function(e){i.b.Fleet.Data=e||{},i.b.Fleet.Data.Current=i.b.Data.getStorage(i.b.App.keyPlayer+"_Fleet_Current","JSON")},Content:function(e,t,a,n){t=u.parse(n),"fetcheventbox"===e?"friendly"in t&&(i.b.Fleet.Set("Current","fleets",+t.friendly||0),i.b.Init.Messages("Panel","updateTab",{tab:"Flights"})):"minifleet"===e&&t.response&&("slots"in t.response&&(i.b.Fleet.Set("Current","fleets",+u.get(t.response,"slots")||0),i.b.Init.Messages("Panel","updateTab",{tab:"Flights"})),i.b.Init.Messages("Page","sendShips",{mode:"finish",success:t.response.success}))},Set:function(e,t,a){e&&i.b.Fleet.Data[e]&&(t="string"==typeof t?u.createKey(t,a):t,u.iterate(t,function(a){i.b.Fleet.Data[e][a]=t[a]}),"Current"===e?i.b.Data.setStorage(i.b.App.keyPlayer+"_Fleet_Current",i.b.Fleet.Data.Current):y.message("Fleet","Set",{tab:e,data:t}))},Get:function(e,t,a){return e=e&&i.b.Fleet.Data[e]&&(t||0===t)?i.b.Fleet.Data[e][t]:"",6===a?g.check(e):+e||0}},i.b.DataBase={status:0,enabled:!1,Data:{},Info:{Player:"D36",Universe:"D37"},Messages:function(e,t){"Notify"===e&&i.b.DataBase.Notify(t)},Init:function(e){i.b.DataBase.Data=u.is(e)?e:{},i.b.DataBase.status=i.b.DataBase.Data.status||0,i.b.DataBase.enabled=1===i.b.DataBase.Data.status},Notify:function(e){var t;u.is(e)&&(t=i.b.DataBase.Info[e.tab])&&("loading"in e?i.b.Notify.set(t,3," "+e.loading+" %"):(i.b.DataBase.Init(e),i.b.Notify.set(t,4," ("+u.get(i.b.DataBase.Data[e.tab],"entries")+")")))}},i.b.Tools={List:["A","B","C","D","E","F",1,2,3,4,5,6,7,8,9],Messages:function(e,t){"Action"===e&&i.b.Tools.Action(t)},Action:function(e){e&&(e.keyPlayer=i.b.App.keyPlayer,e.planetId=i.b.Acc.planetId,e.coords=i.b.Acc.coords,e.coordstype=i.b.Acc.coordstype,e.type=i.b.Acc.type,e.planetName=i.b.Acc.planetName,e.Planets={},i.b.Planets.iterate(1,function(t,a){e.Planets[a]={name:t.name,temp:t.temp}}),y.message("Tools","Action",e,function(t){var a;t&&t.href&&((a=document.getElementById("ago_tools_send")||document.body.appendChild(document.createElement("a"))).id="ago_tools_send",a.href=t.href,a.style.display="none",a.target=e.shiftKeys||i.b.Option.is("T01")?"_blank":"ago_tools_"+t.id,p.click(a))}))}},i.b.Jumpgate={updateCooldownStatus:0,Messages:function(e,t){"Continue"===e&&i.b.Jumpgate.Continue(t)},Unload:function(e){e&&e.target&&"DIV"===e.target.nodeName&&-1<(e.target.className||"").indexOf("ui-dialog")&&(i.b.Jumpgate.Timer=null,i.b.Init.Messages("Planets","Action",{mode:"select"}))},onKeydown:function(e,t){if(13===e.keyCode)return document.activeElement.blur(),p.click(".secondcol input.btn_blue",t),!1;if(65===e.keyCode)return p.click(".secondcol #sendall",t),!1;if(77===e.keyCode)return p.click(".secondcol #sendmost",t),!1;if(81===e.keyCode)return p.click(".secondcol .send_none a",t),!1;if(38===e.keyCode||40===e.keyCode){if(11===e.inputType&&e.target.id&&i.b.Item.Ship[g.check(m.parseIntAbs(e.target.id))])return p.changeInput(e,e.target)}else if(112<=e.keyCode&&123>=e.keyCode&&i.b.Option.is("U32")&&!e.cached)return i.b.Jumpgate.Action(i.b.Planets.GetByIndex(e.keyCode-111,"moon",6)),!1;return!0},Content:function(e){function t(e,t){var n,o;(n=p.appendTR(e,"tooltip")).addEventListener("click",a,!1),(o=p.appendTD(n,"ago_jumpgate_settings_name tooltip",t,10)).title=o.textContent,o=p.appendTD(n,"ago_jumpgate_settings_status"),p.append(o,"input",{id:"ago_jumpgate_settings_status_"+t,type:"checkbox",rel:t})}function a(e){var t,a;e&&e.currentTarget&&(t=e.currentTarget.querySelector("input"),a=p.getAttribute(t,null,"rel"),t&&a&&("INPUT"!==e.target.nodeName&&(t.checked=!t.checked),i.b.Option.set(a,t.checked?1:0,1),i.b.Global.message({role:"Data",data:{G33:i.b.Option.is("G33"),G34:i.b.Option.is("G34")}})))}function n(e){e&&i.b.Init.Messages("Panel","hover","mouseover"===e.type)}var o,r,s,l;if(e=e?e.querySelector("#jumpgate"):null,i.b.Option.is("G30")&&!i.b.App.OgameMobile&&p.updateAttribute(e,null,"ago-status",1,8)){for(i.b.Option.is("G31")&&p.addClass(e,null,"ago_jumpgate_improve"),i.b.Jumpgate.Mini=i.b.Task.splitActive(i.b.Option.get("G38",-1),2,-1),i.b.Jumpgate.Maxi={},o=e.querySelectorAll(".ship_selection_table .ship_txt_row > a"),l=0;l<o.length;l++)(s=g.check(p.getAttribute("img",o[l],"class",3)))&&(i.b.Jumpgate.Maxi[s]=p.getText(".quantity",o[l].parentNode,3)),p.appendChild(o[l],o[l].parentNode.children[1]);if(o={planet:i.b.Acc.planetId,tabs:["Ship"],data:u.create(i.b.Jumpgate.Maxi)},y.message("Units","Action",{list:[o]}),s=p.appendSPAN(null,"float_left send_most"),p.appendA(s,{id:"sendmost",class:"tooltip",title:i.b.Label.get("F37")},{click:i.b.Jumpgate.setMostShips}),p.after(e.querySelector(".secondcol .send_all"),s),i.b.Jumpgate.Target=[],(o=e.querySelector('#jumpgateForm select[name="zm"]'))&&o.options){for(l=0;l<o.options.length;l++)s=i.b.Task.trimCoords(o.options[l].textContent),s=i.b.Planets.GetByCoords(s,"index")||80+i.b.Jumpgate.Target.length,i.b.Jumpgate.Target[s]={value:o.options[l].value,text:o.options[l].textContent};i.b.Option.is("G32")&&((s=document.createElement("option")).value="none",s.textContent=" - ",p.prependChild(o,s),e.querySelector("#jumpgateDefaultTargetSelectionForm option[selected]")||(o.selectedIndex=0)),o.onchange=i.b.Jumpgate.Display}i.b.Jumpgate.Target.length?(i.b.Option.is("G31")&&(p.setStyleDisplay("#jumpgate h4",e),p.setStyleDisplay("#selecttarget > .fright",e),(r=p.appendTABLE(null,{id:"ago_jumpgate_target"},{width:"378px"},[20,60,90,26,24,90,65])).addEventListener("click",i.b.Jumpgate.clickTarget,!1),r.addEventListener("dblclick",i.b.Jumpgate.clickTarget,!1),i.b.Planets.iterate(3,function(e,t){if(t&&(i.b.Jumpgate.Target[e.index]||t===i.b.Acc.planetId||1e3<i.b.Fleet.Get("Cooldown",t,2))){var a,o=r,s=e.index;a=i.b.Jumpgate.Target[s]?i.b.Token.getClassHover(3,"own"):i.b.Planets.Get("active","index")===s?i.b.Token.getClassHighlight(3)+" ago_color_palered":"ago_color_palered",o=p.appendTR(o,a,{role:"Task",data:t}),s=i.b.Option.isAnd("U31","U32")?s:"",p.appendTD(o,"ago_jumpgate_target_shortkey",s),p.appendTD(o,"",i.b.Planets.Data[t].coords),p.appendTD(o,"ago_jumpgate_target_name",i.b.Planets.Data[i.b.Planets.Data[t].planet].name),s=p.appendTD(o),p.appendSPAN(s,"ago_jumpgate_cooldown"),s=p.appendTD(o),p.appendIMG(s,i.b.Planets.Data[t].img,"16px"),p.appendTD(o,"ago_jumpgate_target_name",i.b.Planets.Data[t].name),(s=p.appendTD(o,{class:"ago_jumpgate_target_ships ago_color_normal","ago-data-change":JSON.stringify({page:"Panel",role:"hover"})},"-")).addEventListener("mouseover",n,!1),s.addEventListener("mouseout",n,!1)}}),p.prependChild(e.querySelector("#selecttarget"),r),t(r=p.appendTABLE(null,"ago_jumpgate_settings ago_color_normal",{width:"215px"},[175,25]),"G34"),t(r,"G35"),p.after(e.querySelector("#selecttarget > .fright"),r),y.message("Units","List",{action:"summarized"},function(e){var t,a;for(t=document.querySelectorAll("#ago_jumpgate_target > tr"),l=0;l<t.length;l++)a=p.getAttribute(t[l],null,"ago-data",-2).data,u.get(e[a],"timeShip")&&p.updateText("td.ago_jumpgate_target_ships",t[l],u.get(e[a],"ships"),2)}),i.b.Jumpgate.updateCooldown(!0),i.b.Jumpgate.Timer=i.b.Jumpgate.updateCooldown),i.b.Global.message({role:"Jumpgate"}),e.parentNode.parentNode.addEventListener("DOMNodeRemoved",i.b.Jumpgate.Unload,!1),i.b.Jumpgate.Display(),i.b.Global.message({role:"Data",data:{G33:i.b.Option.is("G33"),G34:i.b.Option.is("G34")}}),p.addEventsAll("#jumpgate .send_none a",null,{click:i.b.Jumpgate.Display}),p.disableActiveElement(),p.disableAutocomplete()):(r=document.querySelector("#jumpgateNotReady #cooldown"))&&(e=i.b.Time.parseFormatedTime(r.textContent))&&i.b.Fleet.Set("Cooldown",i.b.Planets.GetId("active"),i.b.Time.timestamp()-Math.ceil(i.b.Ogame.getJumpgateCooldown(i.b.Planets.GetId("active")))+e)}e=o=r=o=s=null},updateCooldown:function(e){var t,a,n,o=0;if(e||-4<i.b.Jumpgate.updateCooldownStatus){for(e=document.querySelectorAll("#ago_jumpgate_target > tr"),a=0;a<e.length;a++)t=p.getAttribute(e[a],null,"ago-data",-2).data,1e5<(n=i.b.Fleet.Get("Cooldown",i.b.Planets.GetId(t),2))&&(0<=(n=i.b.Ogame.getJumpgateCooldown(i.b.Planets.GetId(t))-(i.b.Time.timestamp()-n))&&(o++,t=e[a].getElementsByClassName("ago_jumpgate_cooldown")[0],60>=n&&p.updateClass(t,null,"ago_jumpgate_cooldown ago_jumpgate_cooldown_seconds"),n=60<n?Math.ceil(n/60):Math.floor(n),p.updateText(t,null,Math.floor(n))));i.b.Jumpgate.updateCooldownStatus=o||i.b.Jumpgate.updateCooldownStatus-1}},Continue:function(e){var t,a,n,o;if((t=document.getElementById("jumpgate"))&&e){for((a={})[i.b.Planets.GetId(e)]=i.b.Time.timestamp(),a[i.b.Planets.GetId("active")]=i.b.Time.timestamp(),i.b.Fleet.Set("Cooldown",a),a={},t=t.querySelectorAll(".ship_selection_table td.ship_input_row > input"),n=0;n<t.length;n++)(o=m.parseIntAbs(t[n].id))&&(a[o]=m.parseIntAbs(t[n].value));e=[{planet:i.b.Acc.planetId,tabs:["Ship"],action:"remove",data:a},{planet:e,tabs:["Ship"],action:"add",data:a}],y.message("Units","Action",{list:e})}},setMostShips:function(){var e,t,a={};i.b.Units.activeResources(i.b.Jumpgate.Maxi),u.iterate(i.b.Jumpgate.Maxi,function(e){a[e]=Math.max(i.b.Jumpgate.Maxi[e]-(+i.b.Jumpgate.Mini[e]||0),0)}),i.b.Option.is("G35")&&(e=Math.ceil(i.b.Jumpgate.Maxi.resources/i.b.Ogame.getShipCapacity("203")),t=0<(t=Math.max(e-(+i.b.Jumpgate.Maxi[203]||0),0))?5*t:0,e>(i.b.Jumpgate.Mini[203]||0)&&(a[203]=Math.max(i.b.Jumpgate.Maxi[203]-e,0)),t>(i.b.Jumpgate.Mini[202]||0)&&(a[202]=Math.max(i.b.Jumpgate.Maxi[202]-t,0))),i.b.Global.message({role:"setMostShips",data:a})},clickTarget:function(e){var t;e&&e.target&&(t=p.getAttributeParent(e.target,null,"ago-data",-2,2),u.copy(p.getAttributeParent(e.target,null,"ago-data-change",-2,1),t),"dblclick"===e.type?i.b.Option.is("U34")&&p.click("#jumpgate .secondcol input.btn_blue"):"Panel"===t.page?(e=i.b.Planets.Get(t.data,"coordstype",6))&&(i.b.Init.Messages("Panel","Display",{tab:"Account",data:e}),i.b.Init.Messages("Panel","hover",!0)):"Task"===t.role&&i.b.Jumpgate.Action(t.data))},Action:function(e){var t;(t=document.getElementById("jumpgate"))&&e&&(e=t.querySelector('select[name="zm"] option[value="'+e+'"]'))&&p.setValue(e.parentNode,null,e.value,0,"change")},Display:function(){var e,t,a,n;(e=document.getElementById("jumpgate"))&&((t=p.getSelectedNode(e.querySelector('select[name="zm"]')))&&(((n=i.b.Planets.Get(+t.value,"coords",6))||"none"===t.value)&&(a=e.querySelector("#selecttarget .dropdown > a"),p.updateAttribute(a,null,"data-value",t.value),p.updateText(a,null,t.textContent),i.b.Init.Messages("Planets","Action",{mode:"select",coords:n,type:3})),i.b.Option.is("G31")&&(p.iterate(e.querySelectorAll("#ago_jumpgate_target tr"),function(e){p.removeClassGroup(e,null,"ago_selected")}),+t.value&&p.setClassGroup('#ago_jumpgate_target tr[ago-data*="'+t.value+'"]',e,"ago_selected",i.b.Token.getClassSelected(3,!0)))),p.setProperty("#ago_jumpgate_settings_status_G34",e,"checked",i.b.Option.is("G34")),p.setProperty("#ago_jumpgate_settings_status_G35",e,"checked",i.b.Option.is("G35"))),e=a=t=null}},i.b.Phalanx={Messages:function(e,t){i.b.dummy=e+t},Overlay:function(e){var t;e&&(t=e.parentNode.querySelector(".ui-dialog-title"))&&(i.b.Phalanx.coords=i.b.Task.trimCoords(t.textContent),i.b.Option.is("E21")&&!i.b.App.OgameMobile&&(t.style.paddingRight="46px",(t=p.appendSPAN(t.parentNode,"ago_display_arrow")).addEventListener("click",i.b.Phalanx.toggleDisplay,!1),e.parentNode.setAttribute("ago_display_status",i.b.Option.get("E23",2))))},Content:function(e){var t,a,n,o,r,s;if(i.b.Phalanx.Data={},e=e?e.querySelector("#phalanxWrap"):null,i.b.Option.is("E20")&&e&&!e.getAttribute("ago-status")&&!i.b.App.OgameMobile){for(e.setAttribute("ago-status",1),t=e.querySelectorAll("div.eventFleet > ul, div.partnerInfo > ul"),i.b.Option.is("E21")&&p.addClass(e,null,"ago_phalanx_improve"),s=0;s<t.length;s++)o=n=0,r=g.check(m.parseIntAbs(t[s].parentNode.id)),2===(a=m.parseIntAbs(t[s].parentNode.getAttribute("data-mission-type")))&&(o=1,d.hasClass(t[s].parentNode.className,"partnerInfo")&&(o=(n=g.check(m.parseIntAbs(t[s].parentNode.className)))===r?2:3,r="F"+r)),i.b.Phalanx.Data[r]={arrival:m.parseIntAbs(t[s].parentNode.getAttribute("data-arrival-time")),mission:a,union:n||"",unionType:o||0,reverse:"true"===t[s].parentNode.getAttribute("data-return-flight")},i.b.Phalanx.parseRow(t[s],i.b.Phalanx.Data[r]),1!==i.b.Phalanx.Data[r].unionType&&i.b.Phalanx.createDetails(t[s],i.b.Phalanx.Data[r]),t[s].addEventListener("click",i.b.Phalanx.click,!1);for(r in i.b.Phalanx.Data)1===i.b.Phalanx.Data[r].unionType&&i.b.Phalanx.createDetails(e.querySelector("div#eventRow-"+r+" > ul"),i.b.Phalanx.Data[r])}},parseRow:function(e,t){var a,n,o;for(o=0;o<e.children.length;o++)if(a=e.children[o],n=e.children[o].className,d.hasClass(n,"countDown"))(n=a.querySelector("span"))&&(p.addClass(n,null,d.classMission(t.mission)),p.addClass(n,null,"ago_panel_add"),t.fleetType=d.hasClass(n.className,"neutral")?2:d.hasClass(n.className,"hostile")?1:t.reverse?4:3,2===t.unionType&&(n.textContent=i.b.Label.get("E28")));else if(d.hasClass(n,"arrivalTime"))n=(a.textContent||"").split(" ")[0],a.textContent=i.b.Time.convertLocal(n,"[H]:[i]:[s]");else if(d.hasClass(n,"descFleet"))t.descFleet=(a.textContent||"").trim(),2<=t.unionType&&(a.textContent="");else if(d.hasClass(n,"missionFleet"))t.missionName=p.getText("span",a);else if(d.hasClass(n,"originFleet"))1===t.unionType?a.textContent=t.descFleet:(n=a.querySelector("figure"))&&(t.typeOrigin=d.hasClass(n.className,"moon")?3:d.hasClass(n.className,"tf")?2:1);else if(d.hasClass(n,"coordsOrigin"))(n=a.querySelector("a"))&&(t.coordsOrigin=i.b.Task.trimCoords(n.textContent),t.owncoordsOrigin=i.b.Planets.owncoords(t.coordsOrigin,t.typeOrigin),t.owncoordsOrigin?(p.addClass(n,null,i.b.Token.getClassSelection(t.typeOrigin)),3<=t.owncoordsOrigin&&p.extendClass(a,null,i.b.Token.getClassHighlight(t.typeOrigin))):t.coordsOrigin===i.b.Phalanx.coords&&p.addClass(n,null,"ago_color_blue"));else if(d.hasClass(n,"detailsFleet")){if((n=a.querySelector("span"))&&1!==t.unionType){a=t;var r=void 0,s=void 0,l=s=void 0;if(n=n.title){for(r=n.split("<td>"),l=1;l<r.length;l++)s=(r[l].split("</td>",1)[0]||"").replace(/\:/g,"").trim(),(s=i.b.Item.getByName(s))&&(a[s]=m.parseIntAbs(r[l].split(">",3)[2]),a[s]&&2<=a.unionType&&i.b.Phalanx.Data[a.union]&&(i.b.Phalanx.Data[a.union][s]=(i.b.Phalanx.Data[a.union][s]||0)+a[s]));"metal"in a?i.b.Task.updateResources(a):a.resources=-1,i.b.Task.updateShips(a)}}}else d.hasClass(n,"destFleet")?(n=a.querySelector("figure"))&&(t.type=d.hasClass(n.className,"moon")?3:d.hasClass(n.className,"tf")?2:1):d.hasClass(n,"destCoords")&&(n=a.querySelector("a"))&&(t.coords=i.b.Task.trimCoords(n.textContent),t.owncoords=i.b.Planets.owncoords(t.coords,t.type),t.owncoords?(p.addClass(n,null,i.b.Token.getClassSelection(t.type)),3<=t.owncoords&&p.extendClass(a,null,i.b.Token.getClassHighlight(t.type))):t.coords===i.b.Phalanx.coords&&p.addClass(n,null,"ago_color_blue"))},createDetails:function(e,t){var a,n;i.b.Option.is("E21")&&e&&((a=document.createElement("li")).className="ago_phalanx_activity",1===t.fleetType?p.appendIMG(a,"/cdn/img/galaxy/activity15.gif"):2===t.fleetType&&(t.owncoords?p.appendIMG(a,"/cdn/img/galaxy/activity.gif"):t.owncoordsOrigin||1===t.unionType||(a.textContent=t.descFleet[0],a.title=t.descFleet,a.className+=" tooltip")),p.prependChild(e,a),a=document.createDocumentFragment(),n=p.appendDIV(a,"ago_phalanx_left"),2>t.unionType&&p.appendSPAN(n,d.classMission(t.mission),t.missionName),function(e,t){function a(e,t,a,n){e=p.appendTD(e),t&&a&&(p.appendSPAN(e,"ago_phalanx_label",t,n),0>a?p.appendTEXT(e,"-----"):p.appendTEXT(e,a,2))}var n,o,r,s,l;for(r=i.b.Option.is("E22")?12:11,s={ShipCivil:[],ShipCombat:[],Resource:[]},n=e.appendChild(document.createElement("table")),a(o=p.appendTR(n),"I28",t.shipsCivil||"0",10),a(o,"I29",t.shipsCombat||"0",10),a(o,"I27",t.resources||"0",10),u.iterate(s,function(e){u.iterate(i.b.Item[e],function(a){0<t[a]&&s[e].push(a)})}),l=0;9>l&&(s.ShipCivil[l]||s.ShipCombat[l]||s.Resource[l]);l++)a(o=p.appendTR(n),s.ShipCivil[l],t[s.ShipCivil[l]],r),a(o,s.ShipCombat[l],t[s.ShipCombat[l]],r),a(o,s.Resource[l],t[s.Resource[l]],r);n=o=null}(n=p.appendDIV(a,"ago_phalanx_fleet"),t),n=p.appendDIV(a,"ago_phalanx_right"),e.parentNode.appendChild(a),a=a=n=null)},toggleDisplay:function(e){var t;e.target&&(e=document.getElementById("phalanxWrap"))&&(t="1"===e.parentNode.parentNode.parentNode.getAttribute("ago_display_status")?2:1,e.parentNode.parentNode.parentNode.setAttribute("ago_display_status",t),i.b.Option.set("E23",t,2))},click:function(e){var t;e&&e.target&&(d.hasClass(e.target.parentNode.className,"countDown")||d.hasClass(e.target.className,"countDown"))&&(e=m.parseIntAbs(e.target.id),e=i.b.Phalanx.Data[e])&&((t={action:"set",tab:"Target",marked:2,token:81,time:e.arrival}).coords=e.reverse?e.coordsOrigin+":"+e.typeOrigin:e.coords+":"+e.type,i.b.Init.Messages("Token","Action",t))}},i.b.Techtree={Messages:function(e,t){i.b.dummy=e+t},Content:function(e){(e=e?e.querySelector("div.techtree"):null)&&!e.hasAttribute("ago-status")&&e.setAttribute("ago-status",1)}},i.b.Buddies={Messages:function(e,t){i.b.dummy=e+t},Content:function(e){var t,a;if((e=e?e.querySelector("#buddylist"):null)&&p.updateAttribute(e,null,"ago-status",1,8)&&i.b.Option.is("D20"))for(e=e.querySelectorAll("tr"),a=0;a<e.length;a++)(t=m.parseIntAbs(g.getParameter("to",p.getAttribute('a[href*="page=writemessage"]',e[a],"href"))))&&(t={page:"Panel",role:"Action",data:{mode:"set",tab:"Player",token:81,id:t,coords:i.b.Task.trimCoords(p.getText("td:nth-child(6) a",e[a])),name:i.b.Task.valid(p.getText("td:nth-child(2) span",e[a]))}},p.set(e[a],null,null,null,{click:i.b.Buddies.click}),p.addClass("td:nth-child(2)",e[a],"ago_action"),p.setData("td:nth-child(2)",e[a],t))},click:function(e){e&&e.target&&e.currentTarget&&(e=p.getData(e.target,null,2),i.b.Init.Messages(e.page,e.role,e.data))}},i.b.Notices={Messages:function(e,t){i.b.dummy=e+t},Content:function(e){(e=e?e.querySelector("#notizen"):null)&&!e.hasAttribute("ago-status")&&e.setAttribute("ago-status",1)}},i.b.Search={Messages:function(e,t){i.b.dummy=e+t},Content:function(e,t,a,n,o){if(t=+g.getParameter("method",o)||0,(e=e?e.querySelector(".searchresults"):null)&&p.updateAttribute(e,null,"ago-status",1,8)&&(2===t||3===t)&&i.b.Option.is("D20"))for(e=e.querySelectorAll("tr"),n=0;n<e.length;n++)(o=m.parseIntAbs(g.getParameter("to",p.getAttribute(".action a",e[n],"href"))))&&(t=i.b.Task.valid(p.getText("td.userName",e[n])),a=i.b.Task.trimCoords(p.getText("td.position a",e[n])),p.set(e[n],null,null,null,{click:i.b.Search.click}),o={message:{page:"Token",role:"Action",data:{action:"set",tab:"Player",token:81,id:o,name:t,coords:a}}},p.addClass("td.userName",e[n],"ago_action"),p.setData("td.userName",e[n],o),o={message:{page:"Token",role:"Action",data:{action:"set",tab:"Target",token:81,name:t,coords:a}}},p.setData("td.position",e[n],o))},click:function(e){e&&e.target&&((e=p.getData(e.target,null,2)).message&&i.b.Init.Messages(e.message.page,e.message.role,e.message.data))}},i.b.ShareReport={Buddies:[],isLoaded:0,isDone:0,Overlay:function(e){i.b.ShareReport.getBuddies().then(i.b.ShareReport.getAlliance).then(function(){i.b.ShareReport.Display(e)}),p.addObserver(e,{childList:!0},function(t){t.forEach(function(t){t.addedNodes.length&&(i.b.ShareReport.isLoaded=1,i.b.ShareReport.Display(e))})})},Display:function(e){i.b.ShareReport.isDone&&i.b.ShareReport.isLoaded&&i.b.ShareReport.Buddies.forEach(function(t){$(e).find("#selectNew").append($("<option>",{value:t,text:t}))})},getBuddies:function(){var e=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post("index.php?page=buddies");case 2:t=e.sent,$(t).find(".player").each(function(e,t){i.b.ShareReport.Buddies.push(t.textContent)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAlliance:function(){var e=s(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post("index.php?page=allianceOverview",{ajax:1});case 2:t=e.sent,$(t).find("table.members tbody tr td:first-child span").each(function(e,t){var a=t.textContent.split("(")[0].replace(/\s{2,}/g,"").trim();-1===i.b.ShareReport.Buddies.indexOf(a)&&i.b.ShareReport.Buddies.push(a)}),i.b.ShareReport.isDone=1;case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},-1<window.navigator.userAgent.indexOf("Firefox")?(i.b.isFirefox=!0,i.b.isPhone=-1<window.navigator.userAgent.indexOf("Mobile"),i.b.isTablet=-1<window.navigator.userAgent.indexOf("Tablet"),i.b.isMobile=i.b.isPhone||i.b.isTablet):-1<window.navigator.userAgent.indexOf("Chrome")&&(i.b.isChrome=!0),-1<window.navigator.userAgent.indexOf("OPR/")&&(i.b.isOpera=!0),i.b.context=0,i.b.Page={Messages:function(e,t){i.b.dummy=e+t}};var f={},y={message:function(e,t,a,n){a&&(a.keyPlayer=i.b.App.keyPlayer,"function"==typeof n?chrome.runtime.sendMessage("",{page:e,role:t,para:a},null,n):chrome.runtime.sendMessage("",{page:e,role:t,para:a}))},Resource:function(e){var t;if(e=g.check(e))try{return(t=new XMLHttpRequest).open("GET",chrome.extension.getURL(e),!1),t.overrideMimeType("text/plain"),t.send(null),t.responseText||""}catch(e){}return""},Log:function(e,t){(i.b.App.beta||t)&&console.log("AntiGameReborn:  "+e)}};i.b.Init={status:0,active:!1,KeydownCache:[],timing:Date.now(),loop:0,Messages:function(e,t,a){(i.b.Init.status||"Continue"===t)&&(Array.isArray(e)&&(e=-1<e.indexOf(i.b.App.Page)?i.b.App.Page:""),"Init"===e?"Timer"===t?window.setTimeout(i.b.Init.Timer,0):"Content"===t?i.b.Init.Content(a):"Ready"===t?i.b.Init.Ready():"Tooltip"===t&&i.b.Init.Tooltip(a):e&&i.b[e]&&"function"==typeof i.b[e].Messages&&i.b[e].Messages(t,a))},Start:function(){window.console.log("waliwaliwanka"),i.b.Init.status=0,document.location&&document.location.href&&document.documentElement?(i.b.App.Start(),20<i.b.Notify.problem?document.addEventListener("DOMContentLoaded",i.b.Main.Run,!1):i.b.App.mode&&(i.b.Init.status=1,i.b.Init.active=document.hasFocus(),i.b.Observer.Start(),i.b.App.reload?i.b.Observer.Head(function(){i.b.App.Init(),i.b.Init.Init()}):(i.b.Option.Start(),i.b.Styles.Start(),i.b.Option.is("O04")&&(document.title=i.b.App.title),i.b.Observer.Head(function(){i.b.App.Init(),i.b.Styles.Init()}),i.b.Init.Init()))):300>++i.b.Init.loop&&window.setTimeout(i.b.Init.Start,i.b.Init.loop)},Init:function(){y.message("App","Start",{page:i.b.App.page,mode:i.b.App.mode,keyCom:i.b.App.keyCom,keyUni:i.b.App.keyUni,keyPlayer:i.b.App.keyPlayer,accountId:i.b.App.playerId,abbrCom:i.b.Uni.lang,abbrUni:i.b.Uni.abbr,urlUni:i.b.Uni.url,reload:i.b.App.reload},function(e){i.b.Observer.Head(function(){e&&i.b.App.mode&&1===i.b.Init.status&&(i.b.Init.status=2,i.b.App.reload=i.b.App.reload||e.reload,i.b.App.Page=e.Page,i.b.Background.Data=e.Background||{},i.b.Label.Init(e.Label),3<=i.b.App.mode&&e.keyPlayer===i.b.App.keyPlayer&&(u.copy(e.App,i.b.App),u.copy(e.Uni,i.b.Uni),i.b.Data.Init(),i.b.Option.Init(e.Option),i.b.Item.Init(e.Item),i.b.Panel.Init(e.Panel),i.b.DataBase.Init(e.DataBase),i.b.Box.Init(e.Box),i.b.Token.Init(e.Token),i.b.Units.Init(e.Units),i.b.Fleet.Init(e.Fleet),i.b.App.reload&&i.b.App.Save(),i.b.App.upgradeAvailable=m.parseVersion(i.b.App.versionAGO)<m.parseVersion(i.b.App.versionUpdate)),e=null,i.b.Observer.Body(i.b.Init.Read,i.b.isChrome&&3<=i.b.App.mode))})},i.b.context)},Read:function(){2===i.b.Init.status&&(i.b[i.b.App.Page]?(i.b.Init.status=4,f=i.b.Page=i.b[i.b.App.Page],i.b.App.Ogame&&(i.b.Styles.Load(),i.b.Planets.Read(),i.b.Planets.status&&(i.b.App.mode=5,i.b.App.OgameMain=!0,i.b.Time.Read(),i.b.Units.Read(),i.b.Main.Read(),"function"==typeof f.Read&&f.Read())),i.b.Init.Run()):100>++i.b.Init.loop&&(y.Log("Init - Read - waiting for page script - loaded "+i.b.App.Page,!0),window.setTimeout(i.b.Init.Read,i.b.Init.loop)))},Run:function(){4===i.b.Init.status&&(i.b.Init.status=5,i.b.App.OgameMain&&(i.b.Units.Run(),i.b.Planets.Run(),i.b.Time.Run(),i.b.Events.Run(),"function"==typeof f.Run&&f.Run(),i.b.Panel.Run(),i.b.Notify.Run(),i.b.Main.Run()),i.b.Observer.Interactive(i.b.Init.Interactive))},Interactive:function(){5===i.b.Init.status&&(i.b.Init.status=6,i.b.Global.Interactive(),"function"==typeof f.Interactive&&f.Interactive(),i.b.App.Ogame?(i.b.Observer.mutationObject=p.addObserver(document.body,{childList:!0},i.b.Observer.Mutation),i.b.Global.message({role:"Ready"}),i.b.App.OgameMain&&(i.b.App.reload&&(i.b.Label.Update(),i.b.Units.Update()),y.message("App","Update",{reload:i.b.App.reload}),i.b.Notify.set("Notify"))):window.setTimeout(i.b.Init.Ready,20))},Ready:function(){6===i.b.Init.status&&(i.b.Init.status=7,i.b.App.OgameMain&&i.b.Events.Ready(),"function"==typeof f.Ready&&f.Ready(),i.b.Option.is("U31")&&u.iterateArray(i.b.Init.KeydownCache,i.b.Init.onKeydown),i.b.App.Ogame&&(p.disableActiveElement(),p.disableAutocomplete()),window.setTimeout(i.b.Init.Complete,1))},Complete:function(){7===i.b.Init.status&&(!i.b.App.OgameMain||i.b.Units.status?(i.b.Init.status=8,"function"==typeof f.Complete&&f.Complete(),i.b.App.OgameMain&&(i.b.Main.Complete(),i.b.App.beta&&p.setStyleColor("playerName","id",i.b.App.reload?"#FF9600":"#008000"))):100>++i.b.Init.loop&&window.setTimeout(i.b.Init.Complete,i.b.Init.loop))},Refresh:function(){7<=i.b.Init.status&&i.b.App.OgameMain&&y.message("App","Refresh",{},function(e){i.b.Init.status&&e&&(i.b.Background.Data=e.Background||{},i.b.Option.Init(e.Option),i.b.Fleet.Init(e.Fleet),i.b.Box.Init(e.Box,!0),i.b.Panel.Init(e.Panel,!0))})},Content:function(e){var t;if(5<i.b.Init.status&&e&&e.page){var a,n=e.page;(a=i.b[u.get(i.b.App.Overlay,n)])?"function"==typeof a.Content&&(i.b.Init.activeOverlay||(t=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length&&(i.b.Init.activeOverlay={element:t[t.length-1].id,page:p.getAttribute(t[t.length-1],null,"data-page").toLowerCase()}),i.b.Init.activeOverlay&&i.b.Init.activeOverlay.element&&n===i.b.Init.activeOverlay.page&&(t=document.getElementById(i.b.Init.activeOverlay.element))&&a.Content(t,i.b.Init.activeOverlay.element,n,e.url,e.para)):(a=i.b[u.get(i.b.App.Content,n)])&&"function"==typeof a.Content&&a.Content(n,e.url,e.para,e.response)}},Overlay:function(e,t){var a,n;5<i.b.Init.status&&e&&(n=p.getAttribute(e,null,"data-page").toLowerCase(),i.b.Init.activeOverlay={element:e.id,page:n},n?(a=u.get(i.b.App.Overlay,n))&&i.b[a]&&"function"==typeof i.b[a].Overlay&&i.b[a].Overlay(e,e.id,n,t):"function"==typeof f.Dialog&&f.Dialog(e,e.id))},Tooltip:function(e){i.b.Menu&&document.getElementById("ago_menu")&&"function"==typeof i.b.Menu.Tooltip?i.b.Menu.Tooltip(e):"function"==typeof f.Tooltip&&f.Tooltip(e)},onKeydown:function(e){var t,a,n,o;if(o=!0,i.b.App.Ogame&&i.b.Init.activeOverlay&&((t=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length?(a=t[t.length-1],n=p.getAttribute(a,null,"data-page").toLowerCase(),i.b.Init.activeOverlay={element:a.id,page:n}):i.b.Init.activeOverlay=null),i.b.Init.activeOverlay?(t=u.get(i.b.App.Overlay,n))&&i.b[t]&&"function"==typeof i.b[t].onKeydown&&(o=i.b[t].onKeydown(e,a)):(i.b.Menu&&document.getElementById("ago_menu")?o=i.b.Menu.onKeydown(e):"function"==typeof f.onKeydown&&(o=f.onKeydown(e)),o&&i.b.App.OgameMain&&(o=i.b.Main.onKeydown(e))),!1===o&&!e.cached)try{e.preventDefault()}catch(e){}return o},onSwipe:function(e,t){i.b.Init.touch&&e&&(10>t&&"function"==typeof f.onSwipe?f.onSwipe(e,t):"function"==typeof i.b.Main.onSwipe&&i.b.Main.onSwipe(e,t))},Select:function(){var e,t;"getSelection"in window&&((e=window.getSelection()).rangeCount&&(t=e.toString())),!t&&document.activeElement&&("TEXTAREA"===(e=document.activeElement).tagName||"INPUT"===e.tagName&&"text"===e.type)&&(t=(e.value||"").substring(e.selectionStart,e.selectionEnd)),t&&5<=t.length&&(!i.b.App.OgameMain||60>t.length)&&((t=i.b.Task.parseTarget(t,1)).coords||t.time)&&(i.b.App.OgameMain?i.b.Option.is("I81")&&(t={action:"set",tab:"Target",token:81,coords:t.coordstype||t.coords,time:t.time,marked:1},i.b.Init.Messages("Token","Action",t)):(t=g.check(t.coordstype||t.coords)+"|"+g.check(t.time),y.message("Background","Set",{key:"Panel_Target",value:t})))},Timer:function(){5<i.b.Init.status&&i.b.App.OgameMain&&(i.b.Time.Display(),i.b.Planets.Timer(),1===i.b.Acc.type&&i.b.Units.Timer(),f.Timer&&f.Timer(),i.b.Jumpgate&&i.b.Jumpgate.Timer&&i.b.Jumpgate.Timer(),i.b.Main.updateTitle())},Timing:function(e){e?y.Log(e+(Date.now()-i.b.Init.timing-(Date.now()-i.b.Init.timingRange))+"   + "+(Date.now()-i.b.Init.timingRange)+" -- "+document.readyState):i.b.Init.timingRange=Date.now()},Location:function(e,t){window.setTimeout(function(){document.location.href=i.b.Uni.path+(e||"overview")},t||300)},Valid:function(e,t){var a;i.b.Init.status&&"function"==typeof e&&((a=new XMLHttpRequest).open("GET",i.b.Uni.url+"/game/index.php?page=fetchTechs&ajax=1",!0),a.overrideMimeType("text/html"),a.onerror=a.onload=function(){i.b.Init.status&&(200==+a.status&&g.check(a.responseText)[0]===String.fromCharCode(123)?e():"function"==typeof t&&t())},a.send(null))},Script:function(e){var t,a;if(!i.b.Init.ogameScript){for(t=p.queryAll("#box > script",document.getElementById("boxBG")),a=0;a<t.length;a++)if(!t[a].src&&-1<(t[a].innerHTML||"").indexOf("var session")){i.b.Init.ogameScript=t[a];break}i.b.Init.ogameScript=i.b.Init.ogameScript||-1}return t="",u.is(i.b.Init.ogameScript)&&(t=i.b.Init.ogameScript.innerHTML||"","production"===e)?0<(e=t.indexOf("initAjaxResourcebox"))&&(e=t.indexOf("{",e+30),(a=t.indexOf("function",e))>e)?(a=t.lastIndexOf("}",t.lastIndexOf("}",a)-1),t.slice(e,a+1)||""):"":t}},i.b.Background={Data:{},Get:function(e,t){var a;return a=e?i.b.Background.Data[e]:"",6===t?g.check(a):+a||0},Set:function(e,t){e&&(i.b.Background.Data[e]=t,y.message("Background","Set",{key:e,value:t}))}},i.b.Observer={head:[null],body:[null],interactive:[null],mousedown:null,Start:function(){var e;e=document.onreadystatechange,document.onreadystatechange=function(){"interactive"===document.readyState&&(i.b.Observer.Call(i.b.Observer.body),i.b.Observer.Call(i.b.Observer.interactive));try{e()}catch(e){}},document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),i.b.Observer.Call(i.b.Observer.body),i.b.Observer.Call(i.b.Observer.interactive)},!1),window.addEventListener("blur",function(){i.b.Init.active=!1},!1),window.addEventListener("focus",function(){i.b.Init.active||(i.b.Init.active=!0,7<=i.b.Init.status&&i.b.Init.Refresh())},!1),window.addEventListener("beforeunload",function(){p.removeObserver(i.b.Observer.mutationObject),i.b.Init.status=0},!1),window.addEventListener("keydown",i.b.Observer.onKeydown,!0),window.addEventListener("ago_global_send",function(e){(e=u.parse(e?e.detail:"")).page&&i.b.Init.Messages(e.page,e.role,e.data)},!1),chrome.runtime.onMessage.addListener(function(e){e&&e.player===i.b.App.keyPlayer&&i.b.Init.Messages(e.page,e.role,e.data)}),document.addEventListener("mousedown",function(e){var t;if(i.b.Observer.mousedown){for(e=e.target,t=0;9>t;t++){if(!e){t=9;break}if(e.id===i.b.Observer.mousedown.id)break;e=e.parentNode}9===t&&(e=i.b.Observer.mousedown.action,i.b.Observer.set("mousedown"),"function"==typeof e&&e())}},!1),document.addEventListener("mouseup",function(e){e.keyCode||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||i.b.Init.Select()},!1),document.addEventListener("touchstart",function(e){var t,a;i.b.Observer.area=0,e&&e.target&&1===e.touches.length&&(i.b.Observer.startX=i.b.Observer.pageX=a=e.touches[0].pageX,i.b.Observer.startY=i.b.Observer.pageY=e.touches[0].pageY,t=Math.floor((+document.body.clientWidth||1)/2),40>e.touches[0].screenX||p.findParent(e.target,null,"ago_panel",8)?i.b.Observer.area=12:i.b.Observer.area=a>t-335&&a<t+335?950>window.innerWidth?0:p.findParent(e.target,null,"inhalt",9)?1:0:a>t+330&&p.findParent(e.target,null,"planetList",9)?15:a<t-280&&p.findParent(e.target,null,"links",9)?11:0,i.b.Observer.area&&(window.setTimeout(function(){10>Math.abs(i.b.Observer.startX-i.b.Observer.pageX)&&10>Math.abs(i.b.Observer.startY-i.b.Observer.pageY)&&(i.b.Observer.area=0)},120),window.clearTimeout(i.b.Observer.touchTimeout),i.b.Observer.touchTimeout=window.setTimeout(function(){i.b.Observer.area=0},1e3)))},!1),document.addEventListener("touchmove",function(e){var t,a;i.b.Observer.area&&(i.b.Observer.pageX=e.touches[0].pageX,i.b.Observer.pageY=e.touches[0].pageY,!window.scrollX||0<i.b.Observer.startX-i.b.Observer.pageX)&&(t=Math.abs(i.b.Observer.startX-i.b.Observer.pageX)+1,a=Math.abs(i.b.Observer.startY-i.b.Observer.pageY)+1,(t=1===i.b.Observer.area&&(3<t||3<a)&&.35>t/a)?i.b.Observer.area=0:e.preventDefault())},!1),document.addEventListener("touchend",i.b.Observer.onSwipe,!1),document.addEventListener("touchcancel",i.b.Observer.onSwipe,!1)},Head:function(e){i.b.Init.status&&(document.body||!0===i.b.Observer.head[0]?e():(i.b.Observer.head[0]||(i.b.Observer.head[0]=p.addObserver(document,{childList:!0,subtree:!0},function(e){var t;u.iterate(e,function(a){"HTML"===e[a].target.nodeName&&e[a].addedNodes.length&&"BODY"===e[a].addedNodes[0].nodeName&&e[a].addedNodes[0].childNodes.length&&(t=!0)}),t&&i.b.Observer.Call(i.b.Observer.head)})),i.b.Observer.head.push(e)))},Body:function(e,t){i.b.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===i.b.Observer.body[0]?e():(t&&!i.b.Observer.body[0]&&(i.b.Observer.body[0]=p.addObserver(document,{childList:!0,subtree:!0},function(e){var t,a;for(t in e){if(e[t].target&&"box"===e[t].target.id&&"boxBG"===e[t].target.parentNode.id)for(var n=0;n<e[t].addedNodes.length;n++)"SCRIPT"===e[t].addedNodes[n].nodeName&&document.getElementById("rechts")&&(a=!0);if(a){i.b.Observer.Call(i.b.Observer.body);break}}})),i.b.Observer.body.push(e)))},Interactive:function(e){i.b.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===i.b.Observer.interactive[0]?e():i.b.Observer.interactive.push(e))},Call:function(e){var t;if(i.b.Init.status&&e&&"object"===l(e)&&!0!==e[0]){for(t=e[0],e[0]=!0,t&&p.removeObserver(t),t=1;t<e.length;t++)"function"==typeof e[t]&&e[t]();e.length=1}},set:function(e,t,a){i.b.Observer[e]=t&&a?{id:t,action:a}:null},onKeydown:function(e){return!(!(!e||!e.keyCode||e.altKey||e.ctrlKey&&(37>e.keyCode||40<e.keyCode))&&i.b.Option.is("U31"))||(112<=e.keyCode&&123>=e.keyCode&&i.b.Option.is("U32")&&(e.stopPropagation(),e.preventDefault()),7>i.b.Init.status?(i.b.Init.KeydownCache.push({cached:!0,keyCode:e.keyCode,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey}),!1):(e.target&&(e.inputType="TEXTAREA"===e.target.nodeName?12:"INPUT"===e.target.nodeName&&"text"===e.target.type?11:0),i.b.Init.onKeydown(e)))},Mutation:function(e){var t,a,n;for(a in e)if("BODY"===e[a].target.nodeName&&e[a].addedNodes)for(n=0;n<e[a].addedNodes.length;n++)if("DIV"===e[a].addedNodes[n].nodeName&&"dialog"===(t=e[a].addedNodes[n]).getAttribute("role"))return void i.b.Init.Overlay(t.querySelector(".ui-dialog-content"))},onSwipe:function(){var e,t,a,n;window.clearTimeout(i.b.Observer.touchTimeout),i.b.Init.touch&&i.b.Observer.area&&(e=i.b.Observer.startY-i.b.Observer.pageY,a=i.b.Observer.startX-i.b.Observer.pageX,.35>(n=Math.abs(a||1)/Math.abs(e||1))?1<i.b.Observer.area&&(-100>=e?t="down":100<=e&&(t="up")):3<n?a<=-(e=10>i.b.Observer.area?80:40)?t="right":a>=e&&(t="left"):.6<n&&1.4>n&&(-70>=e?t="diagDown":70<=e&&(t="diagUp")),i.b.Init.onSwipe(t,i.b.Observer.area))}},i.b.Global={Interactive:function(){i.b.App.Ogame&&i.b.Global.message({role:"Interactive",data:{commander:i.b.Option.is("commander"),galaxy:i.b.Acc.galaxy,page:i.b.App.page,timeStatus:i.b.Time.status,timeZoneDelta:i.b.Time.timeZoneDelta,galaxies:i.b.Uni.galaxies,donutGalaxy:i.b.Uni.donutGalaxy,U60:i.b.Option.is("U60"),U61:i.b.Option.isAnd("U60","U61"),U62:i.b.Option.get("U62",2),U65:i.b.Option.get("U65",2),U66:i.b.Option.get("U66",2),U67:i.b.Option.get("U67",2),B21:i.b.Option.get("B21",2),G30:i.b.Option.is("G30"),O51:i.b.Planets.improve,O53:i.b.Planets.enabled&&i.b.Option.is("O53"),F00:i.b.Option.is("F00"),F02:i.b.Option.get("F02",2),F19:i.b.Option.get("F19")}})},message:function(e,t){var a;if(e&&(window.dispatchEvent(new window.CustomEvent("ago_global",{detail:JSON.stringify(e)})),"getProperty"===e.role||t)){a=p.getAttribute("ago_global_data","id","ago-data-"+(e.property||t));try{return JSON.parse(a)}catch(e){return""}}}},i.b.App={page:"",Page:"",pathSkin:"",title:"",mode:0,beta:0,versionOGame:"",Overlay:{jumpgatelayer:"Jumpgate",techtree:"Techtree",phalanx:"Phalanx",showmessage:"Showmessage",buddies:"Buddies",notices:"Notices",search:"Search",sharereportoverlay:"ShareReport",messages:"Messages"},Content:{resources:"Resources",station:"Station",traderoverview:"Trader",research:"Research",shipyard:"Shipyard",defense:"Defense",galaxycontent:"Galaxy",allianceoverview:"Alliance",alliancemanagement:"Alliance",alliancebroadcast:"Alliance",allianceapplications:"Alliance",premium:"Premium",shop:"Shop",eventlist:"Events",fetcheventbox:"Fleet",minifleet:"Fleet",tutorialmission:"Tutorial",messages:"Messages",highscorecontent:"Highscore"},Start:function(){if(i.b.App.pathSkin=chrome.extension.getURL("/skin/"),i.b.App.versionAGO=chrome.runtime.getManifest().version,i.b.App.name=g.check(chrome.runtime.getManifest().name),i.b.App.beta=-1<i.b.App.name.indexOf("Alpha")?3:-1<i.b.App.name.indexOf("Beta")?1:0,i.b.Uni.domain=document.location.hostname.toLowerCase(),i.b.Uni.url=document.location.protocol+"//"+i.b.Uni.domain,document.location.href.match(/https:\/\/.+\.ogame.gameforge.com\/game\/index\.php\?+.*page=*/i)){var e=g.getParameter("page",document.location.href).toLowerCase();i.b.App.page="standalone"===e?g.getParameter("component",document.location.href).toLowerCase():e,0===i.b.App.page.indexOf("fleet")&&g.getParameter("cp",document.location.href)&&(i.b.App.page="fleet1"),i.b.Uni.path=document.location.href.split("?")[0]+"?page=";var t=i.b.Uni.domain.split("."),a=(t[0]||"").split("-");i.b.Uni.lang=(a[1]||"EN").toUpperCase(),i.b.Uni.number=m.parseIntAbs(a[0]),i.b.Uni.number&&(i.b.App.mode=3,i.b.Uni.abbr="UNI"+i.b.Uni.number,i.b.App.keyCom="AGO_"+i.b.Uni.lang,i.b.App.keyUni=i.b.App.keyCom+"_"+i.b.Uni.abbr,u.copy(u.parse(i.b.Data.getStorage(i.b.App.keyUni+"_App")),i.b.App),i.b.App.title=i.b.App.title||i.b.Uni.lang+" "+i.b.Uni.number,!i.b.App.playerId||g.getParameter("reloginx",document.location.href.toLowerCase())?i.b.App.login=i.b.App.reload=!0:i.b.App.keyPlayer=i.b.App.keyUni+"_"+i.b.App.playerId),i.b.App.disabled&&i.b.Notify.set("Problem",21),4!==t.length&&i.b.Notify.set("Problem",31)}else i.b.App.page=-1<i.b.Uni.domain.indexOf("speedsim.net")?"websim":-1<i.b.Uni.domain.indexOf("osimulate.com")?"osimulate":"",i.b.App.page&&(i.b.Uni.lang=(g.getParameter("uni",document.location.href).split("_")[0]||"EN").toUpperCase(),i.b.App.keyCom="AGO_"+i.b.Uni.lang,i.b.App.mode=2)},Init:function(){var e,t,a;for(e=document.head.getElementsByTagName("meta"),a=0;a<e.length;a++)if(e[a].name)switch(t=e[a].getAttribute("content"),e[a].name){case"ogame-player-name":i.b.Acc.name=t;break;case"ogame-planet-coordinates":i.b.Acc.coords=t;break;case"ogame-planet-type":i.b.Acc.type="moon"===t?3:1;break;case"ogame-planet-id":i.b.Acc.planetId=t;break;case"ogame-planet-name":i.b.Acc.planetName=t;break;case"ogame-player-id":i.b.Acc.playerId=t;break;case"ogame-version":i.b.App.versionOGame=t;break;case"ogame-session":i.b.Acc.session=t;break;case"ogame-timestamp":i.b.Acc.timestamp=+t||0;break;case"AntiGameOrigin":i.b.App.twice=!0}i.b.App.init=!0,i.b.App.mode=i.b.App.twice?0:2===i.b.App.mode?2:i.b.Acc.playerId&&i.b.Acc.session?4:3,4<=i.b.App.mode&&(!i.b.App.login&&i.b.App.playerId&&i.b.App.playerId!==i.b.Acc.playerId?(i.b.Init.status=i.b.App.mode=0,i.b.Data.setStorage(i.b.App.keyUni+"_App","")):(i.b.App.Ogame=!0,u.copy(i.b.Task.splitCoords(i.b.Acc.coords),i.b.Acc),i.b.Acc.coordstype=i.b.Acc.coords+":"+i.b.Acc.type,i.b.App.keyPlayer=i.b.App.keyUni+"_"+i.b.Acc.playerId,i.b.App.OgameMobile=!p.hasClass(document.body,null,"no-touch"),(i.b.App.login||i.b.App.playerId!==i.b.Acc.playerId||i.b.App.session!==i.b.Acc.session)&&(i.b.App.reload=!0,i.b.App.playerId=i.b.Acc.playerId,i.b.App.Save(),y.Log("App - Login:   Com: "+i.b.Uni.lang+"   Uni: "+i.b.Uni.number+"   Player: "+i.b.Acc.playerId+"   Session: "+i.b.Acc.session,!0)),e=document.createDocumentFragment(),p.append(e,"meta",{content:i.b.App.versionAGO,name:"AntiGameOrigin",id:"ago_global_data","ago-data-key":i.b.App.keyPlayer}),p.append(e,"script",{type:"text/javascript"}).textContent=y.Resource("js/global.js"),document.head.appendChild(e)))},Save:function(e){u.copy(e,i.b.App),i.b.Data.setStorage(i.b.App.keyUni+"_App",{disabled:i.b.App.disabled,playerId:i.b.Acc.playerId,session:i.b.Acc.session,title:i.b.Uni.lang+" "+(i.b.Uni.name||i.b.Uni.number||"")})}},i.b.Uni={status:0,path:"",url:"",domain:"",lang:"",abbr:"",number:0,name:"",speed:1,speedFleet:1,galaxies:50,systems:499,positions:16,rapidFire:1,acs:1,defToTF:0,debrisFactor:.3,repairFactor:.7,newbieProtectionLimit:0,newbieProtectionHigh:0,topScore:0,donutGalaxy:0,donutSystem:0,probeCargo:0,globalDeuteriumSaveFactor:1,cargoHyperspaceTechMultiplier:2},i.b.Acc={name:"",coords:"",type:0,playerId:"",planetId:"",session:"",timestamp:0},i.b.Data={Init:function(){i.b.App.reload&&i.b.Data.removeStorage(i.b.App.keyPlayer+"_Fleet_Current")},Remove:function(e){function t(e){u.iterate(window.localStorage,function(t){t&&0===t.indexOf(e||"AGO_")&&(window.localStorage.removeItem(t),y.Log("Delete - localstorage  - "+t,!0))})}y.Log("Delete - ############ - "+e,!0),y.message("Data","Remove",{mode:e},function(a){a&&(t("ago"===e?"AGO_":i.b.App.keyPlayer),t(i.b.App.keyUni),i.b.Init.Location("",600))})},setStorage:function(e,t){if(e)try{window.localStorage[e]=u.is(t)?JSON.stringify(t):t||""}catch(e){y.Log("Data - Error set localstorage",!0)}},getStorage:function(e,t){if(e){if(!t)return window.localStorage[e]||"";try{return JSON.parse(window.localStorage[e]||"{}")}catch(e){return{}}}return t?{}:""},removeStorage:function(e){e&&(window.localStorage[e]="")}},window.top===window.self&&window.AGO.Init.Start()}])});