!function(e,t){for(var a in t)e[a]=t[a]}(window,function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}([function(e,t,a){e.exports=function(){"use strict";var e=Object.freeze||function(e){return e},t=e(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),a=e(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),n=e(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o=e(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),i=e(["#text"]),r=Object.freeze||function(e){return e},s=r(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),l=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),c=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),p=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),u=Object.hasOwnProperty,d=Object.setPrototypeOf,m=("undefined"!=typeof Reflect&&Reflect).apply;function g(e,t){d&&d(e,null);for(var a=t.length;a--;){var n=t[a];if("string"==typeof n){var o=n.toLowerCase();o!==n&&(Object.isFrozen(t)||(t[a]=o),n=o)}e[n]=!0}return e}function f(e){var t={},a=void 0;for(a in e)m(u,e,[a])&&(t[a]=e[a]);return t}m||(m=function(e,t,a){return e.apply(t,a)});var y=Object.seal||function(e){return e},h=y(/\{\{[\s\S]*|[\s\S]*\}\}/gm),v=y(/<%[\s\S]*|[\s\S]*%>/gm),b=y(/^data-[\-\w.\u00B7-\uFFFF]/),_=y(/^aria-[\-\w]+$/),T=y(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),A=y(/^(?:\w+script|data):/i),C=y(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function I(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var S=("undefined"!=typeof Reflect&&Reflect).apply,k=Array.prototype.slice,w=Object.freeze,x=function(){return"undefined"==typeof window?null:window};S||(S=function(e,t,a){return e.apply(t,a)});var O=function(e,t){if("object"!==(void 0===e?"undefined":P(e))||"function"!=typeof e.createPolicy)return null;var a=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(a=t.currentScript.getAttribute("data-tt-policy-suffix"));var n="dompurify"+(a?"#"+a:"");try{return e.createPolicy(n,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x(),u=function(t){return e(t)};if(u.version="1.0.10",u.removed=[],!r||!r.document||9!==r.document.nodeType)return u.isSupported=!1,u;var d=r.document,m=!1,y=!1,D=r.document,M=r.DocumentFragment,E=r.HTMLTemplateElement,N=r.Node,L=r.NodeFilter,R=r.NamedNodeMap,U=void 0===R?r.NamedNodeMap||r.MozNamedAttrMap:R,B=r.Text,F=r.Comment,G=r.DOMParser,q=r.TrustedTypes;if("function"==typeof E){var j=D.createElement("template");j.content&&j.content.ownerDocument&&(D=j.content.ownerDocument)}var H=O(q,d),J=H?H.createHTML(""):"",K=D,z=K.implementation,V=K.createNodeIterator,Y=K.getElementsByTagName,W=K.createDocumentFragment,X=d.importNode,$={};u.isSupported=z&&void 0!==z.createHTMLDocument&&9!==D.documentMode;var Z=h,Q=v,ee=b,te=_,ae=A,ne=C,oe=T,ie=null,re=g({},[].concat(I(t),I(a),I(n),I(o),I(i))),se=null,le=g({},[].concat(I(s),I(l),I(c),I(p))),ce=null,pe=null,ue=!0,de=!0,me=!1,ge=!1,fe=!1,ye=!1,he=!1,ve=!1,be=!1,_e=!1,Te=!1,Ae=!0,Ce=!0,Pe=!1,Ie={},Se=g({},["audio","head","math","script","style","template","svg","video"]),ke=g({},["audio","video","img","source","image"]),we=g({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),xe=null,Oe=D.createElement("form"),De=function(e){xe&&xe===e||(e&&"object"===(void 0===e?"undefined":P(e))||(e={}),ie="ALLOWED_TAGS"in e?g({},e.ALLOWED_TAGS):re,se="ALLOWED_ATTR"in e?g({},e.ALLOWED_ATTR):le,ce="FORBID_TAGS"in e?g({},e.FORBID_TAGS):{},pe="FORBID_ATTR"in e?g({},e.FORBID_ATTR):{},Ie="USE_PROFILES"in e&&e.USE_PROFILES,ue=!1!==e.ALLOW_ARIA_ATTR,de=!1!==e.ALLOW_DATA_ATTR,me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ge=e.SAFE_FOR_JQUERY||!1,fe=e.SAFE_FOR_TEMPLATES||!1,ye=e.WHOLE_DOCUMENT||!1,be=e.RETURN_DOM||!1,_e=e.RETURN_DOM_FRAGMENT||!1,Te=e.RETURN_DOM_IMPORT||!1,ve=e.FORCE_BODY||!1,Ae=!1!==e.SANITIZE_DOM,Ce=!1!==e.KEEP_CONTENT,Pe=e.IN_PLACE||!1,oe=e.ALLOWED_URI_REGEXP||oe,fe&&(de=!1),_e&&(be=!0),Ie&&(ie=g({},[].concat(I(i))),se=[],!0===Ie.html&&(g(ie,t),g(se,s)),!0===Ie.svg&&(g(ie,a),g(se,l),g(se,p)),!0===Ie.svgFilters&&(g(ie,n),g(se,l),g(se,p)),!0===Ie.mathMl&&(g(ie,o),g(se,c),g(se,p))),e.ADD_TAGS&&(ie===re&&(ie=f(ie)),g(ie,e.ADD_TAGS)),e.ADD_ATTR&&(se===le&&(se=f(se)),g(se,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&g(we,e.ADD_URI_SAFE_ATTR),Ce&&(ie["#text"]=!0),ye&&g(ie,["html","head","body"]),ie.table&&g(ie,["tbody"]),w&&w(e),xe=e)},Me=function(e){u.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=J}},Ee=function(e,t){try{u.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){u.removed.push({attribute:null,from:t})}t.removeAttribute(e)},Ne=function(e){var t=void 0,a=void 0;if(ve)e="<remove></remove>"+e;else{var n=e.match(/^[\s]+/);(a=n&&n[0])&&(e=e.slice(a.length))}if(m)try{t=(new G).parseFromString(e,"text/html")}catch(e){}if(y&&g(ce,["title"]),!t||!t.documentElement){var o=t=z.createHTMLDocument(""),i=o.body;i.parentNode.removeChild(i.parentNode.firstElementChild),i.outerHTML=H?H.createHTML(e):e}return a&&t.body.insertBefore(D.createTextNode(a),t.body.childNodes[0]||null),Y.call(t,ye?"html":"body")[0]};u.isSupported&&(function(){try{var e=Ne('<svg><p><style><img src="</style><img src=x onerror=1//">');e.querySelector("svg img")&&(m=!0)}catch(e){}}(),function(){try{var e=Ne("<x/><title>&lt;/title&gt;&lt;img&gt;");e.querySelector("title").innerHTML.match(/<\/title/)&&(y=!0)}catch(e){}}());var Le=function(e){return V.call(e.ownerDocument||e,e,L.SHOW_ELEMENT|L.SHOW_COMMENT|L.SHOW_TEXT,function(){return L.FILTER_ACCEPT},!1)},Re=function(e){return"object"===(void 0===N?"undefined":P(N))?e instanceof N:e&&"object"===(void 0===e?"undefined":P(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ue=function(e,t,a){$[e]&&$[e].forEach(function(e){e.call(u,t,a,xe)})},Be=function(e){var t,a=void 0;if(Ue("beforeSanitizeElements",e,null),!((t=e)instanceof B||t instanceof F||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof U&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute))return Me(e),!0;var n=e.nodeName.toLowerCase();if(Ue("uponSanitizeElement",e,{tagName:n,allowedTags:ie}),!ie[n]||ce[n]){if(Ce&&!Se[n]&&"function"==typeof e.insertAdjacentHTML)try{var o=e.innerHTML;e.insertAdjacentHTML("AfterEnd",H?H.createHTML(o):o)}catch(e){}return Me(e),!0}return"noscript"===n&&e.innerHTML.match(/<\/noscript/i)?(Me(e),!0):"noembed"===n&&e.innerHTML.match(/<\/noembed/i)?(Me(e),!0):(!ge||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(u.removed.push({element:e.cloneNode()}),e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),fe&&3===e.nodeType&&(a=(a=(a=e.textContent).replace(Z," ")).replace(Q," "),e.textContent!==a&&(u.removed.push({element:e.cloneNode()}),e.textContent=a)),Ue("afterSanitizeElements",e,null),!1)},Fe=function(e,t,a){if(Ae&&("id"===t||"name"===t)&&(a in D||a in Oe))return!1;if(de&&ee.test(t));else if(ue&&te.test(t));else{if(!se[t]||pe[t])return!1;if(we[t]);else if(oe.test(a.replace(ne,"")));else if("src"!==t&&"xlink:href"!==t||"script"===e||0!==a.indexOf("data:")||!ke[e])if(me&&!ae.test(a.replace(ne,"")));else if(a)return!1}return!0},Ge=function(e){var t=void 0,a=void 0,n=void 0,o=void 0,i=void 0;Ue("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(i=r.length;i--;){var l=t=r[i],c=l.name,p=l.namespaceURI;if(a=t.value.trim(),n=c.toLowerCase(),s.attrName=n,s.attrValue=a,s.keepAttr=!0,Ue("uponSanitizeAttribute",e,s),a=s.attrValue,"name"===n&&"IMG"===e.nodeName&&r.id)o=r.id,r=S(k,r,[]),Ee("id",e),Ee(c,e),r.indexOf(o)>i&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===n&&"file"===a&&(se[n]||!pe[n]))continue;"id"===c&&e.setAttribute(c,""),Ee(c,e)}if(s.keepAttr){fe&&(a=(a=a.replace(Z," ")).replace(Q," "));var d=e.nodeName.toLowerCase();if(Fe(d,n,a))try{p?e.setAttributeNS(p,c,a):e.setAttribute(c,a),u.removed.pop()}catch(e){}}}Ue("afterSanitizeAttributes",e,null)}},qe=function e(t){var a=void 0,n=Le(t);for(Ue("beforeSanitizeShadowDOM",t,null);a=n.nextNode();)Ue("uponSanitizeShadowNode",a,null),Be(a)||(a.content instanceof M&&e(a.content),Ge(a));Ue("afterSanitizeShadowDOM",t,null)};return u.sanitize=function(e,t){var a=void 0,n=void 0,o=void 0,i=void 0,s=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!u.isSupported){if("object"===P(r.toStaticHTML)||"function"==typeof r.toStaticHTML){if("string"==typeof e)return r.toStaticHTML(e);if(Re(e))return r.toStaticHTML(e.outerHTML)}return e}if(he||De(t),u.removed=[],Pe);else if(e instanceof N)a=Ne("\x3c!--\x3e"),1===(n=a.ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName?a=n:a.appendChild(n);else{if(!be&&!fe&&!ye&&-1===e.indexOf("<"))return H?H.createHTML(e):e;if(!(a=Ne(e)))return be?null:J}a&&ve&&Me(a.firstChild);for(var l=Le(Pe?e:a);o=l.nextNode();)3===o.nodeType&&o===i||Be(o)||(o.content instanceof M&&qe(o.content),Ge(o),i=o);if(i=null,Pe)return e;if(be){if(_e)for(s=W.call(a.ownerDocument);a.firstChild;)s.appendChild(a.firstChild);else s=a;return Te&&(s=X.call(d,s,!0)),s}var c=ye?a.outerHTML:a.innerHTML;return fe&&(c=(c=c.replace(Z," ")).replace(Q," ")),H?H.createHTML(c):c},u.setConfig=function(e){De(e),he=!0},u.clearConfig=function(){xe=null,he=!1},u.isValidAttribute=function(e,t,a){xe||De({});var n=e.toLowerCase(),o=t.toLowerCase();return Fe(n,o,a)},u.addHook=function(e,t){"function"==typeof t&&($[e]=$[e]||[],$[e].push(t))},u.removeHook=function(e){$[e]&&$[e].pop()},u.removeHooks=function(e){$[e]&&($[e]=[])},u.removeAllHooks=function(){$={}},u}()}()},function(e,t,a){"use strict";(function(t){var n=a(3),o=a(4),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(e){return(e||"").toString().replace(s,"")}var c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function u(e){var a,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},r=typeof(e=e||n);if("blob:"===e.protocol)o=new m(unescape(e.pathname),{});else if("string"===r)for(a in o=new m(e,{}),p)delete o[a];else if("object"===r){for(a in e)a in p||(o[a]=e[a]);void 0===o.slashes&&(o.slashes=i.test(e.href))}return o}function d(e){e=l(e);var t=r.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function m(e,t,a){if(e=l(e),!(this instanceof m))return new m(e,t,a);var i,r,s,p,g,f,y=c.slice(),h=typeof t,v=this,b=0;for("object"!==h&&"string"!==h&&(a=t,t=null),a&&"function"!=typeof a&&(a=o.parse),t=u(t),i=!(r=d(e||"")).protocol&&!r.slashes,v.slashes=r.slashes||i&&t.slashes,v.protocol=r.protocol||t.protocol||"",e=r.rest,r.slashes||(y[3]=[/(.*)/,"pathname"]);b<y.length;b++)"function"!=typeof(p=y[b])?(s=p[0],f=p[1],s!=s?v[f]=e:"string"==typeof s?~(g=e.indexOf(s))&&("number"==typeof p[2]?(v[f]=e.slice(0,g),e=e.slice(g+p[2])):(v[f]=e.slice(g),e=e.slice(0,g))):(g=s.exec(e))&&(v[f]=g[1],e=e.slice(0,g.index)),v[f]=v[f]||i&&p[3]&&t[f]||"",p[4]&&(v[f]=v[f].toLowerCase())):e=p(e);a&&(v.query=a(v.query)),i&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){if(""===e)return t;for(var a=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=a.length,o=a[n-1],i=!1,r=0;n--;)"."===a[n]?a.splice(n,1):".."===a[n]?(a.splice(n,1),r++):r&&(0===n&&(i=!0),a.splice(n,1),r--);return i&&a.unshift(""),"."!==o&&".."!==o||a.push(""),a.join("/")}(v.pathname,t.pathname)),n(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(p=v.auth.split(":"),v.username=p[0]||"",v.password=p[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}m.prototype={set:function(e,t,a){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(a||o.parse)(t)),i[e]=t;break;case"port":i[e]=t,n(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!a;break;case"pathname":case"hash":if(t){var r="pathname"===e?"/":"#";i[e]=t.charAt(0)!==r?r+t:t}else i[e]=t;break;default:i[e]=t}for(var s=0;s<c.length;s++){var l=c[s];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,a=this,n=a.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(a.slashes?"//":"");return a.username&&(i+=a.username,a.password&&(i+=":"+a.password),i+="@"),i+=a.host+a.pathname,(t="object"==typeof a.query?e(a.query):a.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),a.hash&&(i+=a.hash),i}},m.extractProtocol=d,m.location=u,m.trimLeft=l,m.qs=o,e.exports=m}).call(this,a(2))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t,a){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,a){"use strict";var n,o=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var a,i,r=[];for(i in"string"!=typeof t&&(t="?"),e)if(o.call(e,i)){if((a=e[i])||null!==a&&a!==n&&!isNaN(a)||(a=""),i=encodeURIComponent(i),a=encodeURIComponent(a),null===i||null===a)continue;r.push(i+"="+a)}return r.length?t+r.join("&"):""},t.parse=function(e){for(var t,a=/([^=?&]+)=?([^&]*)/g,n={};t=a.exec(e);){var o=i(t[1]),r=i(t[2]);null===o||null===r||o in n||(n[o]=r)}return n}},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(1),r=a.n(i);function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,a){var n=t.page;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=n,this.universe=a,this.mode=a.number?3:2}var t,a,n;return t=e,(a=[{key:"keyCom",get:function(){return"AGO_"+this.universe.lang}},{key:"keyUni",get:function(){return this.keyCom+"_"+this.universe.abbr}},{key:"title",get:function(){return this.universe.lang+" "+this.universe.number}}])&&s(t.prototype,a),n&&s(t,n),e}();var c=function(e){var t=e.protocol,a=e.hostname,n=e.pathname,o=(a.split(".")[0]||"").split("-");return{lang:(o[1]||"EN").toUpperCase(),number:parseInt(o[0].replace("s","")),domain:a,url:t+"//"+a,path:t+"//"+a+n+"?page="}},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.universe,n=t.app;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.universe=a,this.app=new l(n,this.universe)};function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(e){return e&&e.href&&e.href.match(/https:\/\/.+\.ogame.gameforge.com\/game\/index\.php\?+.*page=*/i)},m=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!d(t))throw new Error("Not a valid url");this.url=r()(t,!0)}var t,a,n;return t=e,(a=[{key:"createProfile",value:function(){return t=(e=this).url.query,a=t.page,n=t.component,o=void 0===n?"":n,i=t.cp,r=void 0===i?null:i,(s={universe:c(e.url),app:{page:("standalone"===a?o:a).toLowerCase()}}).app.page.indexOf("fleet")>-1&&r&&(s.app.page="fleet1"),new p(s);var e,t,a,n,o,i,r,s}}])&&u(t.prototype,a),n&&u(t,n),e}();function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,a,n,o,i,r){try{var s=e[i](r),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function y(e){return function(){var t=this,a=arguments;return new Promise(function(n,o){var i=e.apply(t,a);function r(e){f(i,n,o,r,s,"next",e)}function s(e){f(i,n,o,r,s,"throw",e)}r(void 0)})}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.status=0}var t,a,n;return t=e,(a=[{key:"inaugrate",value:function(){try{var e=new m(document.location);this.log("docked",e.createProfile())}catch(e){this.log(e)}}},{key:"log",value:function(){var e;(e=window.console).log.apply(e,arguments)}}])&&g(t.prototype,a),n&&g(t,n),e}());v.log("hello world"),v.inaugrate();var b={},_=o()(window);b.Main={Messages:function(e,t){"Display"===e&&b.Main.Display(t)},Read:function(){var e;e={commander:0,admiral:0,engineer:0,geologist:0,technocrat:0},T.iterateChildren(document.getElementById("officers"),function(t){var a=t.className||"";A.hasClass(a,"on")&&C.iterate(e,function(t){A.hasClass(a,t)&&(e[t]=1)})}),C.iterate(e,function(t){b.Option.set(t,e[t])}),document.getElementById("officers").classList.contains("all")?b.Option.set("comstaff",1):b.Option.set("comstaff",0),b.Option.get("nextItem",0)?b.Time.ogameTime>b.Option.get("nextItem",0)&&T.addClass(".premiumHighligt",null,"selected"):b.Trader&&b.Trader.updateNextItem(0,function(e){1===e&&T.addClass(".premiumHighligt",null,"selected")})},Run:function(){var e,t,a,n,o,i;(e=document.getElementById("menuTableTools"))&&(a=(t=document.createDocumentFragment()).appendChild(document.createElement("li")),n=T.appendSPAN(a,"menu_icon"),T.appendA(n,{id:"ago_menubutton_logo",class:"ago_menubutton_logo_inactive"},{click:b.Main.clickIcon}),i=T.appendA(a,{id:"ago_menubutton",class:"menubutton"},{click:b.Main.clickButton}),o=1<b.App.beta?"AGRalpha":b.App.beta?"AGRbeta":"AntiGameReborn",T.appendSPAN(i,"textlabel",o),T.appendSPAN(i,{id:"ago_menubutton_coords"}),T.prependChild(e,t),!b.App.disabled&&30<b.Notify.problem&&T.setStyleColor("ago_menubutton","id","#FF0000"));if(20>b.Notify.problem){var r,s,l;if(r=["","fleet1","movement","galaxy","messages"][b.Option.get("O03",2)]){var c=document.getElementById("logoLink");c&&(c.parentNode.href=b.Uni.path+r)}if(s=document.getElementById("playerName"))if(3!==s.childNodes[0].nodeType?T.prependChild(s,document.createTextNode(b.App.title+" ")):s.childNodes[0].textContent=b.App.title+" ",(l=s.querySelector(".status_abbr_outlaw"))&&l.title){var p,u;for(p="",l=l.title;u=/\d{1,2}\D/g.exec(l);)p+=u[0]+" ",l=l.split(u[0]).join("");T.appendTEXT(s,p)}b.Main.modeTitle=b.Option.is("O04")?3:0,b.Main.Display()}},Complete:function(){b.Main.updateTitle(),b.Main.Check()},onKeydown:function(e){var t,a=b.Option.is("U35");if(112<=e.keyCode&&123>=e.keyCode&&b.Option.is("U32"))return(t=document.querySelectorAll("#planetList .smallplanet a.planetlink"))&&t[e.keyCode-112]&&T.click(e.shiftKey?"a.moonlink":"a.planetlink",t[e.keyCode-112].parentNode),!1;if(!(e.keyCode>=37&&e.keyCode<=40&&e.ctrlKey&&a))return!0;if(!(document.activeElement.tagName in{TEXTAREA:1})){var n={37:"left",38:"up",39:"right",40:"down"}[e.keyCode];"left"===n?b.Planets.Action({mode:"set",type:1,wait:1}):"right"===n?b.Planets.Action({mode:"set",type:3,wait:1}):P.check(n,"up","down")&&b.Planets.Action({scroll:n,wait:1})}},onSwipe:function(e,t){12===t?b.Panel.onSwipe(e):15===t&&b.Planets.onSwipe(e)},Display:function(){var e,t,a,n;n="inactive",b.Option.is("I83")&&(e=b.Panel.getActive("Target","coords",6),a=b.Task.cutCoords(e),t=C.get(b.Styles.colorType,+e.split(":")[3]||1)||"",n=a||b.Panel.getActive("Target","time")?"autocopy":"coords"),T.updateText("ago_menubutton_coords","id",a),T.setStyleColor("ago_menubutton_coords","id",t),T.updateClass("ago_menubutton_logo","id","ago_menubutton_logo_"+n)},clickButton:function(){b.App.disabled?(b.App.Save({disabled:!1}),b.Init.Location("",1e3)):20>b.Notify.problem&&b.Option.Menu()},updateButton:function(){5<b.Init.status&&T.setStyleColor("ago_menubutton","id",b.Notify.color||"")},updateInfo:function(e,t,a){if(5<b.Init.status&&e){b.Main.statusInfo=2;var n,o,i,r=document.getElementById("ago_menubutton_info");if(!r)(n=document.getElementById("ago_menubutton"))?((o=document.createElement("li")).className="ago_menubutton_info",(r=o.appendChild(document.createElement("div"))).id="ago_menubutton_info",T.after(n.parentNode,o)):r=void 0;if(r)T.hasChildren(r)||(r.parentNode.style.display="list-item",window.setTimeout(b.Main.hideInfo,b.Notify.loading?4e3:2e3)),i=document.getElementById("ago_menubutton_info_"+e)||T.append(r,"span",{id:"ago_menubutton_info_"+e},{display:"block"}),T.updateText(i,null,t),T.updateStyle(i,null,"color",a)}},hideInfo:function(){var e;b.Main.statusInfo=Math.max(b.Main.statusInfo-1,0),b.Main.statusInfo?window.setTimeout(b.Main.hideInfo,b.Notify.loading?4e3:2e3):(b.Notify.set("Hide"),(e=document.getElementById("ago_menubutton_info"))&&(T.removeChildren(e),T.setStyleDisplay(e.parentNode)))},clickIcon:function(){b.Option.set("I83",!b.Option.is("I83"),1),b.Init.Messages("Main","Display"),b.Init.Messages("Panel","Display")},updateTitle:function(){if(b.Option.is("O04"))if(b.Main.modeTitle>0&&T.getProperty("eventboxBlank","id","offsetHeight",2))document.title=b.App.title,b.Main.modeTitle--;else{var e=T.getText("tempcounter","id"),t=T.getText("#eventboxFilled .next_event + .next_event .undermark");document.title=e&&t?b.App.title+" - "+e+" - "+t:b.App.title}},Check:function(){}},b.Planets={status:0,updateDisplayStatus:0,selectedPlanet:0,selectedType:0,switchTimeout:0,Data:{},ByIndex:[],ByCoords:{},ByCoordstype:{},Task:{},Messages:function(e,t){"Action"===e?b.Planets.Action(t):"Display"===e&&b.Planets.Display()},Timer:function(){0<b.Planets.updateDisplayStatus&&b.Planets.Display()},onSwipe:function(e){"left"===e?b.Planets.Action({mode:"set",type:1}):"right"===e?b.Planets.Action({mode:"set",type:3}):P.check(e,"up","down")&&b.Planets.Action({scroll:e})},Read:function(){var e,t,a,n,o,i,r,s=0;if(e=document.getElementById("planetList"),t=T.getText("#countColonies .textCenter span").split("/"),b.Planets.count=I.parseIntAbs(t[0]),b.Planets.possible=I.parseIntAbs(t[1]),e&&T.hasChildren(e)>=b.Planets.count){for(b.Planets.status=1,e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType&&(r=S.check(I.parseIntAbs(e.id)))){for(n={index:++s,type:1},o={index:s,type:3,planet:r},t=e.firstChild;t;t=t.nextSibling)if(1===t.nodeType)if(-1<(i=t.className||"").indexOf("planetlink"))for(i=t.title||"",n.name=(i.split("[",1)[0].split("<b>",2)[1]||"").trim(),n.temp=I.parseInt((i.match(/<br\/>.*<br>[^\d\-]*([\d\-]+)/i)||[])[1]),a=t.firstChild;a;a=a.nextSibling)1===a.nodeType&&(-1<(i=a.className||"").indexOf("planetPic")?n.img=a.src:-1<i.indexOf("planet-koords")&&(n.coords=(a.textContent||"").replace(/[^\d\:]/g,"")));else if(-1<i.indexOf("moonlink"))for(i=t.title||"",n.moon=S.check(I.parseIntAbs(S.getParameter("cp",t.href))),o.name=(i.split("[",1)[0].split("<b>",2)[1]||"").trim(),a=t.firstChild;a;a=a.nextSibling)1===a.nodeType&&(-1<(i=a.className||"").indexOf("icon-moon")&&(o.img=a.src));else-1<i.indexOf("constructionIcon")&&(a=t.querySelector(".icon_wrench_red")?-1:1,-1<i.indexOf("moon")?o.construction=a:n.construction=a);n.coords&&(n.coordstype=n.coords+":1",b.Planets.Data[r]=n,b.Planets.ByCoords[n.coords]=r,b.Planets.ByIndex[n.index]=r,b.Planets.ByCoordstype[n.coordstype]=r,n.moon&&(o.coords=n.coords,o.coordstype=n.coords+":3",b.Planets.Data[n.moon]=o,b.Planets.ByCoordstype[o.coordstype]=n.moon))}}else b.Planets.status=0,b.Planets.count&&w.Log("Planets - Error - Something wrong with the planetlist !",!0)},Run:function(){var e,t,a;t=b.Option.is("O53"),a=b.Option.isAnd("U32","O54"),(e=document.getElementById("rechts"))&&b.Option.is("O50")&&(b.Planets.enabled=!0,b.Planets.improve=b.Option.is("O51"),b.Planets.coloring=b.Option.isAnd("CS0","O55"),b.Option.is("O52")&&T.extendClass(e,null,"ago_planets_shrink"),e=document.createDocumentFragment(),T.appendSPAN(e,"ago_planets_arrow_planet"),T.appendSPAN(e,"ago_planets_arrow_moon"),T.appendChild(document.getElementById("countColonies"),e),T.iterateChildren(document.getElementById("planetList"),function(e){var n,o;T.setAttribute(".activity img",e,"src","/cdn/img/galaxy/activity15.gif"),o=S.check(I.parseIntAbs(e.id)),b.Planets.Data[o]&&(b.Planets.coloring&&b.Acc.coords===b.Planets.Data[o].coords&&T.extendClass(e,null,b.Token.getClassHighlight(b.Acc.type)),a&&T.appendSPAN(e,"ago_planets_shortcut",b.Planets.Data[o].index),t&&(b.Planets.Data[o].construction&&(n=(e.querySelector(".constructionIcon:not(.moon)")||{}).title,T.appendSPAN(e,"ago_planets_construction",n)),b.Planets.Data[o].moon&&b.Planets.Data[b.Planets.Data[o].moon].construction&&(n=(e.querySelector(".constructionIcon.moon")||{}).title,T.appendSPAN(e,"ago_planets_construction_moon",n))))}),b.Planets.coloring&&T.addEvents("rechts","id",{click:b.Planets.click,mouseover:b.Planets.hover,mouseout:b.Planets.hover}),T.addEvents("countColonies","id",{click:b.Planets.clickArrow}),b.Planets.Display(!0)),e=e=null},Display:function(e){var t,a,n,o,i;(t=document.getElementById("planetList"))&&((e||0<b.Planets.updateDisplayStatus)&&(b.Planets.updateDisplayStatus--,b.Planets.iterate(3,function(e,r){(n=b.Fleet.Get("Cooldown",r,2))&&(0<=(n=b.Ogame.getJumpgateCooldown(r)-(b.Time.timestamp()-Math.max(n,1e4)))?(b.Planets.updateDisplayStatus=5,o="ago_planets_cooldown"+(60>=n?" ago_planets_cooldown_seconds":""),i=60<n?Math.ceil(n/60):Math.floor(n)||"",(a=t.querySelector("#planet-"+e.planet+" .ago_planets_cooldown"))?(T.updateText(a,null,i),T.updateClass(a,null,o)):(a=t.querySelector("#planet-"+e.planet+" .moonlink"))&&T.appendSPAN(a,o,i)):b.Fleet.Get("Cooldown",r,0,2))})),b.Planets.coloring&&b.Planets.Task.coords&&b.Planets.Task.coordstype!==b.Planets.Task.coords+":"+b.Planets.Task.type&&T.iterateChildren(t,function(e){var t,a;(t=S.check(I.parseIntAbs(e.id)))&&b.Planets.Data[t]&&b.Planets.Data[t].coords===b.Planets.Task.coords&&(3!==b.Planets.Task.type||b.Planets.Data[t].moon||(b.Planets.Task.type=1),a=b.Token.getClassSelected(b.Planets.Task.type)),T.setClassGroup(e,null,"ago_selected",a)})),t=a=null},Get:function(e,t,a){return t=(e=b.Planets.GetId(e))&&b.Planets.Data[e]&&t?b.Planets.Data[e][t]:"",6===a?S.check(t):+t||0},GetByCoords:function(e,t,a){return b.Planets.Get(b.Planets.ByCoords[e],t,a)},GetByIndex:function(e,t,a){return b.Planets.Get(b.Planets.ByIndex[e],t,a)},GetId:function(e){return e&&b.Planets.Data[e]?e:"active"===e?b.Acc.planetId:"selected"===e?b.Planets.selectedPlanet:b.Planets.ByCoordstype[e]||""},getHome:function(){var e;return b.Planets.iterate(1,function(t,a){(!e||+a<e)&&(e=+a)}),e},owncoords:function(e,t){return b.Planets.ByCoords[e]?e===b.Acc.coords?t===b.Acc.type?4:b.Planets.ByCoordstype[e+":"+t]?3:1:b.Planets.ByCoordstype[e+":"+t]?2:1:0},click:function(e){var t;e&&e.target&&(e="A"===e.target.nodeName?e.target:"A"===e.target.parentNode.nodeName?e.target.parentNode:null)&&(t=-1<(e.className||"").indexOf("moon")?3:1,T.removeClassGroup(e.parentNode,null,"ago_highlight"),T.extendClass(e.parentNode,null,b.Token.getClassHighlight(t,"active")))},clickArrow:function(e){e&&e.target&&(e=T.hasClass(e.target,null,"ago_planets_arrow_moon")?3:T.hasClass(e.target,null,"ago_planets_arrow_planet")?1:0)&&b.Planets.Action({scroll:"down",type:e})},hover:function(e){var t;e&&e.target&&(t="A"===e.target.nodeName?e.target:"A"===e.target.parentNode.nodeName?e.target.parentNode:null)&&(e="mouseover"===e.type&&-1<(t.className||"").indexOf("moon")?"ago_hover_S3":"ago_hover_S1",T.setClassGroup(t.parentNode,null,"ago_hover",e))},Action:function(e){var t,a;if(C.is(e)){if(b.Planets.switchTimeout&&clearTimeout(b.Planets.switchTimeout),t=a=b.Planets.selectedPlanet?b.Planets.Get("selected","index"):b.Planets.Get("active","index"),b.Planets.selectedPlanet&&T.removeClassGroup(T.queryAll("#planetList .smallplanet")[t-1],null,"ago_hovered"),e.scroll){e.type=e.type||b.Planets.selectedType||b.Acc.type,e.mode="set";do{"down"===e.scroll?++t>=b.Planets.ByIndex.length&&(t=1):1>--t&&(t=b.Planets.ByIndex.length-1);var n=void 0;if(1===e.type)break;if(n=b.Planets.ByIndex[t],b.Planets.Data[n].moon)break}while(t!==a)}if("set"===e.mode){var o,i=0;o=document.querySelectorAll("#planetList .smallplanet a.planetlink")[t-1],e.wait&&o&&(i=750,b.Planets.selectedPlanet=1===e.type?b.Planets.ByIndex[t]:b.Planets.GetByIndex(t,"moon",6),b.Planets.selectedType=e.type,T.addClass(o.parentNode,null,"ago_hovered_S"+e.type)),o&&(b.Planets.switchTimeout=setTimeout(function(){T.click(1===e.type?"a.planetlink":"a.moonlink",o.parentNode)},i))}else"select"===e.mode&&b.Planets.coloring&&(b.Planets.Task.coords=e.coords,b.Planets.Task.type=e.type,b.Planets.Display())}},iterate:function(e,t){var a,n;for(n=1;n<b.Planets.ByIndex.length;n++)a=b.Planets.ByIndex[n],b.Planets.Data[a]&&(e&&1!==e||t(b.Planets.Data[a],a),!(a=b.Planets.Data[a].moon)||e&&3!==e||t(b.Planets.Data[a],a))}},b.Panel={displayStatus:0,mouseStatus:!1,mouseCount:0,Data:{},Messages:function(e,t){"Display"===e?b.Panel.Display(t):"updateTab"===e?b.Panel.updateTab(t):"Action"===e?b.Panel.Action(t):"hover"===e&&b.Panel.hoverExtern(t)},Timer:function(){},Init:function(e,t){b.Panel.Data=C.is(e)?e:{},t&&(b.Panel.Display(),window.setTimeout(function(){var e;e=b.Background.Get("Panel_Target",6).split("|"),b.Background.Set("Panel_Target",""),b.Option.is("I81")&&(e[0]||e[1])&&b.Init.Messages("Token","Action",{action:"set",tab:"Target",token:81,coords:e[0],time:e[1],marked:1})},200))},Run:function(){b.Option.is("I00")&&(b.Panel.enabled=!0,b.Panel.place=Math.ceil(Math.max((+document.body.clientWidth||0)-1e3,2)/2),b.Option.is("I03")?(b.Panel.width=Math.min(b.Option.get("I03",2),b.Panel.place+190),b.Panel.space=I.minMax(Math.ceil((b.Panel.place-b.Panel.width)/2),3,40)):(b.Panel.space=I.minMax(Math.ceil((b.Panel.place-220)/3),3,40),b.Panel.width=I.minMax(b.Panel.place-4-2*b.Panel.space,190,290)),b.Panel.innerWidth=b.Panel.width-8,b.Panel.left=-(b.Panel.width+b.Panel.space+4),b.Panel.slideLeft=-(b.Panel.place-1),b.Panel.height=I.minMax(b.Option.get("I04",2)||(+window.innerHeight||0)-(b.Option.is("commander")?55:90),400,1200),b.Option.is("T00")||b.Panel.set("Tools","label",""),b.Panel.Show()),b.Box.Run()},onSwipe:function(e){"left"===e&&window.setTimeout(function(){b.Panel.panelInactive(!0)},333),"right"===e&&b.Panel.panelActive(3)},Show:function(){var e,t,a,n,o,i;(e=document.getElementById("box"))&&(t=document.createDocumentFragment(),a=(b.Panel.left<b.Panel.slideLeft?"ago_panel_slide ":"")+(C.get(b.Styles.classVisible,b.Option.get("I02",2))||""),a=T.appendDIV(t,{class:a,id:"ago_panel_button"}),T.appendSPAN(a,"ago_panel_arrow"),i=T.appendDIV(t,{id:"ago_panel"},{left:b.Panel.left+"px"}),n=T.appendDIV(i,{class:"ago_panel_wrapper"},{width:b.Panel.width+"px",minHeight:b.Panel.height+"px"}),T.appendSPAN(n,"ago_panel_arrow"),C.iterate(b.Panel.Data,function(e){b.Panel.Get(e,"label",6)&&(o=T.appendDIV(n,{id:"ago_panel_"+e}),(i=T.appendDIV(o,{class:"ago_panel_tab","ago-data":JSON.stringify({update:{tab:e,status:"toggle"}})})).textContent=b.Label.get(b.Panel.Get(e,"label",6)),T.appendSPAN(i,"ago_panel_tab_info"),T.appendDIV(o,"ago_panel_tab_header"),T.appendDIV(o,"ago_panel_tab_content"),T.appendDIV(o,"ago_panel_tab_footer"),b.Panel.Get(e,"status"))&&("Settings"===e?b.Panel.createSettings(o,e,""):b.Panel["create"+e](o,e,b.Panel.Get(e,"data",6),b.Panel.Data.Cache),T.updateClass(o,null,"ago_panel_tab_open"))}),T.appendSPAN(n,"ago_panel_arrow"),e.appendChild(t),b.Panel.updateTab(),T.addEventsAll("#ago_panel_button, #ago_panel .ago_panel_wrapper",null,{click:b.Panel.click,mouseover:b.Panel.hover,mouseout:b.Panel.hover})),e=t=a=n=o=i=null},set:function(e,t,a,n){e&&t&&b.Panel.Data[e]&&(b.Panel.Data[e][t]=a,n||w.message("Panel","Set",{tab:e,key:t,value:a}))},Get:function(e,t,a){return e=e&&b.Panel.Data[e]&&t?b.Panel.Data[e][t]:"",6===a?S.check(e):+e||0},getActive:function(e,t,a){var n;return n=e&&b.Panel.Data[e]?C.get(b.Panel.Data[e].active,t):"",6===a?S.check(n):+n||0},Display:function(e){var t,a;5<b.Init.status&&!b.Panel.updateDisplayLock&&(b.Panel.updateDisplayLock=!0,t=C.parse(e),b.Panel.enabled&&!t.tab&&C.iterate(b.Panel.Data,function(e){b.Panel.Get(e,"label",6)&&"Settings"!==e&&b.Panel.Get(e,"status")&&(t.tab=e)}),t.tab&&b.Panel.Data[t.tab]&&("Settings"!==t.tab&&("data"in t?b.Panel.set(t.tab,"data",t.data):t.data=b.Panel.Get(t.tab,"data",6)),a=document.getElementById("ago_panel_"+t.tab),b.Panel.enabled&&T.getChildren(a,2)&&(t.status="status"in t?"toggle"!==t.status?t.status:b.Panel.Get(t.tab,"status")?0:1:1,b.Panel.set(t.tab,"status",t.status),C.iterate(b.Panel.Data,function(e){var a;b.Panel.Get(e,"label",6)&&((a=b.Panel.Get(e,"status"))&&"Settings"!==e&&"Settings"!==t.tab&&e!==t.tab&&(a=0,b.Panel.set(e,"status",a)),T.updateClass("ago_panel_"+e,"id",a?"ago_panel_tab_open":""))}),"Settings"!==t.tab&&b.Panel["create"+t.tab](a,t.tab,t.data),e&&b.Panel.panelActive(2)),b.Panel.Get("Settings","status")&&b.Panel.createSettings(document.getElementById("ago_panel_Settings"),t.tab,t.data)),window.setTimeout(function(){b.Panel.updateDisplayLock=!1},50))},updateTab:function(e){var t;b.Init.status&&((e=C.get(e,"tab"))&&"Flights"!==e||(e=b.Fleet.Get("Current","fleets"),(t=b.Fleet.Get("Current","fleetsSlots"))&&T.updateText("#ago_panel_Flights .ago_panel_tab_info",null,e+"/"+t)))},createSettings:function(e,t,a,n){function o(e,t,a,n,o,s,l,c){var p;p=b.Option.get(e,2),t=b.Label.get(t||e),a=T.appendTR(i,o?"ago_panel_content_disabled":"",{setting:{id:e},update:a,message:n}),T.appendTD(a,t.length>r/7?{class:"tooltip",title:t}:null,(s?"   ":"• ")+t),t=T.appendTD(a),t=T.append(t,"input",{type:l||"checkbox"},null,{change:b.Panel.changeSetting}),"radio"===l?(t.name="ago_panel_settings_"+e,t.checked=p===c,t.value=c):"text"===l?t.value=p||"":t.checked=Boolean(p)}var i,r;if(r=b.Panel.innerWidth-25,a=document.createDocumentFragment(),i=T.appendTABLE(a,"ago_panel_settings",{width:b.Panel.innerWidth+"px"},[r,25]),n)switch(t){case"Account":o("I21","I21",{tab:t,data:""},"","","","radio",1),o("I21","I41",{tab:t,data:""},"","","","radio",2),o("I22","",{tab:t},"",2===b.Option.get("I21",2));break;case"Flights":o("I41","I21",{tab:t,data:""},"","","","radio",1),o("I41","I41",{tab:t,data:""},"","","","radio",2),o("I42","I22",{tab:t},"",2===b.Option.get("I41",2));break;case"Construction":o("I31","",{tab:t}),o("I32","I22",{tab:t}),o("I35","",{tab:t});break;case"Target":o("I82","",{tab:t},{page:"Main",role:"Display"}),o("I83","",{tab:t},{page:"Main",role:"Display"});break;case"Tools":o("T01","",{tab:t}),o("","T05")}else switch(b.App.page){case"resources":case"station":case"research":o("B11","",{tab:"Settings"},{page:"Page",role:"Display"}),o("B12","",{tab:"Settings"},{page:"Page",role:"Display"},!b.Option.is("B11"),"indent");break;case"shipyard":case"defense":o("B11","",{tab:"Settings"},{page:"Page",role:"Display"});break;case"fleet2":o("F16");break;case"fleet3":o("F18");break;case"movement":o("E14");break;case"messages":o("M51","","",{page:"Page",role:"toggleSpiohelper"}),o("M53"),function(e,t,a,n,o){var s,l,c;c=b.Option.get(e,2),t&&(t=b.Label.get(t),s=T.appendTR(i),l=t.length>r/7?{class:"tooltip",title:t}:null,l=T.appendTD(s,l),T.innerHTML(l,null,"&bull;&thinsp;"+t),T.appendTD(s)),s=T.appendTR(i,"ago_panel_settings_select",{setting:{id:e},update:a,message:n}),e=T.appendTD(s,{colspan:2}),T.appendSELECT(e,"dropdownInitialized",o,S.zero(c),{change:b.Panel.changeSetting})}("M30","M30","",{page:"Page",role:"changeStatus"},{0:" - ",1:"M31",2:"M32",3:"M33",4:"M34",5:"M35"})}T.replaceChildren(T.getChildren(e,1),a),a=i=null},changeSetting:function(e){var t;e&&e.currentTarget&&(t=T.getData(e.currentTarget,null,2),C.is(t.setting)&&(e="checkbox"!==e.currentTarget.type?+e.currentTarget.value||0:e.currentTarget.checked?1:0,b.Option.set(t.setting.id,e,2),C.is(t.update)&&b.Panel.Display(t.update),C.is(t.message)&&("data"in t.message||(t.message.data=e),b.Init.Messages(t.message.page,t.message.role,t.message.data))))},createAccount:function(e,t,a){var n,o;a&&b.Option.set("I21",0,2),2===b.Option.get("I21",2)?n="account":(n=b.Planets.GetId(a)||b.Planets.GetId("active"),b.Option.is("I22")&&(o=b.Planets.Get(n,"moon",6)||b.Planets.Get(n,"planet",6))),w.message("Panel","ListAccount",{planet:n,moon:o},function(n){var o,i,r,s,l,c,p,u,d,m;n&&n.tab&&(a&&b.Option.set("I21",0,2),b.Panel.createSettings(e,t,a,"intern"),m="account"===(d=2===b.Option.get("I21",2)?"account":b.Planets.GetId(a)||b.Planets.GetId("active"))?"account":b.Planets.Get(d,b.Option.is("I22")?"coords":"coordstype",6),o=document.createDocumentFragment(),i=T.appendTABLE(o,"ago_panel_overview",{width:b.Panel.innerWidth+"px"},[58,b.Panel.innerWidth-96,38]),b.Planets.iterate(1,function(e,a){u=e.moon,p=a===d?"ago_color_planet":u===d?"ago_color_moon":"",r=T.appendTR(i,p,{tab:t,data:e.coordstype}),p=9<=e.coords.length?"ago_panel_overview_coords_small":"ago_panel_overview_coords",T.appendTD(r,p,e.coords),T.appendTD(r,"ago_panel_overview_name",e.name),s=T.appendTD(r,"ago_panel_overview_status"),T.appendSPAN(s).style.backgroundColor=n.statusColor[a]||"#6A0A0A",u&&(T.setData(s,null,{tab:t,data:b.Planets.Data[u].coordstype}),T.appendSPAN(s).style.backgroundColor=n.statusColor[u]||"#6A0A0A",T.appendIMG(s,b.Planets.Data[u].img))}),c=(l=b.Events.calculate("ownership"))[m]?l[m].own:null,l=l[m]?l[m].neutral:null,c&&b.Option.is("I24")&&(b.Task.addResources(n.Units,c),b.Task.addShips(n.Units,c)),l&&b.Option.is("I26")&&b.Task.addResources(n.Units,l),b.Panel.appendUnits(o,n.Units,"I27",!0,t,3,2),b.Panel.appendUnits(o,c,"I24","I24",t,2,1,"ago_color_own"),b.Panel.appendUnits(o,l,"I26","I26",t,1,0,"ago_color_neutral"),T.replaceChildren(T.getChildren(e,2),o),o=i=r=s=null)})},appendUnits:function(e,t,a,n,o,i,r,s){function l(e,t,a,n,o){return e=T.appendLI(p,t,a,10),0<o?T.appendSPAN(e,"ago_panel_content_value",n,3):(a=0>o?"I0E":"I0A",T.appendSPAN(e,{class:"tooltip ago_panel_content_value ago_panel_content_unavailable",title:b.Label.get("I0B")},a,10)),e}function c(e,t,a,n){for(var o in a)(t[o]||n)&&(a=T.appendLI(e,"",o,11),T.appendSPAN(a,"ago_panel_content_value",t[o],2))}var p,u,d,m;t&&(m="string"==typeof n?b.Option.is(n):n,(p=document.createElement("ul")).className="ago_panel_content",d=m?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",d=s?d+" "+s:d,i&&(2<=i||t.resources||t.timeShip)&&(u=l(p,d,a,t.resources,t.timeResource),"string"==typeof n&&(T.setData(u,null,{setting:{id:n},update:{tab:o}}),T.append(u,"input",{type:"checkbox"},{display:"none"},{change:b.Panel.changeSetting},{checked:Boolean(m)})),m&&t.timeResource&&(3<=i||t.resources)&&c(p,t,b.Item.Resource,3<=i)),r&&m&&((2<=r||t.shipsCivil)&&(u=l(p,d,"I28",t.shipsCivil,t.timeShip),t.shipsCivil&&c(p,t,b.Item.ShipCivil)),(2<=r||t.shipsCombat)&&(u=l(p,d,"I29",t.shipsCombat,t.timeShip),t.shipsCombat&&c(p,t,b.Item.ShipCombat))),u&&e.appendChild(p)),p=u=null},createFlights:function(e,t,a){function n(e,t,a){T.appendSPAN(e,C.get(b.Styles.classFleet,a),t&&t.fleets?t.fleets:"  ")}var o,i,r,s,l,c,p,u,d,m;a&&b.Option.set("I41",0,2),b.Panel.createSettings(e,t,a,"intern"),o=document.createDocumentFragment(),i=T.appendTABLE(o,"ago_panel_overview",{width:b.Panel.innerWidth+"px"},[58,b.Panel.innerWidth-130,72]),(c=b.Events.calculate("flights")).account?(m=2!==b.Option.get("I41",2)&&b.Option.is("I42"),a=c[a]?a:"",d=2===b.Option.get("I41",2)?"account":b.Planets.Get(a||"active","coordstype",6)||a,u="account"===d?"account":m?b.Task.cutCoords(d):d,b.Planets.iterate(0,function(e){(l=c[e.coordstype])&&(p=u===e.coords||d===e.coordstype?A.classType(e.type):"",r=T.appendTR(i,p,{tab:t,data:e.coordstype}),p=9<=e.coords.length?"ago_panel_overview_coords_small":"ago_panel_overview_coords",s=T.appendTD(r,p,e.coords),p=d===e.coordstype?"ago_panel_overview_name":"ago_panel_overview_name ago_color_normal",s=T.appendTD(r,p),3===e.type&&T.appendIMG(s,e.img,"11px"),T.appendTEXT(s,e.name),n(s=T.appendTD(r,"ago_panel_fleets"),l.hostile,1),n(s,l.neutral,2),n(s,l.back,4),n(s,l.own,3))}),u&&c[u]&&(("account"===u||m)&&(r=T.append(o,"ul","ago_panel_content"),s=T.appendLI(r,"ago_panel_content_header","I47",10),n(a=T.appendSPAN(s,"ago_panel_content_value ago_panel_fleets"),c[u].hostile,1),n(a,c[u].neutral,2),n(a,c[u].back,4),n(a,c[u].own,3),n(a,c[u].friend,5),n(a,c[u].enemy,6)),b.Panel.appendUnits(o,c[u].own,"I24",!0,t,2,1,"ago_color_own"),b.Panel.appendUnits(o,c[u].back,"I25",!0,t,2,1,"ago_color_reverse"),b.Panel.appendUnits(o,c[u].neutral,"I26",!0,t,1,1,"ago_color_neutral"),b.Panel.appendUnits(o,c[u].hostile,"I26",!0,t,0,1,"ago_color_hostile"))):(r=T.appendTR(i),(s=T.appendTD(r,{colspan:3})).style.textAlign="right",T.appendSPAN(s,{class:"tooltip ago_panel_content_unavailable",title:b.Label.get("I0D")},"I0C",10)),T.replaceChildren(T.getChildren(e,2),o),o=i=r=s=a=null},createConstruction:function(e,t,a,n){function o(e){var t;return t=Math.max(e.level+e.increase,200>e.id?0:1),(e=P.status(e.increase,-1*e.range,0,e.range))?t+"-"+(t+e):t||"0"}function i(e,t,a,n,o,i,r,l){var p,u,d;for(u in d={metal:0,crystal:0,deuterium:0,resources:0},b.Item.Resource)(0<c[u]||!c.resources)&&(d[u]=t&&+t[u]||0,d.resources+=d[u]);if((o||d.resources)&&(o="string"==typeof n?b.Option.is(n):n,a&&(p=o?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",a=T.appendLI(e,l?p+" "+l:p,a,10),l=t&&t.timeResource?T.appendSPAN(a,"ago_panel_content_value",d.resources,3):T.appendSPAN(a,{class:"tooltip ago_panel_content_value ago_panel_content_unavailable",title:b.Label.get("I0B")},"I0A",10),"string"==typeof n&&(T.setData(a,null,{setting:{id:n},update:{tab:"Construction"}}),T.append(l,"input",{type:"checkbox"},{display:"none"},{change:b.Panel.changeSetting},{checked:Boolean(o)}))),d&&d.resources&&o&&t.timeResource))for(u in b.Item.Resource)d[u]&&(o&&i&&(s[u]=Math.max(s[u]-(d[u]||0),0)),p=o?"":"ago_panel_content_disabled",a=T.appendLI(e,p,u,11),p=r?0<s[u]?"ago_panel_content_value ago_color_palered":"ago_panel_content_value ago_color_lightgreen":"ago_panel_content_value",T.appendSPAN(a,p,d[u],2))}var r,s,l,c,p,u,d,m,g;b.Panel.createSettings(e,t,"","intern"),c={metal:0,crystal:0,deuterium:0,resources:0,count:0},b.Task.updateCoordsType(c,a),p=C.create(c),(l=C.create(c)).routine=2,m=b.Option.is("I31"),g=b.Option.is("I35"),u=c.coordstype,d=b.Option.is("I32")?c.coords:u,n={active:b.Acc.planetId},g?n.planet="account":(n.planet=b.Planets.GetId(u),b.Option.is("I32")&&(n.moon=b.Planets.Get(n.planet,"moon",6)||b.Planets.Get(n.planet,"planet",6))),w.message("Construction","List",n,function(n){var f,y,h,v,_,P,I,k,w,x,O,D,M;M=(n=n||{}).list||{},f=document.createDocumentFragment(),y=T.appendTABLE(f,"ago_panel_overview",{width:b.Panel.innerWidth+"px"},[58,b.Panel.innerWidth-96,38]),b.Planets.iterate(0,function(e){if(O=e.coordstype,C.is(M[O]))for(D=0;D<M[O].length;D++)w="",(I=M[O][D])&&(d!==e.coords&&u!==e.coordstype||(a===e.coordstype+":"+D&&(I.selected=1,C.copy({id:I.id,level:I.level,increase:I.increase,range:I.range,reserved:I.reserved},c)),C.iterate(b.Item.Resource,function(e){I[e]&&(I.reserved?(p[e]+=I[e],I.selected&&!m&&(c[e]=I[e])):(I.selected||m)&&(c[e]+=I[e]))}),w=I.reserved?"ago_color_reserved":"",(I.selected||m)&&(c.count++,w=w||A.classType(e.type))),h=T.appendTR(y,w,{tab:t,data:e.coordstype+":"+D}),v=T.appendTD(h,"ago_panel_overview_coords",e.coords),w=I.selected?"ago_panel_overview_name":"ago_panel_overview_name ago_color_normal",v=T.appendTD(h,w),3===e.type&&T.appendIMG(v,A.urlTypeIcon(3),"11px"),T.appendTEXT(v,I.id,11),w=200>I.id?"ago_panel_overview_count "+A.classStatus(I.increase):"ago_panel_overview_count ago_color_normal",v=T.appendTD(h,w),I.reserved&&(x=0>I.increase?"icon_reserved_red.gif":"icon_reserved.gif",T.appendIMG(v,A.urlImage(x),"11px")),T.appendTEXT(v,o(I)))}),c.count&&(b.Task.updateResources(c),b.Task.updateResources(p),s=C.create(c),y=T.append(f,"ul","ago_panel_content"),w=c.reserved?"ago_panel_content_action ago_panel_content_reserved":"ago_panel_content_action",h=T.appendLI(y,w),w=0>c.increase?"ago_icon_reserved_red":"ago_icon_reserved",T.appendA(h,w,null,{action:{action:"reserve",tab:t,value:a}}),T.appendA(h,"icon icon_skip_back",null,{action:{action:"decreaseRange",tab:t,value:a}}),T.appendA(h,"icon icon_rewind",null,{action:{action:"decrease",tab:t,value:a}}),w=200>c.id?A.classStatus(c.increase):"ago_color_normal",T.appendSPAN(h,w,o(c)),T.appendA(h,"icon icon_fastforward",null,{action:{action:"increase",tab:t,value:a}}),T.appendA(h,"icon icon_skip",null,{action:{action:"increaseRange",tab:t,value:a}}),T.appendA(h,"icon icon_delete",null,{action:{action:"remove",tab:t,value:a}}),k=1<c.count?"I3B":c.reserved?"I37":"I3A",i(y,c,k,!0,"always"),g&&(y=T.append(f,"ul","ago_panel_content"),T.appendLI(y,"ago_panel_content_action","Account")),P=n.Units||{},i(y,P,"I23","I33","always","reduce","colorize","ago_color_stationed"),r=b.Events.calculate("ownership"),(P=r[O=g?"account":d]&&C.is(r[O].own)?r[O].own:{}).timeResource=r.account?1:0,i(y,P,"I24","I34","","reduce","colorize","ago_color_own"),(P=r[O]&&C.is(r[O].neutral)?r[O].neutral:{}).timeResource=r.account?1:0,i(y,P,"I26","I36","","reduce","colorize","ago_color_neutral"),i(y,p,"I37","I37","","reduce","colorize","ago_color_reserved"),u===b.Acc.coordstype||g||(y=T.append(f,"ul","ago_panel_content"),P=n.Active||{},b.Option.is("I38")&&(l.mode=!0,C.iterate(b.Item.Resource,function(e){l[e]=Math.max(Math.min(s[e],P[e]),0),l.resources+=l[e]})),i(y,P,"I38","I38","always","reduce","colorize"),w=l.mode?"ago_panel_content_header":"ago_panel_content_header ago_panel_content_disabled",h=T.appendLI(y,w),x=b.Uni.path+"fleet1",C.iterateFilter(l,function(e){x+=S.addParameter(e,l[e])},"galaxy system position type metal crystal deuterium routine".split(" ")),_=T.appendA(h,{class:"btn_blue",href:x},null,null,!l.mode),T.appendTEXT(_,"F60",10),T.appendSPAN(h,"ago_panel_content_value",l.resources,2),i(y,l,"",l.mode,"always","","colorize")),m&&c.resources||!c.reserved)&&(i(y=T.append(f,"ul","ago_panel_content"),s,"I39",!0,"always","","colorize"),b.Task.updateResources(s),s.resources&&(T.appendLI(y),P={202:0,203:0,209:0,214:0},C.iterate(P,function(e){(I={action:10})[e]=Math.ceil(s.resources/b.Ogame.getShipCapacity(e)),h=T.appendLI(y,{"ago-data":JSON.stringify({message:{page:["Fleet1"],role:"Action",data:I}})},e,11),_=T.appendSPAN(h,"ago_panel_content_value",I[e],2)}))),T.replaceChildren(T.getChildren(e,2),f),f=y=h=v=_=null})},createAlliance:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=b.Panel.getActive("Alliance","id",6),a=document.createDocumentFragment(),n=b.Panel.appendTable(a),b.Panel.appendToken(n,"Alliance",t.token,t.listTab),n=b.Panel.appendTable(a),b.Panel.appendAlliance(n,"Alliance",t.token,o,t.listToken),T.replaceChildren(T.getChildren(e,2),a))}C.get(n,"tab")===t?o(n):w.message("Token","List",{tab:t,token:+a||0},o)},createPlayer:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=b.Panel.getActive("Player","id",6),a=document.createDocumentFragment(),n=b.Panel.appendTable(a),b.Panel.appendToken(n,t.tab,t.token,t.listTab),n=b.Panel.appendTable(a),b.Panel.appendPlayer(n,t.token,o,t.listToken),T.replaceChildren(T.getChildren(e,2),a))}"Player"===C.get(n,"tab")?o(n):w.message("Token","List",{tab:"Player",token:b.Panel.Get("Player","data")},o)},createTarget:function(e,t,a,n){function o(t){var a,n,o;t&&t.tab&&(o=b.Panel.getActive("Target","id",6),a=document.createDocumentFragment(),n=b.Panel.appendTable(a),b.Panel.appendToken(n,"Target",t.token,t.listTab),n=b.Panel.appendTable(a),b.Panel.appendTarget(n,t.token,o,t.listToken),T.replaceChildren(T.getChildren(e,2),a))}var i,r,s;b.Panel.createSettings(e,t,"","intern"),(i=T.getChildren(e,3))&&0===T.hasChildren(i)&&(r=T.appendTABLE(null,"ago_panel_settings",{width:b.Panel.innerWidth+"px"}),s=T.appendTR(r),s=T.appendTD(s),T.append(s,"textarea",{id:"ago_panel_textparser",class:"markItUpEditor"},null,{dblclick:b.Panel.parseTarget,blur:b.Panel.parseTarget}),i.appendChild(r)),C.get(n,"tab")===t?o(n):w.message("Token","List",{tab:t,token:+a||0,sort:b.Option.get("I84")},o)},appendToken:function(e,t,a,n){var o;C.iterate(n,function(i){var r,s;80<i&&!o&&(o=!0,r=T.appendTR(e,{colspan:3}),T.append(r,"TD",null,{height:"10px",lineHeight:"10px"})),0<n[i]&&(s=+i===a?A.classType(1):"",r={tab:t,data:i},r=T.appendTR(e,s,r),T.appendTD(r,"ago_panel_overview_coords"),T.appendTD(r,"ago_panel_overview_name "+b.Token.getClass(i),b.Token.getLabel(i)),T.appendTD(r,"ago_panel_overview_count",Math.max(n[i],0)))}),2>T.hasChildren(e)&&T.setStyleDisplay(e)},appendAlliance:function(e,t,a,n,o){var i;i=T.appendTR(e),T.appendTD(i,"ago_panel_overview_coords"),T.appendTD(i,"ago_panel_overview_name","∇"),i=T.appendTD(i,"ago_panel_overview_count"),T.appendA(i,"icon icon_delete","",{action:{action:"icon",tab:"Alliance",icon:"remove"}}),C.iterateArray(o,function(o){var i,r;C.is(o)&&(r=n===o.id?A.classType(1):"",i={action:{action:"toggle",tab:t,token:a,id:o.id}},i=T.appendTR(e,r,i),T.appendTD(i,"ago_panel_overview_coords"),T.appendTD(i,"ago_panel_overview_name",o.name||o.id),r=T.appendTD(i,"ago_panel_overview_count"),"remove"===b.Panel.Get("Alliance","icon",6)&&(i={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Alliance",token:a,id:o.id}}},T.appendA(r,"icon icon_delete","",i)))}),2>T.hasChildren(e)&&T.setStyleDisplay(e)},appendPlayer:function(e,t,a,n){var o;o=T.appendTR(e),T.appendTD(o,"ago_panel_overview_coords"),T.appendTD(o,"ago_panel_overview_name","∇"),o=T.appendTD(o,"ago_panel_overview_count"),T.appendA(o,"icon icon_delete","",{action:{action:"icon",tab:"Player",icon:"remove"}}),C.iterateArray(n,function(n){var o,i;C.is(n)&&(i=a===n.id?A.classType(1):"",o={action:{action:"toggle",tab:"Player",token:t,id:n.id}},o=T.appendTR(e,i,o),T.appendTD(o,"ago_panel_overview_coords"),T.appendTD(o,"ago_panel_overview_name",n.name||n.id),i=T.appendTD(o,"ago_panel_overview_count"),"remove"===b.Panel.Get("Player","icon",6)&&(o={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Player",token:t,id:n.id}}},T.appendA(i,"icon icon_delete","",o)))}),2>T.hasChildren(e)&&T.setStyleDisplay(e)},appendTable:function(e){return T.appendTABLE(e,"ago_panel_overview",{width:b.Panel.innerWidth+"px"},[60,b.Panel.innerWidth-85,25])},appendTarget:function(e,t,a,n){var o,i,r,s;s=b.Option.get("I84",2),r=b.Option.get("I85",2),2===s&&10>r&&(s=1),o=T.appendTR(e),i=T.appendTD(o,"ago_panel_overview_coords",["","∇","∇ "+r][s]),T.setData(i,null,{action:{action:"sort",tab:"Target",value:1===s?2:1}}),i=T.appendTD(o,"ago_panel_overview_name",s?"":"∇"),T.setData(i,null,{action:{action:"sort",tab:"Target",value:0}}),i=T.appendTD(o,"ago_panel_overview_count"),T.appendA(i,"icon icon_delete","",{action:{action:"icon",tab:"Target",icon:"remove"}}),C.iterateArray(n,function(n){var o,i,l;C.is(n)&&(l=S.check(n.coords).split(":"),(2>s||b.Acc.galaxy===+l[0]&&I.isMinMax(+l[1],b.Acc.system-r,b.Acc.system+r))&&(l=+l[3]||1,i=a===n.id?A.classType(l):"",o={tab:"Target",data:t,action:{action:"toggle",tab:"Target",token:t,id:n.id}},o=T.appendTR(e,i,o),T.appendTD(o,"ago_panel_overview_coords",b.Task.cutCoords(n.coords)),i=T.appendTD(o,"ago_panel_overview_name"),1<l&&T.appendIMG(i,A.urlTypeIcon(l),"11px"),n.time?T.appendTEXT(i,n.time,17):T.appendTEXT(i,n.name),i=T.appendTD(o,"ago_panel_overview_count"),"remove"===b.Panel.Get("Target","icon",6)&&(o={message:{page:"Token",role:"Action",data:{action:"remove",tab:"Target",token:t,id:n.id}}},T.appendA(i,"icon icon_delete","",o))))}),2>T.hasChildren(e)&&T.setStyleDisplay(e)},parseTarget:function(e){e&&e.target&&("dblclick"===e.type?e.target.value="":((e=b.Task.parseTarget(e.target.value)).coords||e.time)&&b.Token.Action({action:"set",tab:"Target",coords:e.coordstype||e.coords,time:e.time,token:81,marked:1}))},createTools:function(e,t){var a,n,o,i,r,s,l;if(b.Option.is("T00")){for(b.Panel.createSettings(e,t,"","intern"),a=document.createDocumentFragment(),s=1;9>=s;s++){for((n=document.createElement("ul")).className="ago_panel_links",T.appendLI(n,"ago_panel_links_header","T"+s+"0",10),l=0;l<b.Tools.List.length;l++)r="T"+s+b.Tools.List[l],b.Option.is(r)&&(o=T.appendLI(n),i={message:{page:"Tools",role:"Action",data:{tab:"Player",id:r}}},T.appendA(o,"",null,i).textContent=b.Option.getPair(r)[0]||b.Label.get(r));1<T.hasChildren(n)&&a.appendChild(n)}T.replaceChildren(T.getChildren(e,2),a)}},Action:function(e){var t,a;"Construction"===(t=C.get(e,"tab"))?w.message("Construction","Action",{action:e.action,value:e.value,coords:b.Acc.coordstype},b.Panel.Display):P.check(t,"Alliance","Player","Target")&&("sort"===e.action?(b.Option.set("I84",e.value,2),b.Panel.Display()):"icon"===e.action?(e.icon=b.Panel.Get(t,"icon",6)===e.icon?"":e.icon,b.Panel.set(t,"icon",e.icon,!0),b.Init.Messages("Main","Display"),b.Panel.Display()):2===e.marked||e.marked&&!b.Option.is("I82")?b.Panel.Display({tab:t,data:e.token}):("toggle"===e.action&&(e.action=b.Panel.getActive(t,"id",6)===e.id?"deselect":"select","Target"===t&&P.check(b.App.page,"fleet1","fleet2")&&(e.action="select")),a=P.check(e.action,"remove","deselect")?"":e.id,w.message("Token","Get",{tab:t,token:e.token,id:a},function(a){var n;b.Panel.set(t,"active",a),b.Panel.Display({tab:t,data:e.token}),n={arrival:+C.get(a,"time")||0},b.Task.updateCoordsType(n,C.get(a,"coords")),C.copy(n,e),"Player"===t?b.Init.Messages("Box","Action",{tab:t}):"Target"===t&&(b.Init.Messages("Main","Display"),b.Init.Messages(["Fleet1","Fleet2","Fleet3"],"Action",n)),b.Init.Messages(["Galaxy"],"Action",e)})))},click:function(e){var t;if(e&&e.target){if(t=T.getData(e.target,null,2),b.Panel.updateDisplayLock||e.target.hasAttribute("disabled"))return e.stopPropagation(),e.preventDefault(),!1;C.is(t.setting)?"INPUT"!==e.target.nodeName&&T.click("input","LI"===e.target.nodeName?e.target:e.target.parentNode):(C.is(t.message)&&("Tools"===t.message.page&&C.set(t.message.data,"shiftKeys",e.shiftKey||e.ctrlKey),b.Init.Messages(t.message.page,t.message.role,t.message.data)),C.is(t.action)?b.Panel.Action(t.action):C.is(t.update)?b.Panel.Display(t.update):t.tab&&b.Panel.Display(t),"ago_panel_button"===e.target.id||"ago_panel_arrow"===e.target.className?2<=(e=T.getAttribute("ago_panel_button","id","ago_display_status",2))?b.Panel.panelInactive(!0):b.Panel.panelActive(3):b.Panel.panelActive(2))}},hover:function(e){var t;e&&e.target&&(t=b.Panel.hoverStatus,b.Panel.mouseStatus="mouseover"===e.type,b.Panel.mouseStatus&&(!b.Option.is("I02")&&P.check("ago_panel_button",e.target.id,e.target.parentNode.id)||b.Panel.panelActive(1),b.Panel.hoverStatus=2>b.Panel.displayStatus?1:"ago_panel_button"===e.target.id||"ago_panel_arrow"===e.target.className?1:0),t!==b.Panel.hoverStatus&&T.updateAttribute("ago_panel_button","id","ago_hover_status",t,8))},hoverExtern:function(e){b.Panel.enabled&&2<=b.Panel.displayStatus&&(b.Panel.mouseStatus=Boolean(e))},panelActive:function(e){b.Panel.displayStatus=b.Panel.displayStatus||T.getAttribute("ago_panel_button","id","ago_display_status",2),b.Panel.enabled&&b.Panel.displayStatus<e&&(0>=b.Panel.mouseCount&&window.setTimeout(b.Panel.panelInactive,500),b.Panel.mouseCount=5,b.Panel.displayStatus=e,b.Panel.slideLeft=-(Math.ceil(Math.max((+document.body.clientWidth||0)-1e3,2)/2)-1),2<=e&&b.Panel.left<b.Panel.slideLeft&&T.updateStyle("ago_panel","id","left",b.Panel.slideLeft+"px"),T.updateAttribute("ago_panel_button","id","ago_display_status",I.minMax(e,0,2),8))},panelInactive:function(e){b.Panel.enabled&&(b.Panel.mouseStatus||b.Panel.mouseCount--,e||0>=b.Panel.mouseCount&&3>b.Panel.displayStatus?(b.Panel.displayStatus=0,T.updateAttribute("ago_panel_button","id","ago_display_status",0,8),T.updateStyle("ago_panel","id","left",b.Panel.left+"px")):3>b.Panel.displayStatus&&window.setTimeout(b.Panel.panelInactive,500))}},b.Box={Data:{},Current:0,Messages:function(e,t){"Action"===e&&b.Box.Action(t)},Init:function(e,t){b.Box.enabled=!0,b.Box.Data=C.is(e)?e:{},t&&b.Box.Display()},Run:function(){var e;e=b.Panel.Get("Box","data",6),b.Box.enabled&&e&&(C.get(b.Box.Data.Cache,"tab")?b.Box.Show(b.Box.Data.Cache):b.Box.Display())},Show:function(e){var t,a,n,o,i,r;if(e&&e.playerName&&Array.isArray(e.planets)){for(a=document.createDocumentFragment(),t=0;t<e.planets.length;t++)(o=e.planets[t])&&((i=b.Task.splitCoords(o.coords)).tab="Target",i.id=o.coords,i.type=1,i.action="set",r="&galaxy="+i.galaxy+"&system="+i.system+"&position="+i.position,n=o.planetId===e.planetHome?"ago_box_homeplanet":"",n=T.appendDIV(a,n),"galaxy"===b.App.page?T.appendA(n,null,null,{message:{page:"Page",role:"Action",data:i}}).textContent=o.coords:T.appendA(n,{href:"index.php?page=galaxy"+r}).textContent=o.coords,P.check(b.App.page,"fleet1","fleet2","fleet3")?(T.appendA(n,null,null,{message:{page:"Page",role:"Action",data:i}}).textContent=o.planetName,o.moonId&&(i.type=3,n=T.appendA(n,null,null,{message:{page:"Page",role:"Action",data:i}}),T.appendIMG(n,A.urlTypeIcon(3,"a"),"14px"))):(T.appendA(n,{href:"index.php?page=fleet1"+r+"&type=1"}).textContent=o.planetName,o.moonId&&(n=T.appendA(n,{href:"index.php?page=fleet1"+r+"&type=3"}),T.appendIMG(n,A.urlTypeIcon(3,"a"),"14px"))));o=e.playerName+"|Planets: "+e.planets.length+"<BR>";var s=b.Option.get("O71");(t=document.getElementById("ago_box"))?(T.setAttribute("ago_box_title","id","title",o),T.setText("ago_box_title","id",e.playerName),T.replaceChildren(document.getElementById("ago_box_content"),a),T.setStyleDisplay(t,null,"block")):a&&(t=T.appendDIV(null,{class:"ago_box",id:"ago_box"},{fontSize:"9px"}),n=T.appendDIV(t,{id:"ago_box_header"}),T.appendA(n,"ago_box_icon22 galaxy highlighted",null,{task:0===s?"home":"cycle"}),T.appendSPAN(n,{id:"ago_box_title",class:"tooltipHTML",title:o},e.playerName),T.appendA(n,"ago_icon_close",null,{action:{action:"remove"}}),(n=T.appendDIV(t,{id:"ago_box_content"})).appendChild(a),T.appendChild(document.getElementById("toolLinksWrapper"),t),T.addEvents("ago_box","id",{click:b.Box.click}))}else T.setStyleDisplay("ago_box","id")},Display:function(){var e,t;e=b.Panel.Get("Box","data",6),t=b.Panel.getActive(e,"id",6),"Player"===e&&t?w.message("Box","List",{tab:e,id:t,planets:1},b.Box.Show):b.Box.Show()},click:function(e){if(e&&e.target){if("cycle"===(e=T.getData(e.target,null,2)).task){var t=T.queryAll("#ago_box_content div").length;b.Box.Current+1>t&&(b.Box.Current=0),T.click("#ago_box_content div:nth-child("+(b.Box.Current+1)+") a:first-child")}"home"===e.task&&T.click("#ago_box_content .ago_box_homeplanet a:first-child"),C.is(e.action)&&b.Box.Action(e.action),C.is(e.message)&&b.Init.Messages(e.message.page,e.message.role,e.message.data)}},Action:function(e){b.Box.enabled&&C.is(e)&&("remove"===e.action&&(w.message("Box","List",{tab:e.tab}),e.tab=""),b.Panel.set("Box","data",e.tab),b.Box.Display())}},b.Events={status:0,included:!1,Messages:function(e,t){"highlight"===e&&b.Events.displayHighlight(t)},Run:function(){var e,t;b.Events.status=1,b.Option.is("E30")&&(b.Events.enabled=!0,b.Events.improve=b.Option.is("E31"),b.Events.modeAbbreviation=b.Option.is("E32"),b.Events.modeColorMissions=b.Option.is("CM0")),(e=document.getElementById("eventboxContent"))&&(b.Events.included=Boolean(document.getElementById("eventListWrap")),b.Events.enabled&&(t=!b.Events.included&&5>b.Events.modeBehavior?" ago_eventlist_hide":"",T.extendClass(e,null,"ago"+t),t=b.Events.modeBehavior?P.check(b.Events.modeBehavior,2,4,6,8)?3:b.Option.is("E34")?2:1:b.Events.included?1:0,e.setAttribute("ago_display_status",t),b.Events.modeBehavior&&(T.getChildren(e.parentNode,0)===e?b.Events.modeBehaviorAbove||e.parentNode.appendChild(e):b.Events.modeBehaviorAbove&&T.prependChild(e.parentNode,e),b.Styles.set("#eventboxContent:not(:first-child), #eventboxContent:first-child { display: inherit; }"))),b.Events.included&&b.Events.Content())},Ready:function(){b.Events.enabled&&b.Events.modeBehavior&&5>b.Events.modeBehavior&&(T.setStyleDisplay("eventboxContent","id"),b.Styles.set("#eventboxContent, #eventboxContent #eventListWrap { display: block; }"))},Content:function(){var e,t,a,n,o,i,r,s;if(o=1,b.Events.eData={},b.Events.last=0,e=document.getElementById("eventboxContent"),t=document.getElementById("eventListWrap"),b.Events.status&&e&&t&&T.updateAttribute(t,null,"ago-status",1,8)){for(b.Events.status=2,b.Events.enabled&&(T.removeClass(e,null,"ago_eventlist_hide"),e=t.querySelector("#eventHeader"))&&(n=document.createDocumentFragment(),a=T.appendA(n,null,{click:function(){b.Global.message({role:"reloadEvents"})}}),a=T.appendSPAN(a,"icon icon_reload ago_eventlist_reload"),b.Events.improve&&(T.appendSPAN(n,"ago_display_arrow"),e.addEventListener("click",b.Events.toggleEvents,!1)),T.prependChild(e,n)),e=t.querySelectorAll("table#eventContent > tbody > tr"),a=0;a<e.length;a++)n=I.parseIntAbs(e[a].getAttribute("data-mission-type")),A.hasClass(e[a].className,"allianceAttack")?(i="F"+(r=S.check(I.parseIntAbs(e[a].className))),s=1):A.hasClass(e[a].className,"partnerInfo")?s=(r=S.check(I.parseIntAbs(e[a].className)))===(i=T.getAttribute(".icon_movement span",e[a],"data-federation-user-id",7))?2:3:(s=r=0,i=S.check(I.parseIntAbs(e[a].id))),b.Events.eData[i]={id:i,mission:n,arrival:+e[a].getAttribute("data-arrival-time")||0,union:r||"",unionType:s||0,reverse:"true"===e[a].getAttribute("data-return-flight")},b.Events.modeColorMissions&&b.Events.eData[i].reverse&&(e[a].className+=" ago_events_reverse"),e[a].addEventListener("click",b.Events.clickRow,!1),b.Events.parseRow(e[a],b.Events.eData[i]),1!==s&&(b.Task.updateShips(b.Events.eData[i]),b.Task.updateResources(b.Events.eData[i]),3<=b.Events.eData[i].fleetType&&1!==s&&4!==n&&(b.Events.eData[i].pair=b.Events.eData[i].reverse?b.Events.eData[i-1]?b.Events.eData[i-1].pair:"":(5===n||15===n)&&b.Events.eData[i-1]&&b.Events.eData[i-1].pair?b.Events.eData[i-1].pair:o++),b.Events.improve&&(b.Events.eData[i].pair&&(e[a].setAttribute("ago-events-pair",b.Events.eData[i].pair),e[a].addEventListener("mouseover",b.Events.displayPair,!1),e[a].addEventListener("mouseout",b.Events.displayPair,!1)),b.Events.createDetails(e[a],b.Events.eData[i])));for(i in b.Events.eData)b.Events.eData.hasOwnProperty(i)&&(1===b.Events.eData[i].unionType&&(b.Task.updateShips(b.Events.eData[i]),b.Task.updateResources(b.Events.eData[i]),b.Events.improve&&b.Events.createDetails(t.querySelector("table#eventContent tr.union"+b.Events.eData[i].union),b.Events.eData[i])),2===b.Events.eData[i].fleetType&&5===b.Events.eData[i].mission&&b.Events.eData[i-1]&&(b.Events.eData[i].nocalc=!0));e=t=e=a=e=n=null}},parseRow:function(e,t){T.iterateChildren(e,function(e){var a;if(a=e.className,A.hasClass(a,"countDown"))T.addClass(e,null,A.classMission(t.mission)),e.className+=" ago_panel_add",t.fleetType=A.hasClass(a,"neutral")?2:A.hasClass(a,"hostile")?1:t.reverse?4:3;else if(A.hasClass(a,"arrivalTime"))a=(e.textContent||"").split(" ")[0],e.textContent=b.Time.convertLocal(a,"[H]:[i]:[s]");else if(A.hasClass(a,"missionFleet"))t.missionName=2<=t.unionType?"":t.unionType?b.Label.get("LM02"):T.getAttribute("img",e,"title",7).split("|")[1];else if(A.hasClass(a,"originFleet"))(a=e.querySelector("figure"))&&(t.typeOrigin=A.hasClass(a.className,"moon")?3:A.hasClass(a.className,"tf")?2:1);else if(A.hasClass(a,"coordsOrigin"))(a=e.querySelector("a"))&&(t.coordsOrigin=b.Task.trimCoords(a.textContent),t.owncoordsOrigin=b.Planets.owncoords(t.coordsOrigin,t.typeOrigin),t.owncoordsOrigin&&(t.reverse||(5===t.mission||15===t.mission)&&b.Events.last===+t.id-1||(b.Events.last=Math.max(b.Events.last,+t.id||0)),T.addClass(a,null,b.Token.getClassSelection(t.typeOrigin)),3<=t.owncoordsOrigin&&T.extendClass(e,null,b.Token.getClassHighlight(t.typeOrigin))));else if(-1<a.indexOf("icon_movement")){var n;if((a=e.querySelector("span"))&&1!==t.unionType)if(e=a.title)for(e=e.split("<td>"),2<=t.unionType&&b.Events.eData["F"+t.union]&&(b.Events.eData["F"+t.union].fleets=(b.Events.eData["F"+t.union].fleets||0)+1),a=1;a<e.length;a++)n=(e[a].split("</td>",1)[0]||"").replace(/\:/g,"").trim(),(n=b.Item.getByName(n))&&(t[n]=I.parseIntAbs(e[a].split(">",3)[2]),t[n]&&2<=t.unionType&&b.Events.eData["F"+t.union]&&(b.Events.eData["F"+t.union][n]=(b.Events.eData["F"+t.union][n]||0)+t[n]))}else A.hasClass(a,"destFleet")?(a=e.querySelector("figure"))&&(t.type=A.hasClass(a.className,"moon")?3:A.hasClass(a.className,"tf")?2:1):A.hasClass(a,"destCoords")?(a=e.querySelector("a"))&&(t.coords=b.Task.trimCoords(a.textContent),t.owncoords=b.Planets.owncoords(t.coords,t.type),t.owncoords&&(T.addClass(a,null,b.Token.getClassSelection(t.type)),3<=t.owncoords&&T.extendClass(e,null,b.Token.getClassHighlight(t.type)))):A.hasClass(a,"sendMail")&&(t.nick=T.getAttribute(T.getChildnodeByName(e,"A"),null,"title",7))})},createDetails:function(e,t){var a,n,o;1===t.unionType&&t.fleets&&T.setText(".originFleet",e,t.fleets+" / 16"),2<=t.unionType&&T.setText(".descFleet",e),2===t.unionType&&T.setText(".countDown",e,"E28",10),(a=document.createElement("td")).className="ago_eventlist_activity",3>t.fleetType?T.appendIMG(a,1===t.fleetType?"/cdn/img/galaxy/activity15.gif":"/cdn/img/galaxy/activity.gif","14px"):a.textContent=t.pair||"",T.prependChild(e,a),(a=document.createElement("tr")).className="ago_eventlist",t.pair&&(a.setAttribute("ago-events-pair",t.pair),a.addEventListener("mouseover",b.Events.displayPair,!1),a.addEventListener("mouseout",b.Events.displayPair,!1)),(n=T.appendTD(a)).setAttribute("colspan",12),o=T.appendDIV(n,"ago_eventlist_left"),t.nick&&!t.owncoordsOrigin&&T.appendSPAN(o,"ago_eventlist_player",t.nick),T.appendSPAN(o,A.classMission(t.mission),t.missionName),function(e,t){function a(e,t,a,n){e=T.appendTD(e),t&&a&&(T.appendSPAN(e,"ago_eventlist_label",t,n),T.appendTEXT(e,a,2))}var n,o,i,r,s,l;for(s in i=b.Option.is("E32")?12:11,r={ShipCivil:[],ShipCombat:[],Resource:[]},n=e.appendChild(document.createElement("table")),a(o=T.appendTR(n),"I28",t.shipsCivil||"0",10),a(o,"I29",t.shipsCombat||"0",10),a(o,"I27",t.resources||"0",10),r)if(r.hasOwnProperty(s))for(l in b.Item[s])b.Item[s].hasOwnProperty(l)&&0<t[l]&&r[s].push(l);for(s=0;9>s&&(r.ShipCivil[s]||r.ShipCombat[s]||r.Resource[s]);s++)a(o=T.appendTR(n),r.ShipCivil[s],t[r.ShipCivil[s]],i),a(o,r.ShipCombat[s],t[r.ShipCombat[s]],i),a(o,r.Resource[s],t[r.Resource[s]],i);n=o=null}(o=T.appendDIV(n,"ago_eventlist_fleet"),t),o=T.appendDIV(n,"ago_eventlist_right"),t.nick&&!t.owncoords&&T.appendSPAN(o,"ago_eventlist_player",t.nick),T.after(e,a),a=n=o=null},toggleEvents:function(e){!e.target||"H4"!==e.target.nodeName&&"ago_display_arrow"!==e.target.className||(e=T.getAttribute("eventboxContent","id","ago_display_status",2)+1,T.setAttribute("eventboxContent","id","ago_display_status",3<e?1:e,8))},clickRow:function(e){var t;e&&e.target&&A.hasClass(e.target.className,"countDown")&&(t=I.parseIntAbs(e.target.id))&&b.Events.eData[t]&&((e={action:"set",tab:"Target",marked:1,token:81,time:b.Events.eData[t].arrival,name:b.Events.eData[t].nick}).coords=b.Events.eData[t].reverse?b.Events.eData[t].coordsOrigin+":"+b.Events.eData[t].typeOrigin:b.Events.eData[t].coords+":"+b.Events.eData[t].type,b.Init.Messages("Token","Action",e))},displayPair:function(e){var t,a;a=this.getAttribute("ago-events-pair"),(t=document.getElementById("eventboxContent"))&&0<a&&("mouseover"===e.type?T.iterate(t.querySelectorAll('.eventFleet[ago-events-pair="'+a+'"], .ago_eventlist[ago-events-pair="'+a+'"]'),function(e){T.addClass(e,null,"ago_eventlist_pair")}):T.iterate(t.querySelectorAll(".eventFleet, .ago_eventlist"),function(e){T.removeClass(e,null,"ago_eventlist_pair")}))},displayHighlight:function(e){b.Events.highlightCurrent=e||0},calculate:function(e){function t(e,t,a){return e[t]||(e[t]={}),e[t][a]||(e[t][a]={metal:0,crystal:0,deuterium:0,resources:0,fleets:0,shipment:0,ships:0,shipsCivil:0,shipsCombat:0,reverse:0,timeResource:1,timeShip:1}),e[t][a]}function a(e,t,a,n,o){function i(e,t,a,n,o){a[e]=(a[e]||0)+t,n[e]=(n[e]||0)+t,o[e]=(o[e]||0)+t}var r;if(!o||"resources"===o)for(r in b.Item.Resource)e[r]&&(i(r,e[r],t,a,n),i("resources",e[r],t,a,n));if(!o||"ships"===o){for(r in b.Item.Ship)e[r]&&(i(r,e[r],t,a,n),i("ships",e[r],t,a,n),r in b.Item.ShipCivil&&i("shipsCivil",e[r],t,a,n),r in b.Item.ShipCombat&&i("shipsCombat",e[r],t,a,n));i("fleets",1,t,a,n)}}var n,o,i,r,s,l,c;if(n={},2<=b.Events.status)for(i in n.account={},b.Events.eData)0<+i&&(o=b.Events.eData[i],"ownership"===e?o.reverse?(c="own",s=o.coordsOrigin,r=o.coordsOrigin+":"+o.typeOrigin,l=o.typeOrigin,a(o,t(n,"account",c),t(n,s,c),t(n,r,c),"ships"),3===o.mission&&o.pair&&(s=o.coords,r=o.coords+":"+o.type,l=o.type),a(o,t(n,"account",c),t(n,s,c),t(n,r,c),"resources")):(s=o.coords,r=o.coords+":"+o.type,l=o.type,(c=2===o.fleetType&&3===o.mission?"neutral":3<=o.fleetType&&4===o.mission?"own":"")&&a(o,t(n,"account",c),t(n,s,c),t(n,r,c))):(o.reverse?(s=o.coordsOrigin,r=o.coordsOrigin+":"+o.typeOrigin,l=o.typeOrigin,c=o.pair?"":"back"):(s=o.coords,r=o.coords+":"+o.type,l=o.type,c=o.nocalc||!o.fleetType?"":1===o.fleetType?"hostile":2===o.fleetType?"neutral":o.owncoords?"own":""),c&&a(o,t(n,"account",c),t(n,s,c),t(n,r,c))),c&&(n[r][c].coords=s,n[r][c].coordstype=r,n[r][c].type=l));return n}},b.Chat={chatBar:0,Data:{buddies_expanded:1,ally_expanded:1,strangers_expanded:1},Run:function(){b.Option.is("O60")&&(b.Chat.popupsDeactivated=b.Option.is("O61"))&&b.Chat.removePopups(),T.addObserver(T.query("body"),{childList:!0},function(e){for(var t=0;t<e.length;t++){var a=e[t];a.addedNodes.length&&"id"in a.addedNodes[0]&&"chatBar"===a.addedNodes[0].id&&b.Chat.Content()}})},Content:function(){b.Chat.chatBar=document.getElementById("chatBar"),b.Chat.popupsDeactivated&&b.Chat.removePopups(),T.appendSCRIPT("window.setTimeout(function () {$('.js_playerlist').off('click','.playerlist_item');}, 1000);"),T.addObserver(b.Chat.chatBar,{childList:!0,subtree:!0},function(e){for(var t=0;t<e.length;t++){var a=e[t];a.addedNodes.length&&"id"in a.addedNodes[0]&&"mCSB_3"===a.addedNodes[0].id&&b.Chat.Ready()}})},Ready:function(){b.Chat.Load(),b.Chat.popupsDeactivated&&b.Chat.createLinks(),document.querySelector(".ui-dialog")||(b.Chat.Data.buddies_expanded||T.queryAll(".ui-accordion-header")[0].click(),b.Chat.Data.ally_expanded||T.queryAll(".ui-accordion-header")[1].click(),b.Chat.Data.strangers_expanded||T.queryAll(".ui-accordion-header")[2].click()),T.iterate(T.queryAll(".ui-accordion-header"),function(e){e.addEventListener("click",b.Chat.Save,!1)})},Load:function(){var e;C.hasProperties(e=b.Data.getStorage(b.App.keyPlayer+"_CHAT_DATA","JSON"))?b.Chat.Data=e:b.Data.setStorage(b.App.keyPlayer+"_CHAT_DATA",b.Chat.Data)},Save:function(){b.Chat.Data.buddies_expanded="true"===T.queryAll(".ui-accordion-header")[0].getAttribute("aria-expanded"),b.Chat.Data.ally_expanded="true"===T.queryAll(".ui-accordion-header")[1].getAttribute("aria-expanded"),b.Chat.Data.strangers_expanded="true"===T.queryAll(".ui-accordion-header")[2].getAttribute("aria-expanded"),console.log(b.Chat.Data),b.Data.setStorage(b.App.keyPlayer+"_CHAT_DATA",b.Chat.Data)},createLinks:function(){T.iterate(T.queryAll(".playerlist_item",b.Chat.chatBar),function(e){e.onclick=function(t){window.location.href="index.php?page=chat&playerId="+e.dataset.playerid}})},removePopups:function(){T.appendSCRIPT("window.setTimeout(function () {window.visibleChats = [];},0);"),T.iterate(T.queryAll("#chatBar .icon_close"),function(e){e.click()})}};var T={query:function(e,t){return"string"==typeof e?t?"object"===h(t)?t.querySelector(e):"id"===t?document.getElementById(e):document.getElementById(t)?document.getElementById(t).querySelector(e):null:document.querySelector(e):e},queryAll:function(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):e&&"object"===h(e)&&"length"in e?e:[]},findParent:function(e,t,a,n){if((e=T.query(e,t))&&a)for(n=n||0;e&&0<=n;){if(e.id===a)return e;n--,e=e.parentNode}return null},isDescendant:function(e,t){for(var a=t.parentNode;null!=a;){if(a==e)return!0;a=a.parentNode}return!1},iterate:function(e,t){var a;if(e&&"object"===h(e)&&"length"in e)for(a=0;a<e.length;a++)e[a]&&t(e[a])},iterateChildren:function(e,t){if(e)for(var a=e.firstChild;a;a=a.nextSibling)1===a.nodeType&&t(a)},hasChildren:function(e){return e&&e.children?e.children.length:0},getChildren:function(e,t){return e&&e.children?e.children[t]:null},getSelectedNode:function(e){return e&&e.options&&"selectedIndex"in e?e.options[e.selectedIndex]:null},getChildnodeByName:function(e,t){if(e&&e.children)for(var a=0;a<e.children.length;a++)if(e.children[a].tagName===t)return e.children[a];return null},prependChild:function(e,t){e&&t&&(e.childNodes.length?e.insertBefore(t,e.childNodes[0]):e.appendChild(t))},appendChild:function(e,t){e&&t&&e.appendChild(t)},before:function(e,t){e&&t&&e.parentNode.insertBefore(t,e)},after:function(e,t){e&&t&&(e.nextElementSibling?e.parentNode.insertBefore(t,e.nextElementSibling):e.parentNode.appendChild(t))},replaceChildren:function(e,t){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);t&&e.appendChild(t)}},removeChildren:function(e,t){var a;if(e)for(a=0;a<e.childNodes.length;a++)t&&e.childNodes[a].nodeType!==t||e.removeChild(e.childNodes[a])},create:function(e,t,a,n,o){var i;if(e=document.createElement(e),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);if(a)for(i in a)a.hasOwnProperty(i)&&(e.style[i]=a[i]);if(n)for(i in n)n.hasOwnProperty(i)&&e.addEventListener(i,n[i],!1);if(o)for(i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);return e},innerHTML:function(e,t,a){(e=T.query(e,t))&&(e.innerHTML=_.sanitize(a,{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|chrome-extension):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}))},parse:function(e){var t={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};if(t.optgroup=t.option,t.th=t.td,t.tbody=t.tfoot=t.colgroup=t.caption=t.thead,/<|&#?\w+;/.test(e)){var a=document.createElement("div"),n=t[(/<([\w:]+)/.exec(e)||["",""])[1].toLowerCase()]||t._default;T.innerHTML(a,null,n[1]+e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")+n[2]);for(var o=n[0]+1;o--;)a=a.lastChild;return a}return document.createTextNode(e)},append:function(e,t,a,n,o,i,r){var s;if(e=e?e.appendChild(document.createElement(t)):document.createElement(t),a)if("string"==typeof a)e.className=a;else for(s in a)a.hasOwnProperty(s)&&e.setAttribute(s,a[s]);if(n)for(s in n)n.hasOwnProperty(s)&&(e.style[s]=n[s]);if(o)for(s in o)o.hasOwnProperty(s)&&e.addEventListener(s,o[s],!1);if(i)for(s in i)i.hasOwnProperty(s)&&(e[s]=i[s]);return r&&e.setAttribute("ago-data",JSON.stringify(r)),e},appendDIV:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("div")):document.createElement("div"),t)if("string"==typeof t)e.className=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);if(a)for(n in a)a.hasOwnProperty(n)&&(e.style[n]=a[n]);return e},appendTABLE:function(e,t,a,n){var o;if((e=e?e.appendChild(document.createElement("table")):document.createElement("table")).style.tableLayout="fixed",t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);if(a)for(o in a)a.hasOwnProperty(o)&&(e.style[o]=a[o]);if(n)for(t=e.appendChild(document.createElement("colgroup")),o=0;o<n.length;o++)t.appendChild(document.createElement("col")).style.width=n[o]+"px";return e},appendTR:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("tr")):document.createElement("tr"),t)if("string"==typeof t)e.className=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);return a&&e.setAttribute("ago-data","string"==typeof a?a:JSON.stringify(a)),e},appendTD:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("td")):document.createElement("td"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=A.setText(a,n,o))&&(e.textContent=a),e},appendLI:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("li")):document.createElement("li"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=A.setText(a,n,o))&&(e.textContent=a),e},appendSPAN:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("span")):document.createElement("span"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);return(a=A.setText(a,n,o))&&(e.textContent=a),e},appendTEXT:function(e,t,a,n){(t=A.setText(t,a,n))&&e.appendChild(document.createTextNode(t))},appendIMG:function(e,t,a){var n;if(e=e?e.appendChild(document.createElement("img")):document.createElement("img"),t)if("string"==typeof t)e.src=t;else for(n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n]);if(a)if("string"==typeof t)e.style.width=e.style.height=a;else for(n in a)a.hasOwnProperty(n)&&(e.style[n]=a[n]);return e},appendA:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("a")):document.createElement("a"),t)if("string"==typeof t)e.className=t,e.href="javascript:void(0)";else for(i in t.href||(t.href="javascript:void(0)"),t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);else e.href="javascript:void(0)";if(n&&e.setAttribute("ago-data","string"==typeof n?n:JSON.stringify(n)),a)for(i in a)a.hasOwnProperty(i)&&e.addEventListener(i,a[i],!1);return o&&e.setAttribute("disabled","disabled"),e},appendSELECT:function(e,t,a,n,o){var i;if(e=e?e.appendChild(document.createElement("select")):document.createElement("select"),t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);if(o)for(i in o)o.hasOwnProperty(i)&&e.addEventListener(i,o[i],!1);for(i in a)a.hasOwnProperty(i)&&((t=e.appendChild(document.createElement("option"))).value=i,t.textContent=b.Label.get(a[i]).replace(/&lt;/g,"<"),n===i&&(e.selectedIndex=e.options.length-1));return e},appendSCRIPT:function(e,t){var a;e&&((a=document.createElement("script")).setAttribute("type","text/javascript"),a.textContent="string"==typeof e?e:"("+e.toString()+")();",document.head.appendChild(a),t&&document.head.removeChild(a))},set:function(e,t,a,n,o,i){var r;if(e=T.query(e,t)){if(a)for(r in a)a.hasOwnProperty(r)&&e.setAttribute(r,a[r]);if(n)for(r in n)n.hasOwnProperty(r)&&(e.style[r]=n[r]);if(o)for(r in o)o.hasOwnProperty(r)&&e.addEventListener(r,o[r],!1);if(i)for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}},setAll:function(e,t,a,n,o,i){for(t=T.queryAll(e,t),e=0;e<t.length;e++)T.set(t[e],null,a,n,o,i)},getText:function(e,t,a){return e=T.query(e,t),A.getText(e?e.textContent:"",a)},getTextChild:function(e,t,a){var n;if((t=T.query(e,t))&&t.childNodes)for(e=0;e<t.childNodes.length&&(3!=+t.childNodes[e].nodeType||!(n=(t.childNodes[e].nodeValue||"").trim()));e++);return A.getText(n,a)},setText:function(e,t,a,n,o){(e=T.query(e,t))&&(9===n?T.innerHTML(e,null,a||""):e.textContent=A.setText(a,n,o))},updateText:function(e,t,a,n,o){return(e=T.query(e,t))&&(a=A.setText(a,n,o))!==e.textContent?(e.textContent=a,e):null},updateTextChild:function(e,t,a,n,o){if(e=T.query(e,t)){if(a=A.setText(a,n,o),3!=+e.firstChild.nodeType)return T.prependChild(e,document.createTextNode(a)),e;if(a!==e.firstChild.textContent)return e.firstChild.textContent=a,e}return null},getAttribute:function(e,t,a,n){return e=T.query(e,t),A.getText(e?e.getAttribute(a):"",n)},setAttribute:function(e,t,a,n,o){(e=T.query(e,t))&&e.setAttribute(a,A.setValue(n,o))},removeAttribute:function(e,t,a){(e=T.query(e,t))&&e.removeAttribute(a)},updateAttribute:function(e,t,a,n,o){return(e=T.query(e,t))&&(n=A.setValue(n,o),e.getAttribute(a)!==n)?(e.setAttribute(a,n),e):null},setData:function(e,t,a){(e=T.query(e,t))&&a&&e.setAttribute("ago-data","string"==typeof a?a:JSON.stringify(a))},getData:function(e,t,a){return T.getAttributeParent(e,t,"ago-data",-2,a)},getAttributeParent:function(e,t,a,n,o){if(e=T.query(e,t))for(o=o||0;e&&0<=o;){if(e.hasAttribute(a))return T.getAttribute(e,null,a,n);o--,e=e.parentNode}return A.getText("",n)},getProperty:function(e,t,a,n){return e=T.query(e,t),A.getText(e?e[a]:"",n)},setProperty:function(e,t,a,n,o){(e=T.query(e,t))&&(e[a]=A.setValue(n,o))},updateProperty:function(e,t,a,n,o){if((e=T.query(e,t))&&(n=A.setValue(n,o),e[a]!==n))return e[a]=n,e},updatePropertyAll:function(e,t,a,n,o){for(t=T.queryAll(e,t),e=0;e<t.length;e++)T.updateProperty(t[e],null,a,n,o)},getValue:function(e,t,a){return e=T.query(e,t),A.getText(e?e.value:"",a)},setValue:function(e,t,a,n,o){(e=T.query(e,t))&&(e.value=A.setValue(a,n),o&&T.trigger(e,null,o))},updateValue:function(e,t,a,n,o){return(e=T.query(e,t))&&(a=A.setValue(a,n))!==e.value?(e.value=a,o&&T.trigger(e,null,o),e):null},hasClass:function(e,t,a){return!!(e=T.query(e,t))&&A.hasClass(e.className,a)},updateClass:function(e,t,a){return(e=T.query(e,t))&&e.className!==(a||"")?(e.className=a||"",e):null},addClass:function(e,t,a){(t=T.query(e,t))&&a&&(-1===(e=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+a.toLowerCase().trim()+" "))&&(t.className=(t.className?t.className+" ":"")+a))},extendClass:function(e,t,a){(e=T.query(e,t))&&a&&(e.className=((e.className||"")+" "+a).trim())},removeClass:function(e,t,a){var n;(t=T.query(e,t))&&a&&(-1<(n=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+a.toLowerCase().trim()+" "))&&(e=0<n?t.className.slice(0,n).trim():"",a=t.className.slice(n+a.length).trim(),t.className=e+(e&&a?" ":"")+a))},removeClassGroup:function(e,t,a){(e=T.query(e,t))&&a&&((a=(e.className||"").replace(new RegExp("(^|\\s)"+a+"(\\w|_)*","g")," ").trim())!==e.className&&(e.className=a))},setClassGroup:function(e,t,a,n){(e=T.query(e,t))&&a&&((a=(e.className||"").replace(new RegExp("(^|\\s)"+a+"(\\w|_)*","g")," ").trim()+(n?" "+n:""))!==e.className&&(e.className=a))},setStyleColor:function(e,t,a){(e=T.query(e,t))&&(e.style.color=a||"")},setStyleDisplay:function(e,t,a){(e=T.query(e,t))&&(e.style.display=a||"none")},updateStyle:function(e,t,a,n){return(e=T.query(e,t))&&e.style[a]!==(n||"")?(e.style[a]=n||"",e):null},addObserver:function(e,t,a){var n;return e&&a&&(n=new window.MutationObserver(a))&&n.observe(e,t||{childList:!0}),n},removeObserver:function(e){try{e&&e.disconnect&&e.disconnect()}catch(e){}},click:function(e,t){T.trigger(e,t,"click")},trigger:function(e,t,a){(t=T.query(e,t))&&a&&("click"===a||"mouseup"===a||"mousedown"===a||"mouseover"===a||"mouseout"===a?((e=document.createEvent("MouseEvents")).initMouseEvent(a,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)):"change"===a||"focus"===a||"blur"===a?((e=document.createEvent("HTMLEvents")).initEvent(a,!0,!1),t.dispatchEvent(e)):"keyup"===a&&("initKeyboardEvent"in(e=document.createEvent("KeyboardEvent"))?e.initKeyboardEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0):e.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0),t.dispatchEvent(e)))},addEvents:function(e,t,a){var n;if(e=T.query(e,t))for(n in a)a.hasOwnProperty(n)&&e.addEventListener(n,a[n],!1)},addEventsAll:function(e,t,a){var n;for(t=T.queryAll(e,t),e=0;e<t.length;e++)for(n in a)a.hasOwnProperty(n)&&t[e].addEventListener(n,a[n],!1)},setFocus:function(e,t){var a=T.query(e,t);a&&a.focus()},disableAutocomplete:function(){b.Option.is("U41")&&window.setTimeout(function(){T.setAll("form",null,{autocomplete:"off"})},0)},disableActiveElement:function(e){if(b.Init.mobile&&document.activeElement)if("TEXTAREA"===document.activeElement.tagName||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type)if(P.check(b.App.page,"fleet1","fleet2"))T.setFocus("continue","id");else if("fleet3"===b.App.page)T.setFocus("start","id");else try{document.activeElement.blur()}catch(e){}else e||window.setTimeout(T.disableActiveElement,30,!0)},changeInput:function(e,t){var a,n;return!(e&&t&&(!b.isFirefox||b.Option.is("U41")))||(a=e.shiftKey&&e.ctrlKey?1e3:e.ctrlKey?100:e.shiftKey?10:1,n=T.getValue(t,null,2),n=38===e.keyCode?n+a:n-a,T.setValue(t,null,Math.max(n,0)),T.trigger(t,null,"keyup"),!1)}},A={getText:function(e,t){if(1===t)return Boolean(e);if(2===t)return I.parseIntFormat(e);if(3===t)return I.parseIntAbs(e);if(7===t)return(e||"").trim();if(-2!==t)return e||"";try{return JSON.parse(e||"{}")}catch(e){return{}}},setText:function(e,t,a){return t&&(e=2===t?S.formatNumber(e):4===t?S.formatNumber(e,!0):5===t?S.shortNumber(e):3===t?e?S.formatNumber(e):"0":7===t?S.trim(e):8===t?S.zero(e):10===t?b.Label.get(e):11===t?b.Label.get(e,1):12===t?b.Label.get(e,2):15===t?b.Time.format(e,a):16===t?b.Time.format(e,a,!0):17===t?b.Time.formatTimestamp(e,a):18===t?b.Time.formatTime(e):19===t?b.Time.formatTime(e,!0):e),e?e+"":""},setValue:function(e,t){return t&&(e=1===t?Boolean(e):7===t?S.trim(e):8===t?S.zero(e):-2===t?JSON.stringify(e||{}):e),e?e+"":""},urlImage:function(e){return b.App.pathSkin+"ago/images/"+e},urlMissionIcon:function(e){return b.App.pathSkin+"ago/images/task/mission-"+(e||0)+".gif"},urlTypeIcon:function(e,t){return b.App.pathSkin+"ago/images/task/type-"+(e||0)+(t||"a")+".gif"},hasClass:function(e,t){return e=e.replace(/\s+/g," "),!!t&&-1<(" "+(e||"").toLowerCase()+" ").indexOf(" "+t.toLowerCase().trim()+" ")},classMission:function(e){return"ago_color_M"+S.trimZero(e,2)},classType:function(e){return b.Styles.classType[e]||""},classStatus:function(e){return 0<e?"ago_color_lightgreen":0>e?"ago_color_palered":"ago_color_orange"},classStatusData:function(e){return b.Styles.classStatusData[(e||0)+2]||""},colorStatusData:function(e){return b.Styles.colorStatusData[(e||0)+2]||""},color:function(e,t){return!e||4!==e.length&&7!==e.length?"":0<t&&100>t?"rgba("+(e=7===e.length?parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16):parseInt(e.substring(1,2),16)+","+parseInt(e.substring(2,3),16)+","+parseInt(e.substring(3,4),16))+(10>t?",0.0":",0.")+t+")":e},getPlayer:function(e,t,a){return(a?'<span class="honorRank '+b.Ogame.getHonorClass(a)+'">&nbsp;</span>':"")+'<span class="'+b.Token.getClass(t)+'">'+(e||"")+"</span>"}},C={parse:function(e){if(e&&"object"===h(e))return e;try{return JSON.parse(e||"{}")}catch(e){return{}}},split:function(e,t){var a,n,o,i={};for(a=S.check(e).split(t||";"),o=0;o<a.length;o++)(n=(a[o]||"").split("="))[0]&&(i[n[0]]=n[1]||"");return i},create:function(e){var t,a={};if(e&&"object"===h(e))for(t in e)"object"!==h(e[t])&&(a[t]=e[t]);return a},createKey:function(e,t){var a={};return e&&(a[e]=t),a},copy:function(e,t){if(e&&"object"===h(e)&&t&&"object"===h(t))for(var a in e)"object"!==h(e[a])&&(t[a]=e[a])},is:function(e){return e&&"object"===h(e)},hasProperties:function(e){return e&&"object"===h(e)&&Object.keys(e).length},get:function(e,t){return e&&"object"===h(e)&&t in e?e[t]:""},set:function(e,t,a){e&&"object"===h(e)&&(e[t]=a)},iterate:function(e,t){if(e&&"object"===h(e))for(var a in e)e.hasOwnProperty(a)&&t(a)},iterateFilter:function(e,t,a){if(e&&"object"===h(e))for(var n in e)e.hasOwnProperty(n)&&-1!==a.indexOf(n)&&t(n)},iterateArray:function(e,t){Array.isArray(e)&&e.forEach(t)},deleteWhere:function(e,t,a){if(e&&"object"===h(e))for(var n in e)e.hasOwnProperty(n)&&e[n][t]===a&&delete e[n]},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},P={choose:function(e){return 0<e?arguments[e]:""},select:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return arguments[t]},check:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return!0;return!1},status:function(e,t,a,n){return 0>e?t:0<e?n:a}},I={minMax:function(e,t,a){return Math.max(Math.min(+e||0,a),t)},isMinMax:function(e,t,a){return+e>=t&&+e<=a},isGreater:function(e,t){return 0<+t&&+e>=+t},isLesser:function(e,t){return 0<+e&&+t>=+e},parseInt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return"string"==typeof e?parseInt(e,10):"number"==typeof e?Math.floor(e):0}),parseIntFormat:function(e){return"string"==typeof e?+e.replace(/[^\d\-]/g,"")||0:"number"==typeof e?Math.floor(e):0},parseIntAbs:function(e){return"string"==typeof e?+e.replace(/[^\d]/g,"")||0:"number"==typeof e?Math.floor(Math.abs(e)):0},parseVersion:function(e){return(e=/(\d+)\D*(\d*)\D*(\d*)\D*(\d*)/.exec(e?e.toString():""))?parseInt(("00"+e[1]).slice(-2)+("00"+e[2]).slice(-2)+("00"+e[3]).slice(-2)+("00"+e[4]).slice(-2),10):0},parseIntShortcut:function(e){return(-1<(e=S.check(e).toLowerCase()).indexOf("k")?1e3:1)*parseInt(e.replace(/[^\d]/g,""),10)},parseIntRess:function(e){var t;return(e=S.trim(e.match(/: ([^<]+)*/)?e.match(/: ([^<]+)*/)[1]:e)).match(/^[0-9]{1,3}\.[0-9]{3}$/)?e=e.replace(".",""):(t=new RegExp("^([0-9]{1,3}(.|,))?[0-9]{1,3}("+b.Label.is("KU0B")+")"))&&e.match(t)?e=1e9*e.replace(/,/g,".").replace(b.Label.is("KU0B"),""):(t=new RegExp("^([0-9]{1,3}(.|,))?[0-9]{1,3}("+b.Label.is("KU0M")+")"))&&e.match(t)&&(e=1e6*e.replace(/,/g,".").replace(b.Label.is("KU0M"),"")),parseInt(e,10)}},S={check:function(e){return"string"==typeof e?e:"number"==typeof e&&e?e+"":""},trim:function(e){return"string"==typeof e?e.trim():"number"==typeof e&&e?e+"":""},zero:function(e){return e?"string"==typeof e?e:"number"==typeof e?e+"":"0":"0"},trimZero:function(e,t){return(e="0000"+e).substr(e.length-t)},formatNumber:function(e,t){var a="";if(e){t&&(1e9<=Math.abs(e)?(e=Math.floor(e/1e6),a=" "+b.Label.is("KU0M")):1e6<=Math.abs(e)&&(e=Math.floor(e/1e3),a=" "+b.Label.is("KU0K")));for(var n=[],o=Math.abs(+e||0)+"";;){var i=o.slice(-3);if(!i)break;n.unshift(i),o=o.substr(0,o.length-i.length)}return(0>e?"-":"")+n.join(b.Label.is("KU0S"))+a}return 0},shortNumber:function(e,t){var a,n;if(a=2===t?1:1===t?10:100,1e9<=e)a=Math.ceil(e/1e7/a)+"",n=b.Label.is("KU0B");else if(1e6<=e)a=Math.ceil(e/1e4/a)+"",n=b.Label.is("KU0M");else{if(!(1e3<=e))return e||"0";a=Math.ceil(e/10/a)+"",n=b.Label.is("KU0K")}return t?a.substr(0,a.length-t)+b.Label.is("KU0S")+a.substr(a.length-t)+" "+n:a+" "+n},getParameter:function(e,t){var a=decodeURIComponent(t||"").replace(/\?/g,"&").split("&"+e+"=")[1];return a&&a.split("&")[0].split("#")[0]||""},addParameter:function(e,t){return t=S.trim(t),e&&t?"&"+e+"="+encodeURI(t):""},splitParameter:function(e){var t,a,n;if(e=decodeURIComponent(e||"").replace(/\?/g,"&").split("#")[0])for(t={},e=e.split("&"),n=0;n<e.length;n++)(a=(e[n]||"").split("="))[0]&&(t[a[0]]=a[1]||"");return t},getMatches:function(e,t,a){a||(a=1);for(var n,o=[];n=t.exec(e);)o.push(n[a]);return o}};Node.prototype.hasClass=function(e){return!!this.classList.contains(e)},b.Notify={status:0,Problem:[],problem:0,Run:function(){b.App.reload||(b.App.upgradeAvailable&&b.Notify.set("Problem",4),b.Events.included||b.Notify.set("Problem",6),1!==b.Uni.status&&b.Notify.set("Problem",11),1!==b.Units.Data.status&&b.Notify.set("Problem",12),1!==b.Label.Data.status&&b.Notify.set("Problem",13),1!==b.App.storage&&b.Notify.set("Problem",15),1!==b.Option.Data.status&&b.Notify.set("Problem",17),b.App.twice&&b.Notify.set("Problem",18))},set:function(e,t,a){var n,o;if("Problem"===e){for(b.Notify.problem=0,(4===t&&b.Option.is("S44")||5===t&&b.Option.is("S45")||6===t&&(b.Option.is("S46")||!b.Option.is("E30"))||8===t&&b.Option.is("S48"))&&(t=0),0<t?b.Notify.Problem[t]=t:0>t&&(b.Notify.Problem[Math.abs(t)]=0),t=0;t<b.Notify.Problem.length;t++)b.Notify.Problem[t]>b.Notify.problem&&(b.Notify.problem=t);t=0}5<b.Init.status&&("Hide"===e&&(b.Notify.loading=!1),3===t&&(b.Notify.loading=!0),o=A.colorStatusData(t),3!==t&&(20<=b.Notify.problem?b.Notify.color="#FF0000":10<b.Notify.problem?b.Notify.color="#FF4B00":b.Notify.loading?b.Notify.color="#FF4B00":5<=b.Notify.problem?b.Notify.color="#FF9600":4<=b.Notify.problem?b.Notify.color="#FFB500":b.Notify.problem?b.Notify.color="#00B000":b.Notify.color="",b.Main.updateButton()),"Notify"===e?(I.isMinMax(b.Notify.problem,1,19)&&(n=b.Label.is("S"+(b.Notify.problem+60))),o=b.Notify.color):n=b.Label.is(e),5<b.Init.status&&n&&b.Main.updateInfo(e,n+(a||""),o))}},b.Option={Data:{},Start:function(){3<=b.App.mode&&(b.Option.Data=b.Data.getStorage(b.App.keyPlayer+"_Option","JSON"))},Init:function(e){b.Option.Data=C.is(e)?e:{},b.Init.mobile=b.Option.is("U51")&&(b.isMobile||1<b.Option.get("U51",2)),b.Init.touch=b.Option.is("U52")&&(b.isMobile||b.Init.mobile||1<b.Option.get("U52",2)),b.App.reload&&b.Option.Save()},Save:function(){b.Data.setStorage(b.App.keyPlayer+"_Option",{O04:b.Option.is("O04"),U31:b.Option.is("U31"),U32:b.Option.isAnd("U31","U32")})},set:function(e,t,a){e&&(t=6<=a?S.check(t):1===a?t?1:0:+t||0,b.Option.Data[e]=t,w.message("Option","Set",{id:e,value:t},function(e){e&&(b.Option.Data[e.id]=e.value)}))},get:function(e,t){return t?2===t?+b.Option.Data[e]||0:1===t?Boolean(b.Option.Data[e]):e in b.Option.Data?"string"==typeof b.Option.Data[e]?b.Option.Data[e]:S.check(b.Option.Data[e]):"":e in b.Option.Data?b.Option.Data[e]:""},is:function(e){return Boolean(b.Option.Data[e])},isAnd:function(e,t){return Boolean(b.Option.Data[e]&&b.Option.Data[t])},getPair:function(e){return 2===(e=S.check(b.Option.Data[e]).split("|",2)).length?e:""},Menu:function(){document.getElementById("ago_menu")||w.message("App","Script",{scripts:["menu"]})}},b.Label={Data:{},Init:function(e){b.Label.Data=C.is(e)?e:{}},Update:function(){var e;b.App.OgameMain&&(e={localization:b.Global.message({role:"getProperty",property:"LocalizationStrings"}),production:C.parse(b.Init.Script("production"))},w.message("Label","Update",{data:e}))},get:function(e,t){return e?(t&&(e=(2===t?"K":"L")+(b.Item.ResourceEnergy[e]?b.Item.ResourceEnergy[e]:1===e.length?"00"+e:2===e.length?"0"+e:e)),e in b.Label.Data?(b.Label.Data[e]||"").replace(/&amp;/g,"&"):e):""},is:function(e){return e in b.Label.Data?(b.Label.Data[e]||"").replace(/&amp;/g,"&"):""}},b.Styles={status:0,Data:null,opacity:33,colorStatusData:["#FF0000","#FF0000","","#008000","#FFB500","#FF4B00","#00B000"],classStatusData:"ago_color_red ago_color_red  ago_color_green ago_color_lightorange ago_color_darkorange ago_color_lightgreen".split(" "),classType:["","ago_color_planet","ago_color_debris","ago_color_moon"],classVisible:"ago_visible_hide ago_visible_hide ago_visible_weakest ago_visible_weaker ago_visible_weak ago_visible_middle ago_visible_strong ago_visible_stronger ago_visible_strongest ago_visible_show".split(" "),classFleet:" ago_color_hostile ago_color_neutral ago_color_own ago_color_reverse ago_color_friend ago_color_enemy".split(" "),Start:function(){function e(e){return e?'@import url("'+b.App.pathSkin+"ago/"+e+".css"+(b.App.beta?"?"+(new Date).getTime():"")+'");':""}var t,a,n=[];3<=b.App.mode&&b.App.keyPlayer&&(document.documentElement.style.overflowY="scroll","Color"in(a=b.Data.getStorage(b.App.keyPlayer+"_Styles","JSON"))&&(b.Styles.status=1,b.Styles.Data=a,C.is(a.colorType)&&(b.Styles.colorType=a.colorType),C.is(a.Page)||(a.Page={}),t=b.App.page,C.is(a[t])&&("file"in a[t]&&(a.Page.file=a[t].file),"improve"in a[t]&&(a.Page.improve=a[t].improve),"events"in a[t]&&(a.Page.events=a[t].events)),a.Events&&(b.Events.modeBehavior=+a.Page.events||0,b.Events.modeBehaviorAbove=P.check(b.Events.modeBehavior,1,2,5,6),b.Events.modeBehavior&&(b.Events.modeBehaviorAbove?n.push("#eventboxContent:not(:first-child){display:none;}"):n.push("#eventboxContent:first-child{display:none;}"),5>b.Events.modeBehavior&&n.push("#eventboxContent, #eventboxContent #eventListWrap{ display: none; }"))),a.Styles=n.join(""),t=document.createDocumentFragment(),T.append(t,"style",{type:"text/css",media:"screen"}).textContent=e(a.Main)+e(a.Planets)+e(a.Events)+e(a.Page.file)+e(a.Mobile)+(a.Skin||"")+(a.Color||""),b.isFirefox&&document.head&&3>b.App.beta?T.appendChild(document.head,t):T.prependChild(document.documentElement,t),window.setTimeout(b.Styles.preload,5)))},Init:function(){var e;e=document.createDocumentFragment(),b.Styles.Sheet=T.append(e,"style",{type:"text/css",media:"screen"}),(b.App.Ogame||window.location.href.indexOf("component=empire")>-1)&&C.is(b.Styles.Data)&&(C.get(b.Styles.Data.Page,"improve")&&("overview"===b.App.page&&1!==b.Acc.type||T.extendClass(document.body,null,"ago_improve")),b.Styles.set(b.Styles.Data.Styles)),document.head.appendChild(e)},Load:function(e){b.App.Ogame&&(1!==b.Styles.status||b.App.reload||e)&&(w.Log("Update   - Styles   :",!0),w.message("Styles","Init",{mobile:b.App.OgameMobile},function(e){b.Data.setStorage(b.App.keyPlayer+"_Styles",e),1!==b.Styles.status&&(b.Styles.Start(),b.Styles.Init())}))},set:function(e){S.check(e)&&b.Styles.Sheet&&b.Styles.Sheet.appendChild(document.createTextNode(e))},preload:function(){var e,t;for(e=["menu_logo.png"],t=0;t<e.length;t++)(new window.Image).src=A.urlImage(e[t]);if(P.check(b.App.page,"fleet1","fleet2")){for(e=["0",1,2,3,4,5,6,7,8,9,10,13,15],t=0;t<e.length;t++)(new window.Image).src=A.urlImage("task/mission-"+e[t]+".gif");for(e="0a 0b 1a 1b 1c 2a 2b 3a 3b 3c".split(" "),t=0;t<e.length;t++)(new window.Image).src=A.urlImage("task/type-"+e[t]+".gif")}else"fleet3"===b.App.page&&((new window.Image).src=A.urlImage("fleet3_send_green.gif"),(new window.Image).src=A.urlImage("fleet3_send_orange.gif")),(new window.Image).src=A.urlImage("task/type-3a.gif")}},b.Item={1:{metal:60,crystal:15,deuterium:0,factor:1.5},2:{metal:48,crystal:24,deuterium:0,factor:1.6},3:{metal:225,crystal:75,deuterium:0,factor:1.5},4:{metal:75,crystal:30,deuterium:0,factor:1.5},12:{metal:900,crystal:360,deuterium:180,factor:1.8},14:{metal:400,crystal:120,deuterium:200,factor:2},15:{metal:1e6,crystal:5e5,deuterium:1e5,factor:2},21:{metal:400,crystal:200,deuterium:100,factor:2},22:{metal:1e3,crystal:0,deuterium:0,factor:2},23:{metal:1e3,crystal:500,deuterium:0,factor:2},24:{metal:1e3,crystal:1e3,deuterium:0,factor:2},25:{metal:2645,crystal:0,deuterium:0,factor:2.3},26:{metal:2645,crystal:1322,deuterium:0,factor:2.3},27:{metal:2645,crystal:2645,deuterium:0,factor:2.3},31:{metal:200,crystal:400,deuterium:200,factor:2},33:{metal:0,crystal:5e4,deuterium:1e5,factor:2},34:{metal:2e4,crystal:4e4,deuterium:0,factor:2},36:{metal:200,crystal:0,deuterium:50,factor:5},41:{metal:2e4,crystal:4e4,deuterium:2e4,factor:2},42:{metal:2e4,crystal:4e4,deuterium:2e4,factor:2},43:{metal:2e6,crystal:4e6,deuterium:2e6,factor:2},44:{metal:2e4,crystal:2e4,deuterium:1e3,factor:2},106:{metal:200,crystal:1e3,deuterium:200,factor:2},108:{metal:0,crystal:400,deuterium:600,factor:2},109:{metal:800,crystal:200,deuterium:0,factor:2},110:{metal:200,crystal:600,deuterium:0,factor:2},111:{metal:1e3,crystal:0,deuterium:0,factor:2},113:{metal:0,crystal:800,deuterium:400,factor:2},114:{metal:0,crystal:4e3,deuterium:2e3,factor:2},115:{metal:400,crystal:0,deuterium:600,factor:2},117:{metal:2e3,crystal:4e3,deuterium:600,factor:2},118:{metal:1e4,crystal:2e4,deuterium:6e3,factor:2},120:{metal:200,crystal:100,deuterium:0,factor:2},121:{metal:1e3,crystal:300,deuterium:100,factor:2},122:{metal:2e3,crystal:4e3,deuterium:1e3,factor:2},123:{metal:24e4,crystal:4e5,deuterium:16e4,factor:2},124:{metal:4e3,crystal:8e3,deuterium:4e3,factor:1.75},199:{metal:0,crystal:0,deuterium:0,factor:3},202:{metal:2e3,crystal:2e3,deuterium:0,retreat:1e3,drive:"115",speed:5e3,capacity:5e3,consumption:10},203:{metal:6e3,crystal:6e3,deuterium:0,retreat:3e3,drive:"115",speed:7500,capacity:25e3,consumption:50},204:{metal:3e3,crystal:1e3,deuterium:0,retreat:4e3,drive:"115",speed:12500,capacity:50,consumption:20},205:{metal:6e3,crystal:4e3,deuterium:0,retreat:1e4,drive:"117",speed:1e4,capacity:100,consumption:75},206:{metal:2e4,crystal:7e3,deuterium:2e3,retreat:29e3,drive:"117",speed:15e3,capacity:800,consumption:300},207:{metal:45e3,crystal:15e3,deuterium:0,retreat:6e4,drive:"118",speed:1e4,capacity:1500,consumption:500},208:{metal:1e4,crystal:2e4,deuterium:1e4,retreat:1e4,drive:"117",speed:2500,capacity:7500,consumption:1e3},209:{metal:1e4,crystal:6e3,deuterium:2e3,retreat:4500,drive:"115",speed:2e3,capacity:2e4,consumption:300},210:{metal:0,crystal:1e3,deuterium:0,retreat:0,drive:"115",speed:1e8,capacity:0,consumption:1},211:{metal:5e4,crystal:25e3,deuterium:15e3,retreat:9e4,drive:"117",speed:4e3,capacity:500,consumption:1e3},212:{metal:0,crystal:2e3,deuterium:500,retreat:0,drive:0,speed:0,capacity:0,consumption:0},213:{metal:6e4,crystal:5e4,deuterium:15e3,retreat:125e3,drive:"118",speed:5e3,capacity:2e3,consumption:1e3},214:{metal:5e6,crystal:4e6,deuterium:1e6,retreat:1e7,drive:"118",speed:100,capacity:1e6,consumption:1},215:{metal:3e4,crystal:4e4,deuterium:15e3,retreat:85e3,drive:"118",speed:1e4,capacity:750,consumption:250},401:{metal:2e3,crystal:0,deuterium:0,retreat:2e3},402:{metal:1500,crystal:500,deuterium:0,retreat:2e3},403:{metal:6e3,crystal:2e3,deuterium:0,retreat:8e3},404:{metal:2e4,crystal:15e3,deuterium:2e3,retreat:37e3},405:{metal:2e3,crystal:6e3,deuterium:0,retreat:8e3},406:{metal:5e4,crystal:5e4,deuterium:3e4,retreat:13e4},407:{metal:1e4,crystal:1e4,deuterium:0,retreat:2e4},408:{metal:5e4,crystal:5e4,deuterium:0,retreat:1e5},502:{metal:8e3,crystal:0,deuterium:2e3,retreat:0},503:{metal:12500,crystal:2500,deuterium:1e4,retreat:0},Mining:{1:1,2:1,3:1,4:1,12:1,22:1,23:1,24:1,25:1,26:1,27:1,212:1},Station:{14:1,15:1,21:1,31:1,33:1,34:1,36:1,41:1,42:1,43:1,44:1},Ship:{202:1,203:1,204:2,205:2,206:2,207:2,208:1,209:1,210:1,211:2,212:3,213:2,214:2,215:2},ShipCivil:{202:1,203:1,208:1,209:1,210:1},ShipCombat:{204:2,205:2,206:2,207:2,215:2,211:2,213:2,214:2},ShipTransport:{203:1,202:1,209:1,214:1},Defense:{401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,502:2,503:2},Resource:{metal:"091",crystal:"092",deuterium:"093"},ResourceEnergy:{metal:"091",crystal:"092",deuterium:"093",energy:"094"},Coordinates:{galaxy:1,system:1,position:1},CoordinatesType:{galaxy:1,system:1,position:1,type:1},Type:{1:"planet",2:"debris",3:"moon"},Research:{106:8,108:10,109:3,110:6,111:2,113:12,114:8,115:6,117:6,118:8,120:-12,121:5,122:7,123:0,124:8,199:-1},ByName:{},Mission:{M15:0,M07:0,M08:0,M03:0,M04:0,M06:0,M05:0,M01:0,M02:0,M09:0},Init:function(e){b.Item.ByName=e||{}},getByName:function(e){return e&&b.Item.ByName[e]||""},check:function(e,t,a){return(e=S.check(e))&&t&&e in t?e:S.check(a)},valid:function(e){return 1<=+e&&503>=+e&&e in b.Item?e:""},create:function(e){var t,a={};for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)b.Item[e[t]]&&C.iterate(b.Item[e[t]],function(e){a[e]=0});return a}},b.Ogame={getFleetDistance:function(e,t){var a;if(C.is(e)&&C.is(t)){if(a=Math.abs(e.galaxy-t.galaxy))return b.Uni.donutGalaxy&&a>Math.floor(b.Uni.galaxies/2)&&(a=Math.abs(a-b.Uni.galaxies)),2e4*a;if(a=Math.abs(e.system-t.system))return b.Uni.donutSystem&&a>Math.floor(b.Uni.systems/2)&&(a=Math.abs(a-b.Uni.systems)),95*a+2700;if(a=Math.abs(e.position-t.position))return 5*a+1e3}return 5},getFleetDuration:function(e,t,a){return e in b.Item.Ship&&t?Math.round((35e3/(a||10)*Math.sqrt(10*t/b.Ogame.getShipSpeed(e))+10)/(+b.Uni.speedFleet||1)):0},getShipConsumption:function(e,t,a){return e in b.Item.Ship&&b.Item[e].consumption&&t&&a?(a=35e3/(a*b.Uni.speedFleet-10)*Math.sqrt(10*t/b.Ogame.getShipSpeed(e)),b.Item[e].consumption*t/35e3*(a/10+1)*(a/10+1)*b.Uni.globalDeuteriumSaveFactor):0},getShipCapacity:function(e){var t="210"===e&&b.Uni.probeCargo?b.Uni.probeCargo:b.Item[e].capacity;return Math.round(t*(1+(b.Units.get("114")||0)*(b.Uni.cargoHyperspaceTechMultiplier/100)))},getShipSpeed:function(e){return b.Ogame.initShipSpeed&&(b.Ogame.initShipSpeed(),b.Ogame.initShipSpeed=null),b.Item[e].speed},initShipSpeed:function(){var e=5070900<=I.parseVersion(b.App.versionOGame);C.iterate(b.Item.Ship,function(t){var a,n,o,i;"202"===t&&5<=b.Units.get("117")?(a=1e4,n="117",i=20):"209"===t&&15<=b.Units.get("118")?e&&(a=6e3,n="118",i=900):"209"===t&&17<=b.Units.get("117")?e&&(a=4e3,n="117",i=600):"211"===t&&8<=b.Units.get("118")?(a=5e3,n="118",i=1e3):(a=b.Item[t].speed,n=b.Item[t].drive,i=b.Item[t].consumption),n&&(o="115"===n?.1:"117"===n?.2:.3,b.Item[t].speed=Math.floor(a*(10+b.Units.get(n)*o*10)/10),b.Item[t].consumption=i)})},getDebris:function(e,t){var a,n,o,i,r,s={};if(C.copy(e,s),a={metal:0,crystal:0},C.is(s))for(o in t=t&&b.Uni.defToTF,n=b.Uni.debrisFactor||.3,i=b.Uni.debrisFactorDef||.3,r=b.Uni.repairFactor||.7,s)s[o]&&(b.Item.Ship[o]||t&&1===b.Item.Defense[o]&&(n=i)&&(s[o]=s[o]*(1-r)))&&(a.metal+=Math.floor(s[o]*Math.floor(b.Item[o].metal*n)),a.crystal+=Math.floor(s[o]*Math.floor(b.Item[o].crystal*n)));return a.total=a.metal+a.crystal,a.recs=Math.ceil(a.total/b.Ogame.getShipCapacity("209")),a.enough=0<a.total&&a.total>=1e3*b.Option.get("M37",2),a},chooseTopscore:function(e,t,a,n,o,i,r,s){var l=Math.max(b.Uni.topScore,b.Option.get("S29",2));return 1e5>l?e:1e6>l?t:5e6>l?a:25e6>l?n:5e7>l?o:75e6>l?i:1e8>l?r:s},getConsumptionDeuterium:function(e,t){var a;return a="12"===e?10*t*Math.pow(1.1,t):0,Math.floor(a)*b.Uni.speed},getConsumptionEnergy:function(e,t){var a;return"1"===e?Math.pow(1.1,t):"2"===e?Math.pow(1.1,t):"3"===e&&Math.pow(1.1,t),(a="1"===e||"2"===e?10:"3"===e?20:0)&&0<=t?Math.floor(a*t*Math.pow(1.1,t)):0},getProductionEnergy:function(e,t){var a,n;return a="4"===e?20*t*Math.pow(1.1,t):"12"===e?30*t*Math.pow(1.05+.01*b.Units.get("113"),t):"212"===e?Math.round(Math.floor((b.Planets.Get("active","temp")+40+140)/6)*t):0,n=b.Option.is("comstaff")?1.12:b.Option.is("engineer")?1.1:1,Math.round(n*a)},getProductionResources:function(e,t){var a,n;return a="1"===e?30*t*Math.pow(1.1,t):"2"===e?20*t*Math.pow(1.1,t):"3"===e?10*t*Math.pow(1.1,t)*(1.28-.004*b.Planets.Get("active","temp")):0,n=b.Option.is("comstaff")?1.12:b.Option.is("geologist")?1.1:1,Math.floor(n*a)*b.Uni.speed},getStandardUnitsCache:null,getStandardUnits:function(e,t){if(!b.Task.getStandardUnitsCache){var a=b.Option.get("B32",6).split(":");b.Task.getStandardUnitsCache={metal:I.minMax(+a[0]||2,1,5),crystal:I.minMax(+a[1]||1,1,5),deuterium:I.minMax(+a[2]||1,1,5)}}if(C.is(e))switch(t){case 1:return Math.ceil((+e.metal||0)*b.Task.getStandardUnitsCache.crystal/b.Task.getStandardUnitsCache.metal)+(+e.crystal||0)+Math.ceil((+e.deuterium||0)*b.Task.getStandardUnitsCache.crystal/b.Task.getStandardUnitsCache.deuterium);case 2:return Math.ceil((+e.metal||0)*b.Task.getStandardUnitsCache.deuterium/b.Task.getStandardUnitsCache.metal)+Math.ceil((+e.crystal||0)*b.Task.getStandardUnitsCache.deuterium/b.Task.getStandardUnitsCache.crystal)+(+e.deuterium||0);default:return(+e.metal||0)+Math.ceil((+e.crystal||0)*b.Task.getStandardUnitsCache.metal/b.Task.getStandardUnitsCache.crystal)+Math.ceil((+e.deuterium||0)*b.Task.getStandardUnitsCache.metal/b.Task.getStandardUnitsCache.deuterium)}return 0},getAmortisation:function(e,t,a){return C.is(t)&&0<a&&0<(e=b.Ogame.getStandardUnits(t,+e-1))?Math.floor(e/a*3600):0},getStorageCapacity:function(e){return 5e3*Math.floor(2.5*Math.pow(Math.E,20*e/33))},getPlayerHonor:function(e){if(e&&6<e.length){if(-1<e.indexOf("rank_starlord1"))return 1;if(-1<e.indexOf("rank_starlord2"))return 2;if(-1<e.indexOf("rank_starlord3"))return 3;if(-1<e.indexOf("rank_bandit1"))return 5;if(-1<e.indexOf("rank_bandit2"))return 6;if(-1<e.indexOf("rank_bandit3"))return 7}return 0},getHonorClass:function(e){return e?" rank_starlord1 rank_starlord2 rank_starlord3  rank_bandit1 rank_bandit2 rank_bandit3".split(" ")[e]:""},getJumpgateCooldown:function(e){var t=b.Units.Data.Moons&&b.Units.Data.Moons[e]&&b.Units.Data.Moons[e][43]?b.Units.Data.Moons[e][43]:1;return Math.round((14.9206*Math.pow(t,2)-453.016*t+4038.1)/b.Uni.speedFleet)}},b.Units={status:0,Data:{},Init:function(e){b.Units.Data=e||{}},Read:function(){C.iterate(b.Item.ResourceEnergy,function(e){b.Units.Data[e]=b.Units.Data[e+"Start"]=T.getText("resources_"+e,"id",2)}),b.Units.Data.resources=b.Units.Data.metal+b.Units.Data.crystal+b.Units.Data.deuterium},Run:function(){w.message("Units","Update",{planet:b.Acc.planetId,data:b.Units.Data},function(){b.Units.status=1})},Timer:function(){C.iterate(b.Item.Resource,function(e){b.Units.Data[e]=T.getText("resources_"+e,"id",2)}),b.Units.Data.resources=b.Units.Data.metal+b.Units.Data.crystal+b.Units.Data.deuterium},Update:function(e){var t;(t=new XMLHttpRequest).open("GET",b.Uni.url+"/game/index.php?page=fetchTechs&ajax=1",!0),t.setRequestHeader("Cache-Control","no-cache"),t.setRequestHeader("Pragma","no-cache"),t.overrideMimeType("text/html"),t.onerror=t.onload=function(){var a,n;b.Init.status&&(n=-1,200==+t.status&&S.check(t.responseText)[0]===String.fromCharCode(123)&&(n=4,a={planet:"account",tabs:["Research"],data:C.parse(t.responseText)},w.message("Units","Action",{planets:b.Planets.ByCoordstype,list:[a]})),w.Log("Update   - Units    : Research "+(-1===n?" failed !":"")),e&&e(n))},t.send(null)},get:function(e){return+b.Units.Data[e]||0},set:function(e,t){e&&(b.Units.Data[e]=+t||0)},activeResources:function(e){C.is(e)&&(C.iterate(b.Item.Resource,function(t){e[t]=+b.Units.Data[t]||0}),e.resources=b.Units.Data.resources)},activeProduction:function(){var e;e=C.parse(b.Init.Script("production")),C.iterate(b.Item.ResourceEnergy,function(t){e[t]&&C.is(e[t].resources)&&(b.Units.Data[t+"Storage"]=+e[t].resources.max||0,b.Units.Data[t+"Production"]=+e[t].resources.production||0)})}},b.Time={status:0,serverTime:0,ogameTime:0,timeZoneDelta:0,localTime:Date.now(),localTimeDelta:0,localTimeRun:0,duration:0,durationRun:0,Read:function(){var e;b.Time.serverTime=(new Date).setTime(1e3*b.Acc.timestamp),b.Time.localTimeDelta=b.Time.localTime-b.Time.serverTime,b.Time.localTimeDeltaAverage=b.Time.localTimeDelta,b.Time.localTimeRun=Date.now(),b.Time.pageDeltaRun=b.Time.localTimeRun-b.Time.localTime,(e=b.App.login?0:b.Option.get("delta",2))&&1200>Math.abs(b.Time.localTimeDeltaAverage-e)&&(b.Time.localTimeDeltaAverage=Math.floor((9*e+b.Time.localTimeDeltaAverage)/10)),b.Option.set("delta",b.Time.localTimeDeltaAverage),(e=(e=document.getElementById("bar"))?e.querySelector(".OGameClock"):null)&&(b.Time.status=1,b.Time.ogameTime=b.Time.parse(e.textContent).getTime(),b.Time.timeZoneDelta=-1e4*Math.round((b.Time.ogameTime-b.Time.serverTime)/1e4))},Run:function(){var e,t,a,n,o;(t=(e=document.getElementById("bar"))?e.querySelector(".OGameClock"):null)&&(b.Option.is("A31")&&b.Time.timeZoneDelta&&(b.Time.status=2,T.innerHTML(t,null,b.Time.format(b.Time.ogameTime,"[d].[m].[Y] <span>[H]:[i]:[s]</span>")),b.Option.is("A32")&&(b.Time.status=3,n=b.Time.format(b.Time.ogameTime,"[d].[m].[Y] [H]:[i]:[s]",!0)),t.title=b.Label.get("A38"),T.addClass(t,null,"tooltip"),(a=document.createElement("li")).setAttribute("style","float: right; color: #848484; font-weight: 700;"),a.textContent=t.title[0],T.after(t,a)),b.Option.is("A34")&&(o=(0<b.Time.localTimeDelta?" (+":" (-")+Math.floor(Math.abs(b.Time.localTimeDelta)/100)/10+(b.Label.is("KD0S")||"s")+")  "+b.Time.format(b.Time.ogameTime,"[H]:[i]:[s]")),(n||o)&&((t=document.createElement("div")).className="ago_clock",o&&((a=t.appendChild(document.createElement("span"))).textContent=o),n&&((a=t.appendChild(document.createElement("span"))).id="ago_clock_server",a.className="tooltip",a.title=b.Label.get("A39"),a.textContent=n),T.appendChild(e,t)))},Display:function(){var e;e=Date.now(),b.Time.duration=e-b.Time.localTime,b.Time.durationRun=b.Time.duration-b.Time.pageDeltaRun,3===b.Time.status&&(e=e-b.Time.localTimeDelta-b.Time.timeZoneDelta,T.setText("ago_clock_server","id",b.Time.format(e,"[d].[m].[Y] [H]:[i]:[s]",!0)))},timestamp:function(){return Math.floor(Date.now()/1e3)},timestampMinute:function(){return Math.floor((Date.now()-1381e9)/6e4)},getFinishTime:function(e){return(new Date).setTime(b.Time.ogameTime+b.Time.duration+1e3*(+e||0))},format:function(e,t,a){function n(e){return 0>e||9<e?e:"0"+e}return e?(!C.is(e)&&500<e&&(e=new Date(e)),1<b.Time.status&&!a&&e.setTime(e.getTime()+b.Time.timeZoneDelta),t||(t=(t=new Date).getFullYear()!==e.getFullYear()?"[d].[m].[Y] [H]:[i]:[s]":t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()?"[d].[m] [H]:[i]:[s]":"[H]:[i]:[s]"),t.split("[d]").join(n(e.getDate())).split("[m]").join(n(e.getMonth()+1)).split("[Y]").join(e.getFullYear()).split("[y]").join(e.getFullYear().toString().substr(2,4)).split("[H]").join(n(e.getHours())).split("[i]").join(n(e.getMinutes())).split("[s]").join(n(e.getSeconds()))):""},formatTimestamp:function(e,t){return 1e6<e?b.Time.format(1e3*e,t||"[d].[m].[Y] [H]:[i]:[s]",!0):""},formatTime:function(e,t){var a,n,o,i,r,s,l;return l=e,t&&(l-=31536e3*(n=Math.floor(l/86400/365)),l-=604800*(o=Math.floor(l/86400/7)),l-=86400*(i=Math.floor(l/86400))),l-=3600*(r=Math.floor(l/3600)),l-=60*(s=Math.floor(l/60)),t?(b.Time.formatTimeCacheCreate(),a=[],n&&a.push(n+b.Time.formatTimeCache.years),o&&a.push(o+b.Time.formatTimeCache.weeks),i&&a.push(i+b.Time.formatTimeCache.days),r&&3>a.length&&a.push(r+b.Time.formatTimeCache.hours),s&&3>a.length&&a.push(s+b.Time.formatTimeCache.minutes),l&&3>a.length&&a.push(l+b.Time.formatTimeCache.seconds),a.join(" ")):(0>r||9<r?r:"0"+r)+":"+(0>s||9<s?s:"0"+s)+":"+(0>l||9<l?l:"0"+l)},parseFormatedTime:function(e){var t,a,n,o=0;if(e)for(b.Time.formatTimeCacheCreate(),e=e.trim().split(" ").reverse(),n=0;n<e.length;n++)a=I.parseIntAbs(e[n]),(t=(e[n]||"").replace(/\d/g,"").trim())===b.Time.formatTimeCache.seconds&&0===n?o+=a:t===b.Time.formatTimeCache.minutes?o+=60*a:t===b.Time.formatTimeCache.hours?o+=3600*a:t===b.Time.formatTimeCache.days?o+=86400*a:t===b.Time.formatTimeCache.weeks?o+=604800*a:t===b.Time.formatTimeCache.years&&(o+=31536e3*a);return o},formatTimeCacheCreate:function(){b.Time.formatTimeCache||(b.Time.formatTimeCache={years:b.Label.is("KD0Y")||"y",weeks:b.Label.is("KD0W")||"w",days:b.Label.is("KD0D")||"d",hours:b.Label.is("KD0H")||"h",minutes:b.Label.is("KD0M")||"m",seconds:b.Label.is("KD0S")||"s"})},parseTime:function(e){return 3===(e="string"==typeof e?e.replace(/[^0-9:]/g,"").split(":"):[]).length?3600*(+e[0]||0)+60*(+e[1]||0)+(+e[2]||0):0},convertLocal:function(e,t){var a;return e&&1<b.Time.status?(t||(t="[d].[m].[Y] [H]:[i]:[s]"),(a=b.Time.parse(e,t))?b.Time.format(a,t):e||""):e||""},parse:function(e,t){t||(t="[d].[m].[Y] [H]:[i]:[s]"),e=e.toString();var a,n=t.match(/\[[dmyYHis]\]/g);if(!n||!n.length)return null;a=(a=(a=t.replace(/\./g,"\\.")).replace(/\//g,"\\/")).replace(/\-/g,"\\-");for(var o={},i=0;i<n.length;i++){var r=n[i];a="[Y]"===r?a.replace(r,"(\\d{4,4})"):"[y]"===r?a.replace(r,"(\\d{2,2})"):a.replace(r,"(\\d{1,2})"),o[r=r.substr(1,1)]=i+1}return(n=e.match(new RegExp(a,"")))&&n.length?((a=new Date).setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),n[o.s]&&a.setSeconds(n[o.s]),n[o.i]&&a.setMinutes(n[o.i]),n[o.H]&&a.setHours(n[o.H]),n[o.Y]?a.setFullYear(n[o.Y]):n[o.y]&&(i=a.getFullYear(),(i=100*Math.floor(i/100)+n[o.y])>a.getFullYear()&&(i-=100),a.setFullYear(i)),n[o.d]&&a.setDate(1),n[o.m]&&a.setMonth(n[o.m]-1),n[o.d]&&a.setDate(n[o.d]),a):null},parseDateTime:function(e,t){var a,n,o;return(e=S.check(e))&&((n=e.match(/([^\d:]|\b)\d{1,2}\.\d{1,2}(\.\d{2}|\.\d{4})*\s+\d{1,2}:\d{1,2}:\d{1,2}([^\d:]|\b)/))?(n=S.check(n[0]).replace(/[^\d:\.\s]/g,"").replace(/ +/g," ").trim().split(" "),a=S.check(n[0]).split("."),o=S.check(n[1]).split(":")):(n=e.match(/([^\d:]|\b)\d{1,2}:\d{1,2}:\d{1,2}([^\d:]|\b)/))&&(a=[],o=S.check(n[0]).replace(/[^\d:]/g,"").trim().split(":")),C.is(o)&&o.length&&24>o[0]&&60>o[1]&&60>o[2]&&((n=new Date).setMilliseconds(0),n.setSeconds(+o[2]||0),n.setMinutes(+o[1]||0),n.setHours(+o[0]||0),3===a.length&&(2e3<a[2]?n.setFullYear(+a[2]||0):100>a[2]&&((o=100*Math.floor(n.getFullYear()/100)+(+a[2]||0))>n.getFullYear()&&(o-=100),n.setFullYear(o))),2<=a.length&&(n.setDate(1),n.setMonth((+a[1]||0)-1),n.setDate(+a[0]||0)),1e9<(a=Math.floor(n.getTime()/1e3))))?t?a:n:0}},b.Task={Info:"galaxy system position type mission speed holdingtime expeditiontime union routine name detail detail2 preferCargo preferShip arrival metal crystal deuterium preferResource timeResource timeShip 202 203 204 205 206 207 208 209 210 211 212 213 214 215".split(" "),valid:function(e){return S.check(e).replace(/[\"\:]/g,"").trim()},create:function(e,t){var a,n={};for(e=e||{},a=0;15>=a;a++)n[b.Task.Info[a]]=10>a||12===a||15===a?+e[b.Task.Info[a]]||0:e[b.Task.Info[a]]||"";if(1<=t)for(a=16;20>=a;a++)n[b.Task.Info[a]]=+e[b.Task.Info[a]]||0;if(2<=t)for(a=21;35>=a;a++)n[b.Task.Info[a]]=+e[b.Task.Info[a]]||0;return n},splitActive:function(e,t,a,n){var o,i;if((o=C.split(e)).standard&&o[b.Acc.coordstype]){for(i in e=b.Task.split(o.standard,t,-1),t=b.Task.split(o[b.Acc.coordstype],t,-1))t[i]&&(e[i]=n||"string"==typeof t[i]?t[i]:Math.max(t[i],0));for(i in b.Task.updateCoords(e,a),e.resources=e.metal+e.crystal+e.deuterium,e.ships=0,b.Item.Ship)0<e[i]&&(e.ships+=e[i]);return e}return b.Task.split(o[b.Acc.coordstype]||o.standard,t,a)},split:function(e,t,a){var n,o;if(e={galaxy:+(n=S.check(e).split(":"))[0]||0,system:+n[1]||0,position:+n[2]||0,type:+n[3]||0,mission:+n[4]||0,speed:+n[5]||0,holdingtime:+n[6]||0,expeditiontime:+n[7]||0,union:+n[8]||0,routine:+n[9]||0,name:n[10]||"",detail:n[11]||"",detail2:+n[12]||0,preferCargo:n[13]||"",preferShip:n[14]||"",arrival:+n[15]||0},0<=a&&b.Task.updateCoords(e,a),1<=t&&(e.metal=+n[16]||0,e.crystal=+n[17]||0,e.deuterium=+n[18]||0,e.preferResource=+n[19]||0,e.timeResource=+n[20]||0,e.resources=e.metal+e.crystal+e.deuterium),2<=t)for(e.ships=0,e.shipsCivil=0,e.shipsCombat=0,e.timeShip=+n[21]||0,o=22;35>=o;o++)a=String(o+180),t=+n[o]||0,(e[a]=t)&&"212"!==a&&(e.ships+=t,a in b.Item.ShipCivil&&(e.shipsCivil+=t),a in b.Item.ShipCombat&&(e.shipsCombat+=t));return e},splitCoords:function(e){return{galaxy:+(e=S.check(e).split(":"))[0]||0,system:+e[1]||0,position:+e[2]||0}},join:function(e,t){var a,n;if(C.is(e)){if(a=[e.galaxy||"",e.system||"",e.position||"",e.type||"",e.mission||"",e.speed||"",e.holdingtime||"",e.expeditiontime||"",e.union||"",e.routine||"",e.name||"",e.detail||"",e.detail2||"",e.preferCargo||"",e.preferShip||"",e.arrival||""],1<=t&&(a[16]=e.metal||"",a[17]=e.crystal||"",a[18]=e.deuterium||"",a[19]=e.preferResource||"",a[20]=e.timeResource||""),2<=t)for(a[21]=e.timeShip||"",n=22;35>=n;n++)a[n]=e[String(n+180)]||"";return a.join(":")||""}return""},updateCoords:function(e,t,a){C.is(e)&&(!a&&b.Task.checkCoords(e.galaxy,e.system,e.position)?e.coords=e.galaxy+":"+e.system+":"+e.position:C.is(a)&&b.Task.checkCoords(a.galaxy,a.system,a.position)?(e.galaxy=a.galaxy,e.system=a.system,e.position=a.position,e.coords=e.galaxy+":"+e.system+":"+e.position):t&&(a||(a=e),2>=t?(e.galaxy=2===t?b.Acc.galaxy:0,e.system=2===t?b.Acc.system:0,e.position=2===t?b.Acc.position:0):(e.galaxy=I.isMinMax(a.galaxy,1,b.Uni.galaxies)?a.galaxy:3===t?b.Acc.galaxy:0,e.system=I.isMinMax(a.system,1,b.Uni.systems)?a.system:3===t?b.Acc.system:0,e.position=I.isMinMax(a.position,1,b.Uni.positions)?a.position:3===t?b.Acc.position:0),e.coords=1===t?"":e.galaxy+":"+e.system+":"+e.position),e.owncoords=b.Planets.owncoords(e.coords,e.type),e.coordstype=e.coords&&e.type?e.coords+":"+e.type:"")},updateCoordsType:function(e,t){var a;t=S.check(t),C.is(e)&&(a=t.split(":"),I.isMinMax(+a[3],1,3)&&(e.type=+a[3]||0),b.Task.checkCoords(+a[0],+a[1],+a[2])?(e.galaxy=+a[0]||0,e.system=+a[1]||0,e.position=+a[2]||0,e.coords=e.galaxy+":"+e.system+":"+e.position,e.coordstype=e.type?e.coords+":"+e.type:"",e.owncoords=b.Planets?b.Planets.owncoords(e.coords,e.type):0):(delete e.coords,delete e.coordstype,delete e.owncoords))},updateResources:function(e){C.is(e)&&(e.metal=+e.metal||0,e.crystal=+e.crystal||0,e.deuterium=+e.deuterium||0,e.resources=e.metal+e.crystal+e.deuterium,e.timeResource=+e.timeResource||1)},updateStandardUnits:function(e){C.is(e)&&(e.standardunits=b.Ogame.getStandardUnits(e,b.Option.get("B35",2)))},addResources:function(e,t){C.is(e)&&(C.is(t)&&t.timeResource?(C.iterate(b.Item.Resource,function(a){e[a]=(e[a]||0)+(t[a]||0)}),e.resources=e.metal+e.crystal+e.deuterium,e.timeResource=e.timeResource||-1):e.timeResource=e.timeResource?-1:0)},addShips:function(e,t){C.is(e)&&(C.is(t)&&t.timeShip?(e.shipsCivil=0,e.shipsCombat=0,C.iterate(b.Item.ShipCivil,function(a){e[a]=(e[a]||0)+(t[a]||0),e.shipsCivil+=e[a]}),C.iterate(b.Item.ShipCombat,function(a){e[a]=(e[a]||0)+(t[a]||0),e.shipsCombat+=e[a]}),e.ships=e.shipsCivil+e.shipsCombat,e.timeShip=e.timeShip||-1):e.timeShip=e.timeShip?-1:0)},updateShips:function(e){var t;if(C.is(e))for(t in e.ships=0,e.shipsCivil=0,e.shipsCombat=0,b.Item.Ship)e[t]&&"212"!==t?(e.ships+=e[t],t in b.Item.ShipCivil&&(e.shipsCivil+=e[t]),t in b.Item.ShipCombat&&(e.shipsCombat+=e[t])):e[t]=0},checkCoords:function(e,t,a){return 1<=e&&e<=b.Uni.galaxies&&1<=t&&t<=b.Uni.systems&&1<=a&&a<=b.Uni.positions},checkCoordsPart:function(e,t){return I.minMax(e,1,{galaxy:b.Uni.galaxies,system:b.Uni.systems,position:b.Uni.positions}[t]||0)},cutSystem:function(e){return"string"==typeof e?e.split(":",2).join(":"):""},cutCoords:function(e){return"string"==typeof e?e.split(":",3).join(":"):""},cutCoordsType:function(e){return"string"==typeof e?e.split(":",4).join(":"):""},parseTarget:function(e){var t,a,n={};return(e=S.check(e))&&((t=e.match(/([^\d:]|\b)t\s{0,2}\d{1,2}:\d{1,3}:\d{1,2}(:\d)*([^\d:]|\b)/i))&&t[0]&&(a=t[0],e=""),(t=e.match(/([^\d:]|\b)\d{1,2}\.\d{1,2}(\.\d{2}|\.\d{4})*([^\d:]|\b)/))&&t[0]&&(a=t[0]+" "+e.split(t[0])[1],e=e.split(t[0])[0]),(t=e.match(/([^\d:]|\b)\d{1,2}:\d{1,3}:\d{1,2}(:\d)*([^\d:]|\b)/))&&t[0]&&(a||(a=e.split(t[0])[1]),b.Task.updateCoordsType(n,t[0].replace(/[^\d:]/g,""))),a&&(n.time=b.Time.parseDateTime(a,!0))),n},trimCoords:function(e){var t,a;return(e=S.check(e))?(t=e.lastIndexOf("["),a=e.lastIndexOf("]"),e.slice(-1<t?t+1:0,-1<a?a:e.length).trim()):""}},b.Token={Info:{},Messages:function(e,t){"Action"===e&&b.Token.Action(t)},Init:function(e,t){C.is(e)&&(C.is(e.Info)?(b.Token.Data=e,b.Token.Info=e.Info):b.Token.Info=e),t&&(b.Token.getPlayerStatusList=null)},Action:function(e){C.is(e)&&(e.keyPlayer=b.App.keyPlayer,e.refresh="galaxy"===b.App.page,w.message("Token","Action",e,function(t){t&&t.changed&&(t.marked=e.marked,t.Data&&(b.Token.Data=t.Data,t.Data=null),b.Init.Messages("Panel","Action",t))}))},getPlayerStatus:function(e,t){var a,n,o,i,r,s;if(!b.Token.getPlayerStatusList)for(b.Token.getPlayerStatusList={},r=21;30>=r;r++)b.Token.Info[r]&&b.Token.Info[r].cls&&(b.Token.getPlayerStatusList["status_abbr_"+b.Token.Info[r].cls]=r);for(o=0,a=T.queryAll(e,t),s=0;s<a.length;s++)for(n=(a[s].className||"").split(" "),r=0;r<n.length;r++)(i=(n[r]||"").trim())&&(o=Math.max(b.Token.getPlayerStatusList[i],o));return o},getClass:function(e){return e&&b.Token.Info[e]?"status_abbr_"+(b.Token.Info[e].cls||e):""},getClassSelection:function(e){return 3>=e?"ago_selection_S"+e:"ago_selection_"+e},getClassSelected:function(e,t){return"ago_selected ago_selected_"+(3>=e?"S"+e:e)+(t?"_own":"")},getClassHover:function(e,t){return"ago_hover ago_hover_"+(3>=e?"S"+e:e)+(t?"_own":"")},getClassHighlight:function(e,t){return"ago_highlight ago_highlight_"+(3>=e?"S"+e:e)+(t?"_active":"")},getColor:function(e){return e&&b.Token.Info[e]&&b.Token.Info[e].color||""},getCondition:function(e){return e&&b.Token.Info[e]?b.Token.Info[e].condition:0},getLimit:function(e){return e&&b.Token.Info[e]?b.Token.Info[e].limit:0},getLabel:function(e){return e&&b.Token.Info[e]?b.Token.Info[e].name||b.Label.get("C"+e):""},valid:function(e){return e?(e+"").replace(/\|/g,""):""},getColorOpacity:function(e,t){var a;return e&&b.Token.Info[e]&&b.Token.Info[e].color?(a=+b.Token.Info[e].opacity||(80>e?b.Option.get("CT2",2):b.Styles.opacity)||100,"INHERIT"===b.Token.Info[e].color?a/100:A.color(b.Token.Info[e].color,t?2*a:a)):""}},b.Fleet={Data:{},Task:{},Next:{},Init:function(e){b.Fleet.Data=e||{},b.Fleet.Data.Current=b.Data.getStorage(b.App.keyPlayer+"_Fleet_Current","JSON")},Content:function(e,t,a,n){t=C.parse(n),"fetcheventbox"===e?"friendly"in t&&(b.Fleet.Set("Current","fleets",+t.friendly||0),b.Init.Messages("Panel","updateTab",{tab:"Flights"})):"minifleet"===e&&t.response&&("slots"in t.response&&(b.Fleet.Set("Current","fleets",+C.get(t.response,"slots")||0),b.Init.Messages("Panel","updateTab",{tab:"Flights"})),b.Init.Messages("Page","sendShips",{mode:"finish",success:t.response.success}))},Set:function(e,t,a){e&&b.Fleet.Data[e]&&(t="string"==typeof t?C.createKey(t,a):t,C.iterate(t,function(a){b.Fleet.Data[e][a]=t[a]}),"Current"===e?b.Data.setStorage(b.App.keyPlayer+"_Fleet_Current",b.Fleet.Data.Current):w.message("Fleet","Set",{tab:e,data:t}))},Get:function(e,t,a){return e=e&&b.Fleet.Data[e]&&(t||0===t)?b.Fleet.Data[e][t]:"",6===a?S.check(e):+e||0}},b.DataBase={status:0,enabled:!1,Data:{},Info:{Player:"D36",Universe:"D37"},Messages:function(e,t){"Notify"===e&&b.DataBase.Notify(t)},Init:function(e){b.DataBase.Data=C.is(e)?e:{},b.DataBase.status=b.DataBase.Data.status||0,b.DataBase.enabled=1===b.DataBase.Data.status},Notify:function(e){var t;C.is(e)&&(t=b.DataBase.Info[e.tab])&&("loading"in e?b.Notify.set(t,3," "+e.loading+" %"):(b.DataBase.Init(e),b.Notify.set(t,4," ("+C.get(b.DataBase.Data[e.tab],"entries")+")")))}},b.Tools={List:["A","B","C","D","E","F",1,2,3,4,5,6,7,8,9],Messages:function(e,t){"Action"===e&&b.Tools.Action(t)},Action:function(e){e&&(e.keyPlayer=b.App.keyPlayer,e.planetId=b.Acc.planetId,e.coords=b.Acc.coords,e.coordstype=b.Acc.coordstype,e.type=b.Acc.type,e.planetName=b.Acc.planetName,e.Planets={},b.Planets.iterate(1,function(t,a){e.Planets[a]={name:t.name,temp:t.temp}}),w.message("Tools","Action",e,function(t){var a;t&&t.href&&((a=document.getElementById("ago_tools_send")||document.body.appendChild(document.createElement("a"))).id="ago_tools_send",a.href=t.href,a.style.display="none",a.target=e.shiftKeys||b.Option.is("T01")?"_blank":"ago_tools_"+t.id,T.click(a))}))}},b.Jumpgate={updateCooldownStatus:0,Messages:function(e,t){"Continue"===e&&b.Jumpgate.Continue(t)},Unload:function(e){e&&e.target&&"DIV"===e.target.nodeName&&-1<(e.target.className||"").indexOf("ui-dialog")&&(b.Jumpgate.Timer=null,b.Init.Messages("Planets","Action",{mode:"select"}))},onKeydown:function(e,t){if(13===e.keyCode)return document.activeElement.blur(),T.click(".secondcol input.btn_blue",t),!1;if(65===e.keyCode)return T.click(".secondcol #sendall",t),!1;if(77===e.keyCode)return T.click(".secondcol #sendmost",t),!1;if(81===e.keyCode)return T.click(".secondcol .send_none a",t),!1;if(38===e.keyCode||40===e.keyCode){if(11===e.inputType&&e.target.id&&b.Item.Ship[S.check(I.parseIntAbs(e.target.id))])return T.changeInput(e,e.target)}else if(112<=e.keyCode&&123>=e.keyCode&&b.Option.is("U32")&&!e.cached)return b.Jumpgate.Action(b.Planets.GetByIndex(e.keyCode-111,"moon",6)),!1;return!0},Content:function(e){function t(e,t){var n,o;(n=T.appendTR(e,"tooltip")).addEventListener("click",a,!1),(o=T.appendTD(n,"ago_jumpgate_settings_name tooltip",t,10)).title=o.textContent,o=T.appendTD(n,"ago_jumpgate_settings_status"),T.append(o,"input",{id:"ago_jumpgate_settings_status_"+t,type:"checkbox",rel:t})}function a(e){var t,a;e&&e.currentTarget&&(t=e.currentTarget.querySelector("input"),a=T.getAttribute(t,null,"rel"),t&&a&&("INPUT"!==e.target.nodeName&&(t.checked=!t.checked),b.Option.set(a,t.checked?1:0,1),b.Global.message({role:"Data",data:{G33:b.Option.is("G33"),G34:b.Option.is("G34")}})))}function n(e){e&&b.Init.Messages("Panel","hover","mouseover"===e.type)}var o,i,r,s;if(e=e?e.querySelector("#jumpgate"):null,b.Option.is("G30")&&!b.App.OgameMobile&&T.updateAttribute(e,null,"ago-status",1,8)){for(b.Option.is("G31")&&T.addClass(e,null,"ago_jumpgate_improve"),b.Jumpgate.Mini=b.Task.splitActive(b.Option.get("G38",-1),2,-1),b.Jumpgate.Maxi={},o=e.querySelectorAll(".ship_selection_table .ship_txt_row > a"),s=0;s<o.length;s++)(r=S.check(T.getAttribute("img",o[s],"class",3)))&&(b.Jumpgate.Maxi[r]=T.getText(".quantity",o[s].parentNode,3)),T.appendChild(o[s],o[s].parentNode.children[1]);if(o={planet:b.Acc.planetId,tabs:["Ship"],data:C.create(b.Jumpgate.Maxi)},w.message("Units","Action",{list:[o]}),r=T.appendSPAN(null,"float_left send_most"),T.appendA(r,{id:"sendmost",class:"tooltip",title:b.Label.get("F37")},{click:b.Jumpgate.setMostShips}),T.after(e.querySelector(".secondcol .send_all"),r),b.Jumpgate.Target=[],(o=e.querySelector('#jumpgateForm select[name="zm"]'))&&o.options){for(s=0;s<o.options.length;s++)r=b.Task.trimCoords(o.options[s].textContent),r=b.Planets.GetByCoords(r,"index")||80+b.Jumpgate.Target.length,b.Jumpgate.Target[r]={value:o.options[s].value,text:o.options[s].textContent};b.Option.is("G32")&&((r=document.createElement("option")).value="none",r.textContent=" - ",T.prependChild(o,r),e.querySelector("#jumpgateDefaultTargetSelectionForm option[selected]")||(o.selectedIndex=0)),o.onchange=b.Jumpgate.Display}b.Jumpgate.Target.length?(b.Option.is("G31")&&(T.setStyleDisplay("#jumpgate h4",e),T.setStyleDisplay("#selecttarget > .fright",e),(i=T.appendTABLE(null,{id:"ago_jumpgate_target"},{width:"378px"},[20,60,90,26,24,90,65])).addEventListener("click",b.Jumpgate.clickTarget,!1),i.addEventListener("dblclick",b.Jumpgate.clickTarget,!1),b.Planets.iterate(3,function(e,t){if(t&&(b.Jumpgate.Target[e.index]||t===b.Acc.planetId||1e3<b.Fleet.Get("Cooldown",t,2))){var a,o=i,r=e.index;a=b.Jumpgate.Target[r]?b.Token.getClassHover(3,"own"):b.Planets.Get("active","index")===r?b.Token.getClassHighlight(3)+" ago_color_palered":"ago_color_palered",o=T.appendTR(o,a,{role:"Task",data:t}),r=b.Option.isAnd("U31","U32")?r:"",T.appendTD(o,"ago_jumpgate_target_shortkey",r),T.appendTD(o,"",b.Planets.Data[t].coords),T.appendTD(o,"ago_jumpgate_target_name",b.Planets.Data[b.Planets.Data[t].planet].name),r=T.appendTD(o),T.appendSPAN(r,"ago_jumpgate_cooldown"),r=T.appendTD(o),T.appendIMG(r,b.Planets.Data[t].img,"16px"),T.appendTD(o,"ago_jumpgate_target_name",b.Planets.Data[t].name),(r=T.appendTD(o,{class:"ago_jumpgate_target_ships ago_color_normal","ago-data-change":JSON.stringify({page:"Panel",role:"hover"})},"-")).addEventListener("mouseover",n,!1),r.addEventListener("mouseout",n,!1)}}),T.prependChild(e.querySelector("#selecttarget"),i),t(i=T.appendTABLE(null,"ago_jumpgate_settings ago_color_normal",{width:"215px"},[175,25]),"G34"),t(i,"G35"),T.after(e.querySelector("#selecttarget > .fright"),i),w.message("Units","List",{action:"summarized"},function(e){var t,a;for(t=document.querySelectorAll("#ago_jumpgate_target > tr"),s=0;s<t.length;s++)a=T.getAttribute(t[s],null,"ago-data",-2).data,C.get(e[a],"timeShip")&&T.updateText("td.ago_jumpgate_target_ships",t[s],C.get(e[a],"ships"),2)}),b.Jumpgate.updateCooldown(!0),b.Jumpgate.Timer=b.Jumpgate.updateCooldown),b.Global.message({role:"Jumpgate"}),e.parentNode.parentNode.addEventListener("DOMNodeRemoved",b.Jumpgate.Unload,!1),b.Jumpgate.Display(),b.Global.message({role:"Data",data:{G33:b.Option.is("G33"),G34:b.Option.is("G34")}}),T.addEventsAll("#jumpgate .send_none a",null,{click:b.Jumpgate.Display}),T.disableActiveElement(),T.disableAutocomplete()):(i=document.querySelector("#jumpgateNotReady #cooldown"))&&(e=b.Time.parseFormatedTime(i.textContent))&&b.Fleet.Set("Cooldown",b.Planets.GetId("active"),b.Time.timestamp()-Math.ceil(b.Ogame.getJumpgateCooldown(b.Planets.GetId("active")))+e)}e=o=i=o=r=null},updateCooldown:function(e){var t,a,n,o=0;if(e||-4<b.Jumpgate.updateCooldownStatus){for(e=document.querySelectorAll("#ago_jumpgate_target > tr"),a=0;a<e.length;a++)t=T.getAttribute(e[a],null,"ago-data",-2).data,1e5<(n=b.Fleet.Get("Cooldown",b.Planets.GetId(t),2))&&(0<=(n=b.Ogame.getJumpgateCooldown(b.Planets.GetId(t))-(b.Time.timestamp()-n))&&(o++,t=e[a].getElementsByClassName("ago_jumpgate_cooldown")[0],60>=n&&T.updateClass(t,null,"ago_jumpgate_cooldown ago_jumpgate_cooldown_seconds"),n=60<n?Math.ceil(n/60):Math.floor(n),T.updateText(t,null,Math.floor(n))));b.Jumpgate.updateCooldownStatus=o||b.Jumpgate.updateCooldownStatus-1}},Continue:function(e){var t,a,n,o;if((t=document.getElementById("jumpgate"))&&e){for((a={})[b.Planets.GetId(e)]=b.Time.timestamp(),a[b.Planets.GetId("active")]=b.Time.timestamp(),b.Fleet.Set("Cooldown",a),a={},t=t.querySelectorAll(".ship_selection_table td.ship_input_row > input"),n=0;n<t.length;n++)(o=I.parseIntAbs(t[n].id))&&(a[o]=I.parseIntAbs(t[n].value));e=[{planet:b.Acc.planetId,tabs:["Ship"],action:"remove",data:a},{planet:e,tabs:["Ship"],action:"add",data:a}],w.message("Units","Action",{list:e})}},setMostShips:function(){var e,t,a={};b.Units.activeResources(b.Jumpgate.Maxi),C.iterate(b.Jumpgate.Maxi,function(e){a[e]=Math.max(b.Jumpgate.Maxi[e]-(+b.Jumpgate.Mini[e]||0),0)}),b.Option.is("G35")&&(e=Math.ceil(b.Jumpgate.Maxi.resources/b.Ogame.getShipCapacity("203")),t=0<(t=Math.max(e-(+b.Jumpgate.Maxi[203]||0),0))?5*t:0,e>(b.Jumpgate.Mini[203]||0)&&(a[203]=Math.max(b.Jumpgate.Maxi[203]-e,0)),t>(b.Jumpgate.Mini[202]||0)&&(a[202]=Math.max(b.Jumpgate.Maxi[202]-t,0))),b.Global.message({role:"setMostShips",data:a})},clickTarget:function(e){var t;e&&e.target&&(t=T.getAttributeParent(e.target,null,"ago-data",-2,2),C.copy(T.getAttributeParent(e.target,null,"ago-data-change",-2,1),t),"dblclick"===e.type?b.Option.is("U34")&&T.click("#jumpgate .secondcol input.btn_blue"):"Panel"===t.page?(e=b.Planets.Get(t.data,"coordstype",6))&&(b.Init.Messages("Panel","Display",{tab:"Account",data:e}),b.Init.Messages("Panel","hover",!0)):"Task"===t.role&&b.Jumpgate.Action(t.data))},Action:function(e){var t;(t=document.getElementById("jumpgate"))&&e&&(e=t.querySelector('select[name="zm"] option[value="'+e+'"]'))&&T.setValue(e.parentNode,null,e.value,0,"change")},Display:function(){var e,t,a,n;(e=document.getElementById("jumpgate"))&&((t=T.getSelectedNode(e.querySelector('select[name="zm"]')))&&(((n=b.Planets.Get(+t.value,"coords",6))||"none"===t.value)&&(a=e.querySelector("#selecttarget .dropdown > a"),T.updateAttribute(a,null,"data-value",t.value),T.updateText(a,null,t.textContent),b.Init.Messages("Planets","Action",{mode:"select",coords:n,type:3})),b.Option.is("G31")&&(T.iterate(e.querySelectorAll("#ago_jumpgate_target tr"),function(e){T.removeClassGroup(e,null,"ago_selected")}),+t.value&&T.setClassGroup('#ago_jumpgate_target tr[ago-data*="'+t.value+'"]',e,"ago_selected",b.Token.getClassSelected(3,!0)))),T.setProperty("#ago_jumpgate_settings_status_G34",e,"checked",b.Option.is("G34")),T.setProperty("#ago_jumpgate_settings_status_G35",e,"checked",b.Option.is("G35"))),e=a=t=null}},b.Phalanx={Messages:function(e,t){b.dummy=e+t},Overlay:function(e){var t;e&&(t=e.parentNode.querySelector(".ui-dialog-title"))&&(b.Phalanx.coords=b.Task.trimCoords(t.textContent),b.Option.is("E21")&&!b.App.OgameMobile&&(t.style.paddingRight="46px",(t=T.appendSPAN(t.parentNode,"ago_display_arrow")).addEventListener("click",b.Phalanx.toggleDisplay,!1),e.parentNode.setAttribute("ago_display_status",b.Option.get("E23",2))))},Content:function(e){var t,a,n,o,i,r;if(b.Phalanx.Data={},e=e?e.querySelector("#phalanxWrap"):null,b.Option.is("E20")&&e&&!e.getAttribute("ago-status")&&!b.App.OgameMobile){for(e.setAttribute("ago-status",1),t=e.querySelectorAll("div.eventFleet > ul, div.partnerInfo > ul"),b.Option.is("E21")&&T.addClass(e,null,"ago_phalanx_improve"),r=0;r<t.length;r++)o=n=0,i=S.check(I.parseIntAbs(t[r].parentNode.id)),2===(a=I.parseIntAbs(t[r].parentNode.getAttribute("data-mission-type")))&&(o=1,A.hasClass(t[r].parentNode.className,"partnerInfo")&&(o=(n=S.check(I.parseIntAbs(t[r].parentNode.className)))===i?2:3,i="F"+i)),b.Phalanx.Data[i]={arrival:I.parseIntAbs(t[r].parentNode.getAttribute("data-arrival-time")),mission:a,union:n||"",unionType:o||0,reverse:"true"===t[r].parentNode.getAttribute("data-return-flight")},b.Phalanx.parseRow(t[r],b.Phalanx.Data[i]),1!==b.Phalanx.Data[i].unionType&&b.Phalanx.createDetails(t[r],b.Phalanx.Data[i]),t[r].addEventListener("click",b.Phalanx.click,!1);for(i in b.Phalanx.Data)1===b.Phalanx.Data[i].unionType&&b.Phalanx.createDetails(e.querySelector("div#eventRow-"+i+" > ul"),b.Phalanx.Data[i])}},parseRow:function(e,t){var a,n,o;for(o=0;o<e.children.length;o++)if(a=e.children[o],n=e.children[o].className,A.hasClass(n,"countDown"))(n=a.querySelector("span"))&&(T.addClass(n,null,A.classMission(t.mission)),T.addClass(n,null,"ago_panel_add"),t.fleetType=A.hasClass(n.className,"neutral")?2:A.hasClass(n.className,"hostile")?1:t.reverse?4:3,2===t.unionType&&(n.textContent=b.Label.get("E28")));else if(A.hasClass(n,"arrivalTime"))n=(a.textContent||"").split(" ")[0],a.textContent=b.Time.convertLocal(n,"[H]:[i]:[s]");else if(A.hasClass(n,"descFleet"))t.descFleet=(a.textContent||"").trim(),2<=t.unionType&&(a.textContent="");else if(A.hasClass(n,"missionFleet"))t.missionName=T.getText("span",a);else if(A.hasClass(n,"originFleet"))1===t.unionType?a.textContent=t.descFleet:(n=a.querySelector("figure"))&&(t.typeOrigin=A.hasClass(n.className,"moon")?3:A.hasClass(n.className,"tf")?2:1);else if(A.hasClass(n,"coordsOrigin"))(n=a.querySelector("a"))&&(t.coordsOrigin=b.Task.trimCoords(n.textContent),t.owncoordsOrigin=b.Planets.owncoords(t.coordsOrigin,t.typeOrigin),t.owncoordsOrigin?(T.addClass(n,null,b.Token.getClassSelection(t.typeOrigin)),3<=t.owncoordsOrigin&&T.extendClass(a,null,b.Token.getClassHighlight(t.typeOrigin))):t.coordsOrigin===b.Phalanx.coords&&T.addClass(n,null,"ago_color_blue"));else if(A.hasClass(n,"detailsFleet")){if((n=a.querySelector("span"))&&1!==t.unionType){a=t;var i=void 0,r=void 0,s=r=void 0;if(n=n.title){for(i=n.split("<td>"),s=1;s<i.length;s++)r=(i[s].split("</td>",1)[0]||"").replace(/\:/g,"").trim(),(r=b.Item.getByName(r))&&(a[r]=I.parseIntAbs(i[s].split(">",3)[2]),a[r]&&2<=a.unionType&&b.Phalanx.Data[a.union]&&(b.Phalanx.Data[a.union][r]=(b.Phalanx.Data[a.union][r]||0)+a[r]));"metal"in a?b.Task.updateResources(a):a.resources=-1,b.Task.updateShips(a)}}}else A.hasClass(n,"destFleet")?(n=a.querySelector("figure"))&&(t.type=A.hasClass(n.className,"moon")?3:A.hasClass(n.className,"tf")?2:1):A.hasClass(n,"destCoords")&&(n=a.querySelector("a"))&&(t.coords=b.Task.trimCoords(n.textContent),t.owncoords=b.Planets.owncoords(t.coords,t.type),t.owncoords?(T.addClass(n,null,b.Token.getClassSelection(t.type)),3<=t.owncoords&&T.extendClass(a,null,b.Token.getClassHighlight(t.type))):t.coords===b.Phalanx.coords&&T.addClass(n,null,"ago_color_blue"))},createDetails:function(e,t){var a,n;b.Option.is("E21")&&e&&((a=document.createElement("li")).className="ago_phalanx_activity",1===t.fleetType?T.appendIMG(a,"/cdn/img/galaxy/activity15.gif"):2===t.fleetType&&(t.owncoords?T.appendIMG(a,"/cdn/img/galaxy/activity.gif"):t.owncoordsOrigin||1===t.unionType||(a.textContent=t.descFleet[0],a.title=t.descFleet,a.className+=" tooltip")),T.prependChild(e,a),a=document.createDocumentFragment(),n=T.appendDIV(a,"ago_phalanx_left"),2>t.unionType&&T.appendSPAN(n,A.classMission(t.mission),t.missionName),function(e,t){function a(e,t,a,n){e=T.appendTD(e),t&&a&&(T.appendSPAN(e,"ago_phalanx_label",t,n),0>a?T.appendTEXT(e,"-----"):T.appendTEXT(e,a,2))}var n,o,i,r,s;for(i=b.Option.is("E22")?12:11,r={ShipCivil:[],ShipCombat:[],Resource:[]},n=e.appendChild(document.createElement("table")),a(o=T.appendTR(n),"I28",t.shipsCivil||"0",10),a(o,"I29",t.shipsCombat||"0",10),a(o,"I27",t.resources||"0",10),C.iterate(r,function(e){C.iterate(b.Item[e],function(a){0<t[a]&&r[e].push(a)})}),s=0;9>s&&(r.ShipCivil[s]||r.ShipCombat[s]||r.Resource[s]);s++)a(o=T.appendTR(n),r.ShipCivil[s],t[r.ShipCivil[s]],i),a(o,r.ShipCombat[s],t[r.ShipCombat[s]],i),a(o,r.Resource[s],t[r.Resource[s]],i);n=o=null}(n=T.appendDIV(a,"ago_phalanx_fleet"),t),n=T.appendDIV(a,"ago_phalanx_right"),e.parentNode.appendChild(a),a=a=n=null)},toggleDisplay:function(e){var t;e.target&&(e=document.getElementById("phalanxWrap"))&&(t="1"===e.parentNode.parentNode.parentNode.getAttribute("ago_display_status")?2:1,e.parentNode.parentNode.parentNode.setAttribute("ago_display_status",t),b.Option.set("E23",t,2))},click:function(e){var t;e&&e.target&&(A.hasClass(e.target.parentNode.className,"countDown")||A.hasClass(e.target.className,"countDown"))&&(e=I.parseIntAbs(e.target.id),e=b.Phalanx.Data[e])&&((t={action:"set",tab:"Target",marked:2,token:81,time:e.arrival}).coords=e.reverse?e.coordsOrigin+":"+e.typeOrigin:e.coords+":"+e.type,b.Init.Messages("Token","Action",t))}},b.Techtree={Messages:function(e,t){b.dummy=e+t},Content:function(e){(e=e?e.querySelector("div.techtree"):null)&&!e.hasAttribute("ago-status")&&e.setAttribute("ago-status",1)}},b.Buddies={Messages:function(e,t){b.dummy=e+t},Content:function(e){var t,a;if((e=e?e.querySelector("#buddylist"):null)&&T.updateAttribute(e,null,"ago-status",1,8)&&b.Option.is("D20"))for(e=e.querySelectorAll("tr"),a=0;a<e.length;a++)(t=I.parseIntAbs(S.getParameter("to",T.getAttribute('a[href*="page=writemessage"]',e[a],"href"))))&&(t={page:"Panel",role:"Action",data:{mode:"set",tab:"Player",token:81,id:t,coords:b.Task.trimCoords(T.getText("td:nth-child(6) a",e[a])),name:b.Task.valid(T.getText("td:nth-child(2) span",e[a]))}},T.set(e[a],null,null,null,{click:b.Buddies.click}),T.addClass("td:nth-child(2)",e[a],"ago_action"),T.setData("td:nth-child(2)",e[a],t))},click:function(e){e&&e.target&&e.currentTarget&&(e=T.getData(e.target,null,2),b.Init.Messages(e.page,e.role,e.data))}},b.Notices={Messages:function(e,t){b.dummy=e+t},Content:function(e){(e=e?e.querySelector("#notizen"):null)&&!e.hasAttribute("ago-status")&&e.setAttribute("ago-status",1)}},b.Search={Messages:function(e,t){b.dummy=e+t},Content:function(e,t,a,n,o){if(t=+S.getParameter("method",o)||0,(e=e?e.querySelector(".searchresults"):null)&&T.updateAttribute(e,null,"ago-status",1,8)&&(2===t||3===t)&&b.Option.is("D20"))for(e=e.querySelectorAll("tr"),n=0;n<e.length;n++)(o=I.parseIntAbs(S.getParameter("to",T.getAttribute(".action a",e[n],"href"))))&&(t=b.Task.valid(T.getText("td.userName",e[n])),a=b.Task.trimCoords(T.getText("td.position a",e[n])),T.set(e[n],null,null,null,{click:b.Search.click}),o={message:{page:"Token",role:"Action",data:{action:"set",tab:"Player",token:81,id:o,name:t,coords:a}}},T.addClass("td.userName",e[n],"ago_action"),T.setData("td.userName",e[n],o),o={message:{page:"Token",role:"Action",data:{action:"set",tab:"Target",token:81,name:t,coords:a}}},T.setData("td.position",e[n],o))},click:function(e){e&&e.target&&((e=T.getData(e.target,null,2)).message&&b.Init.Messages(e.message.page,e.message.role,e.message.data))}},b.ShareReport={Buddies:[],isLoaded:0,isDone:0,Overlay:function(e){b.ShareReport.getBuddies().then(b.ShareReport.getAlliance).then(function(){b.ShareReport.Display(e)}),T.addObserver(e,{childList:!0},function(t){t.forEach(function(t){t.addedNodes.length&&(b.ShareReport.isLoaded=1,b.ShareReport.Display(e))})})},Display:function(e){b.ShareReport.isDone&&b.ShareReport.isLoaded&&b.ShareReport.Buddies.forEach(function(t){$(e).find("#selectNew").append($("<option>",{value:t,text:t}))})},getBuddies:function(){var e=y(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post("index.php?page=buddies");case 2:t=e.sent,$(t).find(".player").each(function(e,t){b.ShareReport.Buddies.push(t.textContent)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAlliance:function(){var e=y(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.post("index.php?page=allianceOverview",{ajax:1});case 2:t=e.sent,$(t).find("table.members tbody tr td:first-child span").each(function(e,t){var a=t.textContent.split("(")[0].replace(/\s{2,}/g,"").trim();-1===b.ShareReport.Buddies.indexOf(a)&&b.ShareReport.Buddies.push(a)}),b.ShareReport.isDone=1;case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},-1<window.navigator.userAgent.indexOf("Firefox")?(b.isFirefox=!0,b.isPhone=-1<window.navigator.userAgent.indexOf("Mobile"),b.isTablet=-1<window.navigator.userAgent.indexOf("Tablet"),b.isMobile=b.isPhone||b.isTablet):-1<window.navigator.userAgent.indexOf("Chrome")&&(b.isChrome=!0),-1<window.navigator.userAgent.indexOf("OPR/")&&(b.isOpera=!0),b.context=0,b.Page={Messages:function(e,t){b.dummy=e+t}};var k={},w={message:function(e,t,a,n){a&&(a.keyPlayer=b.App.keyPlayer,"function"==typeof n?chrome.runtime.sendMessage("",{page:e,role:t,para:a},null,n):chrome.runtime.sendMessage("",{page:e,role:t,para:a}))},Resource:function(e){var t;if(e=S.check(e))try{return(t=new XMLHttpRequest).open("GET",chrome.extension.getURL(e),!1),t.overrideMimeType("text/plain"),t.send(null),t.responseText||""}catch(e){}return""},Log:function(e,t){(b.App.beta||t)&&console.log("AntiGameReborn:  "+e)}};b.Init={status:0,active:!1,KeydownCache:[],timing:Date.now(),loop:0,Messages:function(e,t,a){(b.Init.status||"Continue"===t)&&(Array.isArray(e)&&(e=-1<e.indexOf(b.App.Page)?b.App.Page:""),"Init"===e?"Timer"===t?window.setTimeout(b.Init.Timer,0):"Content"===t?b.Init.Content(a):"Ready"===t?b.Init.Ready():"Tooltip"===t&&b.Init.Tooltip(a):e&&b[e]&&"function"==typeof b[e].Messages&&b[e].Messages(t,a))},Start:function(){window.console.log("waliwaliwanka"),b.Init.status=0,document.location&&document.location.href&&document.documentElement?(b.App.Start(),20<b.Notify.problem?document.addEventListener("DOMContentLoaded",b.Main.Run,!1):b.App.mode&&(b.Init.status=1,b.Init.active=document.hasFocus(),b.Observer.Start(),b.App.reload?b.Observer.Head(function(){b.App.Init(),b.Init.Init()}):(b.Option.Start(),b.Styles.Start(),b.Option.is("O04")&&(document.title=b.App.title),b.Observer.Head(function(){b.App.Init(),b.Styles.Init()}),b.Init.Init()))):300>++b.Init.loop&&window.setTimeout(b.Init.Start,b.Init.loop)},Init:function(){w.message("App","Start",{page:b.App.page,mode:b.App.mode,keyCom:b.App.keyCom,keyUni:b.App.keyUni,keyPlayer:b.App.keyPlayer,accountId:b.App.playerId,abbrCom:b.Uni.lang,abbrUni:b.Uni.abbr,urlUni:b.Uni.url,reload:b.App.reload},function(e){b.Observer.Head(function(){e&&b.App.mode&&1===b.Init.status&&(b.Init.status=2,b.App.reload=b.App.reload||e.reload,b.App.Page=e.Page,b.Background.Data=e.Background||{},b.Label.Init(e.Label),3<=b.App.mode&&e.keyPlayer===b.App.keyPlayer&&(C.copy(e.App,b.App),C.copy(e.Uni,b.Uni),b.Data.Init(),b.Option.Init(e.Option),b.Item.Init(e.Item),b.Panel.Init(e.Panel),b.DataBase.Init(e.DataBase),b.Box.Init(e.Box),b.Token.Init(e.Token),b.Units.Init(e.Units),b.Fleet.Init(e.Fleet),b.App.reload&&b.App.Save(),b.App.upgradeAvailable=I.parseVersion(b.App.versionAGO)<I.parseVersion(b.App.versionUpdate)),e=null,b.Observer.Body(b.Init.Read,b.isChrome&&3<=b.App.mode))})},b.context)},Read:function(){2===b.Init.status&&(b[b.App.Page]?(b.Init.status=4,k=b.Page=b[b.App.Page],b.App.Ogame&&(b.Styles.Load(),b.Planets.Read(),b.Planets.status&&(b.App.mode=5,b.App.OgameMain=!0,b.Time.Read(),b.Units.Read(),b.Main.Read(),"function"==typeof k.Read&&k.Read())),b.Init.Run()):100>++b.Init.loop&&(w.Log("Init - Read - waiting for page script - loaded "+b.App.Page,!0),window.setTimeout(b.Init.Read,b.Init.loop)))},Run:function(){4===b.Init.status&&(b.Init.status=5,b.App.OgameMain&&(b.Units.Run(),b.Planets.Run(),b.Time.Run(),b.Events.Run(),"function"==typeof k.Run&&k.Run(),b.Panel.Run(),b.Notify.Run(),b.Main.Run()),b.Observer.Interactive(b.Init.Interactive))},Interactive:function(){5===b.Init.status&&(b.Init.status=6,b.Global.Interactive(),"function"==typeof k.Interactive&&k.Interactive(),b.App.Ogame?(b.Observer.mutationObject=T.addObserver(document.body,{childList:!0},b.Observer.Mutation),b.Global.message({role:"Ready"}),b.App.OgameMain&&(b.App.reload&&(b.Label.Update(),b.Units.Update()),w.message("App","Update",{reload:b.App.reload}),b.Notify.set("Notify"))):window.setTimeout(b.Init.Ready,20))},Ready:function(){6===b.Init.status&&(b.Init.status=7,b.App.OgameMain&&b.Events.Ready(),"function"==typeof k.Ready&&k.Ready(),b.Option.is("U31")&&C.iterateArray(b.Init.KeydownCache,b.Init.onKeydown),b.App.Ogame&&(T.disableActiveElement(),T.disableAutocomplete()),window.setTimeout(b.Init.Complete,1))},Complete:function(){7===b.Init.status&&(!b.App.OgameMain||b.Units.status?(b.Init.status=8,"function"==typeof k.Complete&&k.Complete(),b.App.OgameMain&&(b.Main.Complete(),b.App.beta&&T.setStyleColor("playerName","id",b.App.reload?"#FF9600":"#008000"))):100>++b.Init.loop&&window.setTimeout(b.Init.Complete,b.Init.loop))},Refresh:function(){7<=b.Init.status&&b.App.OgameMain&&w.message("App","Refresh",{},function(e){b.Init.status&&e&&(b.Background.Data=e.Background||{},b.Option.Init(e.Option),b.Fleet.Init(e.Fleet),b.Box.Init(e.Box,!0),b.Panel.Init(e.Panel,!0))})},Content:function(e){var t;if(5<b.Init.status&&e&&e.page){var a,n=e.page;(a=b[C.get(b.App.Overlay,n)])?"function"==typeof a.Content&&(b.Init.activeOverlay||(t=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length&&(b.Init.activeOverlay={element:t[t.length-1].id,page:T.getAttribute(t[t.length-1],null,"data-page").toLowerCase()}),b.Init.activeOverlay&&b.Init.activeOverlay.element&&n===b.Init.activeOverlay.page&&(t=document.getElementById(b.Init.activeOverlay.element))&&a.Content(t,b.Init.activeOverlay.element,n,e.url,e.para)):(a=b[C.get(b.App.Content,n)])&&"function"==typeof a.Content&&a.Content(n,e.url,e.para,e.response)}},Overlay:function(e,t){var a,n;5<b.Init.status&&e&&(n=T.getAttribute(e,null,"data-page").toLowerCase(),b.Init.activeOverlay={element:e.id,page:n},n?(a=C.get(b.App.Overlay,n))&&b[a]&&"function"==typeof b[a].Overlay&&b[a].Overlay(e,e.id,n,t):"function"==typeof k.Dialog&&k.Dialog(e,e.id))},Tooltip:function(e){b.Menu&&document.getElementById("ago_menu")&&"function"==typeof b.Menu.Tooltip?b.Menu.Tooltip(e):"function"==typeof k.Tooltip&&k.Tooltip(e)},onKeydown:function(e){var t,a,n,o;if(o=!0,b.App.Ogame&&b.Init.activeOverlay&&((t=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length?(a=t[t.length-1],n=T.getAttribute(a,null,"data-page").toLowerCase(),b.Init.activeOverlay={element:a.id,page:n}):b.Init.activeOverlay=null),b.Init.activeOverlay?(t=C.get(b.App.Overlay,n))&&b[t]&&"function"==typeof b[t].onKeydown&&(o=b[t].onKeydown(e,a)):(b.Menu&&document.getElementById("ago_menu")?o=b.Menu.onKeydown(e):"function"==typeof k.onKeydown&&(o=k.onKeydown(e)),o&&b.App.OgameMain&&(o=b.Main.onKeydown(e))),!1===o&&!e.cached)try{e.preventDefault()}catch(e){}return o},onSwipe:function(e,t){b.Init.touch&&e&&(10>t&&"function"==typeof k.onSwipe?k.onSwipe(e,t):"function"==typeof b.Main.onSwipe&&b.Main.onSwipe(e,t))},Select:function(){var e,t;"getSelection"in window&&((e=window.getSelection()).rangeCount&&(t=e.toString())),!t&&document.activeElement&&("TEXTAREA"===(e=document.activeElement).tagName||"INPUT"===e.tagName&&"text"===e.type)&&(t=(e.value||"").substring(e.selectionStart,e.selectionEnd)),t&&5<=t.length&&(!b.App.OgameMain||60>t.length)&&((t=b.Task.parseTarget(t,1)).coords||t.time)&&(b.App.OgameMain?b.Option.is("I81")&&(t={action:"set",tab:"Target",token:81,coords:t.coordstype||t.coords,time:t.time,marked:1},b.Init.Messages("Token","Action",t)):(t=S.check(t.coordstype||t.coords)+"|"+S.check(t.time),w.message("Background","Set",{key:"Panel_Target",value:t})))},Timer:function(){5<b.Init.status&&b.App.OgameMain&&(b.Time.Display(),b.Planets.Timer(),1===b.Acc.type&&b.Units.Timer(),k.Timer&&k.Timer(),b.Jumpgate&&b.Jumpgate.Timer&&b.Jumpgate.Timer(),b.Main.updateTitle())},Timing:function(e){e?w.Log(e+(Date.now()-b.Init.timing-(Date.now()-b.Init.timingRange))+"   + "+(Date.now()-b.Init.timingRange)+" -- "+document.readyState):b.Init.timingRange=Date.now()},Location:function(e,t){window.setTimeout(function(){document.location.href=b.Uni.path+(e||"overview")},t||300)},Valid:function(e,t){var a;b.Init.status&&"function"==typeof e&&((a=new XMLHttpRequest).open("GET",b.Uni.url+"/game/index.php?page=fetchTechs&ajax=1",!0),a.overrideMimeType("text/html"),a.onerror=a.onload=function(){b.Init.status&&(200==+a.status&&S.check(a.responseText)[0]===String.fromCharCode(123)?e():"function"==typeof t&&t())},a.send(null))},Script:function(e){var t,a;if(!b.Init.ogameScript){for(t=T.queryAll("#box > script",document.getElementById("boxBG")),a=0;a<t.length;a++)if(!t[a].src&&-1<(t[a].innerHTML||"").indexOf("var session")){b.Init.ogameScript=t[a];break}b.Init.ogameScript=b.Init.ogameScript||-1}return t="",C.is(b.Init.ogameScript)&&(t=b.Init.ogameScript.innerHTML||"","production"===e)?0<(e=t.indexOf("initAjaxResourcebox"))&&(e=t.indexOf("{",e+30),(a=t.indexOf("function",e))>e)?(a=t.lastIndexOf("}",t.lastIndexOf("}",a)-1),t.slice(e,a+1)||""):"":t}},b.Background={Data:{},Get:function(e,t){var a;return a=e?b.Background.Data[e]:"",6===t?S.check(a):+a||0},Set:function(e,t){e&&(b.Background.Data[e]=t,w.message("Background","Set",{key:e,value:t}))}},b.Observer={head:[null],body:[null],interactive:[null],mousedown:null,Start:function(){var e;e=document.onreadystatechange,document.onreadystatechange=function(){"interactive"===document.readyState&&(b.Observer.Call(b.Observer.body),b.Observer.Call(b.Observer.interactive));try{e()}catch(e){}},document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),b.Observer.Call(b.Observer.body),b.Observer.Call(b.Observer.interactive)},!1),window.addEventListener("blur",function(){b.Init.active=!1},!1),window.addEventListener("focus",function(){b.Init.active||(b.Init.active=!0,7<=b.Init.status&&b.Init.Refresh())},!1),window.addEventListener("beforeunload",function(){T.removeObserver(b.Observer.mutationObject),b.Init.status=0},!1),window.addEventListener("keydown",b.Observer.onKeydown,!0),window.addEventListener("ago_global_send",function(e){(e=C.parse(e?e.detail:"")).page&&b.Init.Messages(e.page,e.role,e.data)},!1),chrome.runtime.onMessage.addListener(function(e){e&&e.player===b.App.keyPlayer&&b.Init.Messages(e.page,e.role,e.data)}),document.addEventListener("mousedown",function(e){var t;if(b.Observer.mousedown){for(e=e.target,t=0;9>t;t++){if(!e){t=9;break}if(e.id===b.Observer.mousedown.id)break;e=e.parentNode}9===t&&(e=b.Observer.mousedown.action,b.Observer.set("mousedown"),"function"==typeof e&&e())}},!1),document.addEventListener("mouseup",function(e){e.keyCode||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||b.Init.Select()},!1),document.addEventListener("touchstart",function(e){var t,a;b.Observer.area=0,e&&e.target&&1===e.touches.length&&(b.Observer.startX=b.Observer.pageX=a=e.touches[0].pageX,b.Observer.startY=b.Observer.pageY=e.touches[0].pageY,t=Math.floor((+document.body.clientWidth||1)/2),40>e.touches[0].screenX||T.findParent(e.target,null,"ago_panel",8)?b.Observer.area=12:b.Observer.area=a>t-335&&a<t+335?950>window.innerWidth?0:T.findParent(e.target,null,"inhalt",9)?1:0:a>t+330&&T.findParent(e.target,null,"planetList",9)?15:a<t-280&&T.findParent(e.target,null,"links",9)?11:0,b.Observer.area&&(window.setTimeout(function(){10>Math.abs(b.Observer.startX-b.Observer.pageX)&&10>Math.abs(b.Observer.startY-b.Observer.pageY)&&(b.Observer.area=0)},120),window.clearTimeout(b.Observer.touchTimeout),b.Observer.touchTimeout=window.setTimeout(function(){b.Observer.area=0},1e3)))},!1),document.addEventListener("touchmove",function(e){var t,a;b.Observer.area&&(b.Observer.pageX=e.touches[0].pageX,b.Observer.pageY=e.touches[0].pageY,!window.scrollX||0<b.Observer.startX-b.Observer.pageX)&&(t=Math.abs(b.Observer.startX-b.Observer.pageX)+1,a=Math.abs(b.Observer.startY-b.Observer.pageY)+1,(t=1===b.Observer.area&&(3<t||3<a)&&.35>t/a)?b.Observer.area=0:e.preventDefault())},!1),document.addEventListener("touchend",b.Observer.onSwipe,!1),document.addEventListener("touchcancel",b.Observer.onSwipe,!1)},Head:function(e){b.Init.status&&(document.body||!0===b.Observer.head[0]?e():(b.Observer.head[0]||(b.Observer.head[0]=T.addObserver(document,{childList:!0,subtree:!0},function(e){var t;C.iterate(e,function(a){"HTML"===e[a].target.nodeName&&e[a].addedNodes.length&&"BODY"===e[a].addedNodes[0].nodeName&&e[a].addedNodes[0].childNodes.length&&(t=!0)}),t&&b.Observer.Call(b.Observer.head)})),b.Observer.head.push(e)))},Body:function(e,t){b.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===b.Observer.body[0]?e():(t&&!b.Observer.body[0]&&(b.Observer.body[0]=T.addObserver(document,{childList:!0,subtree:!0},function(e){var t,a;for(t in e){if(e[t].target&&"box"===e[t].target.id&&"boxBG"===e[t].target.parentNode.id)for(var n=0;n<e[t].addedNodes.length;n++)"SCRIPT"===e[t].addedNodes[n].nodeName&&document.getElementById("rechts")&&(a=!0);if(a){b.Observer.Call(b.Observer.body);break}}})),b.Observer.body.push(e)))},Interactive:function(e){b.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===b.Observer.interactive[0]?e():b.Observer.interactive.push(e))},Call:function(e){var t;if(b.Init.status&&e&&"object"===h(e)&&!0!==e[0]){for(t=e[0],e[0]=!0,t&&T.removeObserver(t),t=1;t<e.length;t++)"function"==typeof e[t]&&e[t]();e.length=1}},set:function(e,t,a){b.Observer[e]=t&&a?{id:t,action:a}:null},onKeydown:function(e){return!(!(!e||!e.keyCode||e.altKey||e.ctrlKey&&(37>e.keyCode||40<e.keyCode))&&b.Option.is("U31"))||(112<=e.keyCode&&123>=e.keyCode&&b.Option.is("U32")&&(e.stopPropagation(),e.preventDefault()),7>b.Init.status?(b.Init.KeydownCache.push({cached:!0,keyCode:e.keyCode,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey}),!1):(e.target&&(e.inputType="TEXTAREA"===e.target.nodeName?12:"INPUT"===e.target.nodeName&&"text"===e.target.type?11:0),b.Init.onKeydown(e)))},Mutation:function(e){var t,a,n;for(a in e)if("BODY"===e[a].target.nodeName&&e[a].addedNodes)for(n=0;n<e[a].addedNodes.length;n++)if("DIV"===e[a].addedNodes[n].nodeName&&"dialog"===(t=e[a].addedNodes[n]).getAttribute("role"))return void b.Init.Overlay(t.querySelector(".ui-dialog-content"))},onSwipe:function(){var e,t,a,n;window.clearTimeout(b.Observer.touchTimeout),b.Init.touch&&b.Observer.area&&(e=b.Observer.startY-b.Observer.pageY,a=b.Observer.startX-b.Observer.pageX,.35>(n=Math.abs(a||1)/Math.abs(e||1))?1<b.Observer.area&&(-100>=e?t="down":100<=e&&(t="up")):3<n?a<=-(e=10>b.Observer.area?80:40)?t="right":a>=e&&(t="left"):.6<n&&1.4>n&&(-70>=e?t="diagDown":70<=e&&(t="diagUp")),b.Init.onSwipe(t,b.Observer.area))}},b.Global={Interactive:function(){b.App.Ogame&&b.Global.message({role:"Interactive",data:{commander:b.Option.is("commander"),galaxy:b.Acc.galaxy,page:b.App.page,timeStatus:b.Time.status,timeZoneDelta:b.Time.timeZoneDelta,galaxies:b.Uni.galaxies,donutGalaxy:b.Uni.donutGalaxy,U60:b.Option.is("U60"),U61:b.Option.isAnd("U60","U61"),U62:b.Option.get("U62",2),U65:b.Option.get("U65",2),U66:b.Option.get("U66",2),U67:b.Option.get("U67",2),B21:b.Option.get("B21",2),G30:b.Option.is("G30"),O51:b.Planets.improve,O53:b.Planets.enabled&&b.Option.is("O53"),F00:b.Option.is("F00"),F02:b.Option.get("F02",2),F19:b.Option.get("F19")}})},message:function(e,t){var a;if(e&&(window.dispatchEvent(new window.CustomEvent("ago_global",{detail:JSON.stringify(e)})),"getProperty"===e.role||t)){a=T.getAttribute("ago_global_data","id","ago-data-"+(e.property||t));try{return JSON.parse(a)}catch(e){return""}}}},b.App={page:"",Page:"",pathSkin:"",title:"",mode:0,beta:0,versionOGame:"",Overlay:{jumpgatelayer:"Jumpgate",techtree:"Techtree",phalanx:"Phalanx",showmessage:"Showmessage",buddies:"Buddies",notices:"Notices",search:"Search",sharereportoverlay:"ShareReport",messages:"Messages"},Content:{resources:"Resources",station:"Station",traderoverview:"Trader",research:"Research",shipyard:"Shipyard",defense:"Defense",galaxycontent:"Galaxy",allianceoverview:"Alliance",alliancemanagement:"Alliance",alliancebroadcast:"Alliance",allianceapplications:"Alliance",premium:"Premium",shop:"Shop",eventlist:"Events",fetcheventbox:"Fleet",minifleet:"Fleet",tutorialmission:"Tutorial",messages:"Messages",highscorecontent:"Highscore"},Start:function(){if(b.App.pathSkin=chrome.extension.getURL("/skin/"),b.App.versionAGO=chrome.runtime.getManifest().version,b.App.name=S.check(chrome.runtime.getManifest().name),b.App.beta=-1<b.App.name.indexOf("Alpha")?3:-1<b.App.name.indexOf("Beta")?1:0,b.Uni.domain=document.location.hostname.toLowerCase(),b.Uni.url=document.location.protocol+"//"+b.Uni.domain,document.location.href.match(/https:\/\/.+\.ogame.gameforge.com\/game\/index\.php\?+.*page=*/i)){var e=S.getParameter("page",document.location.href).toLowerCase();b.App.page="standalone"===e?S.getParameter("component",document.location.href).toLowerCase():e,0===b.App.page.indexOf("fleet")&&S.getParameter("cp",document.location.href)&&(b.App.page="fleet1"),b.Uni.path=document.location.href.split("?")[0]+"?page=";var t=b.Uni.domain.split("."),a=(t[0]||"").split("-");b.Uni.lang=(a[1]||"EN").toUpperCase(),b.Uni.number=I.parseIntAbs(a[0]),b.Uni.number&&(b.App.mode=3,b.Uni.abbr="UNI"+b.Uni.number,b.App.keyCom="AGO_"+b.Uni.lang,b.App.keyUni=b.App.keyCom+"_"+b.Uni.abbr,C.copy(C.parse(b.Data.getStorage(b.App.keyUni+"_App")),b.App),b.App.title=b.App.title||b.Uni.lang+" "+b.Uni.number,!b.App.playerId||S.getParameter("reloginx",document.location.href.toLowerCase())?b.App.login=b.App.reload=!0:b.App.keyPlayer=b.App.keyUni+"_"+b.App.playerId),b.App.disabled&&b.Notify.set("Problem",21),4!==t.length&&b.Notify.set("Problem",31)}else b.App.page=-1<b.Uni.domain.indexOf("speedsim.net")?"websim":-1<b.Uni.domain.indexOf("osimulate.com")?"osimulate":"",b.App.page&&(b.Uni.lang=(S.getParameter("uni",document.location.href).split("_")[0]||"EN").toUpperCase(),b.App.keyCom="AGO_"+b.Uni.lang,b.App.mode=2)},Init:function(){var e,t,a;for(e=document.head.getElementsByTagName("meta"),a=0;a<e.length;a++)if(e[a].name)switch(t=e[a].getAttribute("content"),e[a].name){case"ogame-player-name":b.Acc.name=t;break;case"ogame-planet-coordinates":b.Acc.coords=t;break;case"ogame-planet-type":b.Acc.type="moon"===t?3:1;break;case"ogame-planet-id":b.Acc.planetId=t;break;case"ogame-planet-name":b.Acc.planetName=t;break;case"ogame-player-id":b.Acc.playerId=t;break;case"ogame-version":b.App.versionOGame=t;break;case"ogame-session":b.Acc.session=t;break;case"ogame-timestamp":b.Acc.timestamp=+t||0;break;case"AntiGameOrigin":b.App.twice=!0}b.App.init=!0,b.App.mode=b.App.twice?0:2===b.App.mode?2:b.Acc.playerId&&b.Acc.session?4:3,4<=b.App.mode&&(!b.App.login&&b.App.playerId&&b.App.playerId!==b.Acc.playerId?(b.Init.status=b.App.mode=0,b.Data.setStorage(b.App.keyUni+"_App","")):(b.App.Ogame=!0,C.copy(b.Task.splitCoords(b.Acc.coords),b.Acc),b.Acc.coordstype=b.Acc.coords+":"+b.Acc.type,b.App.keyPlayer=b.App.keyUni+"_"+b.Acc.playerId,b.App.OgameMobile=!T.hasClass(document.body,null,"no-touch"),(b.App.login||b.App.playerId!==b.Acc.playerId||b.App.session!==b.Acc.session)&&(b.App.reload=!0,b.App.playerId=b.Acc.playerId,b.App.Save(),w.Log("App - Login:   Com: "+b.Uni.lang+"   Uni: "+b.Uni.number+"   Player: "+b.Acc.playerId+"   Session: "+b.Acc.session,!0)),e=document.createDocumentFragment(),T.append(e,"meta",{content:b.App.versionAGO,name:"AntiGameOrigin",id:"ago_global_data","ago-data-key":b.App.keyPlayer}),T.append(e,"script",{type:"text/javascript"}).textContent=w.Resource("js/global.js"),document.head.appendChild(e)))},Save:function(e){C.copy(e,b.App),b.Data.setStorage(b.App.keyUni+"_App",{disabled:b.App.disabled,playerId:b.Acc.playerId,session:b.Acc.session,title:b.Uni.lang+" "+(b.Uni.name||b.Uni.number||"")})}},b.Uni={status:0,path:"",url:"",domain:"",lang:"",abbr:"",number:0,name:"",speed:1,speedFleet:1,galaxies:50,systems:499,positions:16,rapidFire:1,acs:1,defToTF:0,debrisFactor:.3,repairFactor:.7,newbieProtectionLimit:0,newbieProtectionHigh:0,topScore:0,donutGalaxy:0,donutSystem:0,probeCargo:0,globalDeuteriumSaveFactor:1,cargoHyperspaceTechMultiplier:2},b.Acc={name:"",coords:"",type:0,playerId:"",planetId:"",session:"",timestamp:0},b.Data={Init:function(){b.App.reload&&b.Data.removeStorage(b.App.keyPlayer+"_Fleet_Current")},Remove:function(e){function t(e){C.iterate(window.localStorage,function(t){t&&0===t.indexOf(e||"AGO_")&&(window.localStorage.removeItem(t),w.Log("Delete - localstorage  - "+t,!0))})}w.Log("Delete - ############ - "+e,!0),w.message("Data","Remove",{mode:e},function(a){a&&(t("ago"===e?"AGO_":b.App.keyPlayer),t(b.App.keyUni),b.Init.Location("",600))})},setStorage:function(e,t){if(e)try{window.localStorage[e]=C.is(t)?JSON.stringify(t):t||""}catch(e){w.Log("Data - Error set localstorage",!0)}},getStorage:function(e,t){if(e){if(!t)return window.localStorage[e]||"";try{return JSON.parse(window.localStorage[e]||"{}")}catch(e){return{}}}return t?{}:""},removeStorage:function(e){e&&(window.localStorage[e]="")}}}]));